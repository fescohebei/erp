(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-170ea1d9","chunk-2d0c4d8d"],{1738:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-layout",[e("a-layout-content",[e("a-card",{attrs:{bordered:!1}},[e("div",[e("a-form",{attrs:{layout:"horizontal"}},[e("div",[e("a-row",{attrs:{gutter:10}},[e("a-col",{attrs:{md:6}},[e("a-form-item",{attrs:{label:"发起人",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-input",{attrs:{placeholder:"请输入"},model:{value:t.formSearch.OriginatorName,callback:function(a){t.$set(t.formSearch,"OriginatorName",a)},expression:"formSearch.OriginatorName"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",[e("a-button",{attrs:{type:"primary"},on:{click:t.init}},[t._v("查询")])],1)],1)],1)],1)])],1),e("a-table",{attrs:{columns:t.columns,dataSource:t.dataSource,pagination:!1,rowKey:"processInstanceId"},scopedSlots:t._u([{key:"action",fn:function(a,i){return e("span",{staticStyle:{"text-align":"right"}},[e("a",{staticStyle:{"margin-left":"8px"},on:{click:function(a){return t.detail(i)}}},[t._v("详情")]),e("a",{staticStyle:{"margin-left":"8px"},attrs:{disabled:i.Confirmed>0},on:{click:function(a){return t.confirm(i)}}},[t._v("确认")])])}}])},[e("template",{slot:"footer"},[e("a-pagination",{staticStyle:{float:"right"},attrs:{defaultCurrent:1,pageSize:t.formSearch.pageSize,total:t.formSearch.total,current:t.formSearch.current},on:{change:t.pagechange}})],1)],2)],1)],1),e("drawer-detail",{attrs:{show:t.drawer.detail,refresh:t.init}})],1)},r=[],s=(e("7514"),e("ac6a"),e("b775")),n=e("3d28"),l=[{title:"审批业务编号",dataIndex:"BusinessId"},{title:"创建时间",dataIndex:"CreateTime"},{title:"完成时间",dataIndex:"FinishTime"},{title:"所属部门",dataIndex:"OriginatorDeptName"},{title:"发起人",dataIndex:"Name"},{title:"主题",dataIndex:"Title"},{title:"报销类别",dataIndex:"报销类别"},{title:"总金额",dataIndex:"总金额"},{title:"结果",dataIndex:"ResultStr"},{title:"状态",dataIndex:"StatusStr"},{title:"操作",scopedSlots:{customRender:"action"}}],o={components:{DrawerDetail:n["default"]},data:function(){return{columns:l,formSearch:{pageSize:10,current:1,total:0},dataSource:[],roles:[],drawer:{detail:{show:!1}},modal:{exporttransfer:{show:!1}}}},mounted:function(){var t=this;t.init()},methods:{init:function(){this.pagechange(1)},pagechange:function(t){var a=this;a.formSearch.current=t,s["a"].post("/api/Budget/Approve/ListData",a.formSearch).then(function(t){0===t.code?(t.data.rows.forEach(function(t){var a=JSON.parse(t.FormComponentValues),e=a.find(function(t){return"报销类别"===t.Name}).Value;t.报销类别=e;var i=a.find(function(t){return"TableField"===t.ComponentType}).ExtValue,r=JSON.parse(i).statValue.find(function(t){return"总金额（元）"===t.label}).num;t.总金额=r+"元"}),a.dataSource=t.data.rows,a.roles=t.data.role,a.formSearch.total=t.count):a.$message.error(t.msg)}).catch(function(t){console.log(t)})},detail:function(t){this.drawer.detail={show:!0,id:t.processInstanceId,detail:t}},confirm:function(t){var a=this;s["a"].post("/api/Budget/Approve/ConfirmProcess",{ProcessInstanceId:t.processInstanceId}).then(function(t){0===t.code&&(a.$message.success(t.msg),a.init())})},exportbalanceout:function(){this.modal.exporttransfer={show:!0}}}},c=o,d=(e("8936"),e("2877")),u=Object(d["a"])(c,i,r,!1,null,null,null);a["default"]=u.exports},"3d28":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-drawer",{attrs:{message:"",visible:this.visible.show,width:650,destroyOnClose:!0,closable:!1},on:{close:t.onClose}},[e("template",{slot:"title"},[t._v("审批内容详情\n  ")]),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("姓名:")]),e("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.Name))]),e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("所属部门:")]),e("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.OriginatorDeptName))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("审批编号:")]),e("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.BusinessId))]),e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("主题:")]),e("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.Title))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("审批结果:")]),e("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.ResultStr))]),e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("流程状态:")]),e("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.StatusStr))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("发起时间:")]),e("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.CreateTime))]),e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("完成时间:")]),e("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.FinishTime))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("报销类别:")]),e("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.报销类别))]),e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("确认状态:")]),e("a-col",{attrs:{span:6}},[t._v(t._s(1==t.visible.detail.Confirmed?"已确认":"未确认"))])],1),1==t.visible.detail.Confirmed?e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("确认人:")]),e("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.ConfirmName))]),e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("确认时间:")]),e("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.ConfirmedTime))])],1):t._e(),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("总金额:")]),e("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.总金额))])],1),e("a-divider",{attrs:{orientation:"left"}},[t._v("分摊情况")]),e("a-table",{attrs:{columns:t.columns,dataSource:t.dataSource,bordered:!1,pagination:!1,size:"middle",rowKey:"部门"}})],2)},r=[],s=(e("7514"),e("ac6a"),e("b775")),n=[{title:"分摊部门",dataIndex:"部门"},{title:"金额",dataIndex:"金额"}],l={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,detail:{}},columns:n,dataSource:[]}},created:function(){var t=this;this.$watch("show",function(a,e){t.visible=a,t.visible.show&&t.init()})},methods:{init:function(){var t=this;s["a"].post("/api/Budget/Approve/ApproveDetail",{ProcessInstanceId:t.visible.detail.processInstanceId}).then(function(a){if(0===a.code){var e=new Array;a.data.forEach(function(a){t.visible.detail.Name=a.Name,t.visible.detail.OriginatorDeptName=a.OriginatorDeptName,t.visible.detail.BusinessId=a.BusinessId,t.visible.detail.Title=a.Title,t.visible.detail.ResultStr=a.ResultStr,t.visible.detail.StatusStr=a.StatusStr,t.visible.detail.CreateTime=a.CreateTime,t.visible.detail.FinishTime=a.FinishTime,t.visible.detail.ConfirmName=a.ConfirmName,t.visible.detail.ConfirmedTime=a.ConfirmedTime;var i=JSON.parse(a.FormComponentValues),r=i.find(function(t){return"报销类别"===t.Name}).Value;t.visible.detail.报销类别=r;var s=i.find(function(t){return"TableField"===t.ComponentType}).ExtValue,n=JSON.parse(s).statValue.find(function(t){return"总金额（元）"===t.label}).num;t.visible.detail.总金额=n+"元";i=JSON.parse(a.FormComponentValues);var l=i.find(function(t){return"部门分摊"===t.Name}).Value;JSON.parse(l).forEach(function(t){var a=t.rowValue.find(function(t){return"部门"===t.label}).value,i=t.rowValue.find(function(t){return"金额（元）"===t.label}).value;e.push({"部门":a,"金额":i})}),t.dataSource=e})}}).catch(function(t){console.log(t)})},onClose:function(){this.visible.show=!1,this.dataSource=[],this.refresh&&this.refresh()}}},o=l,c=e("2877"),d=Object(c["a"])(o,i,r,!1,null,null,null);a["default"]=d.exports},8936:function(t,a,e){"use strict";var i=e("8ee3"),r=e.n(i);r.a},"8ee3":function(t,a,e){}}]);