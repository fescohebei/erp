(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39326d9e","chunk-007c2ff2","chunk-2d21ad8a","chunk-2d2102c6","chunk-2d22ce32","chunk-2d0a47ac","chunk-2d0ba8ae"],{"02f4":function(e,t,a){var s=a("4588"),o=a("be13");e.exports=function(e){return function(t,a){var i,r,l=String(o(t)),n=s(a),c=l.length;return n<0||n>=c?e?"":void 0:(i=l.charCodeAt(n),i<55296||i>56319||n+1===c||(r=l.charCodeAt(n+1))<56320||r>57343?e?l.charAt(n):i:e?l.slice(n,n+2):r-56320+(i-55296<<10)+65536)}}},"0390":function(e,t,a){"use strict";var s=a("02f4")(!0);e.exports=function(e,t,a){return t+(a?s(e,t).length:1)}},"072a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"盘亏",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:700}},[a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form}},[a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:24}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("名称:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.GoodsName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("品牌:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.BrandName))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:24}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("大类:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.ClassName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("小类:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.SubclassName))])],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"部门",labelCol:{span:8},wrapperCol:{span:16}}},[[a("a-cascader",{directives:[{name:"decorator",rawName:"v-decorator",value:["DT_DepGuid",{initialValue:e.visible.goodsdetail.DT_DepGuid,rules:e.AFormImportRules.iptSelect}],expression:"['DT_DepGuid',{initialValue: visible.goodsdetail.DT_DepGuid,rules:AFormImportRules.iptSelect }]"}],attrs:{options:e.options,changeOnSelect:"",placeholder:"请选择",allowClear:!0},on:{change:e.onChange}})]],2)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"盘库人",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["DT_UserGuid",{initialValue:e.visible.goodsdetail.DT_UserGuid,rules:e.AFormImportRules.iptSelect}],expression:"['DT_UserGuid',{initialValue: visible.goodsdetail.DT_UserGuid,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.ApplyUser,function(t){return a("a-select-option",{key:t.code},[e._v(e._s(t.name))])}),1)],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"盘亏数量",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Amount",{rules:e.AFormImportRules.Amount}],expression:"['Amount',{rules:AFormImportRules.Amount}]"}],attrs:{addonAfter:e.visible.goodsdetail.UnitName}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"库存数量",labelCol:{span:8},wrapperCol:{span:16}}},[e._v(e._s(e.visible.goodsdetail.Amount)+e._s(e.visible.goodsdetail.UnitName))])],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"盘亏备注",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks"],expression:"['Remarks']"}],attrs:{placeholder:"备注",rows:4}})],1)],1)],1)],1)],1),a("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},o=[],i=a("b775"),r={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,goodsdetail:{GoodsName:""}},form:this.$form.createForm(this),dim:{Departments:[]},options:[],AFormImportRules:{iptSelect:[{required:!0,message:"请选择"}],Amount:[{required:!0,message:"请输入"},{validator:this.checkAmount}]}}},watch:{show:function(e,t){var a=this;a.visible=e,e.show&&a.init()}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields()},onChange:function(e){var t=this;e?i["a"].post("/api/Org/User/UsersJsonByOneLevelDepId",{DepId:e[e.length-1]}).then(function(e){0===e.code&&(t.dim.ApplyUser=e.data,t.form.setFieldsValue({DT_UserGuid:void 0}))}).catch(function(e){console.log(e)}):(t.dim.ApplyUser=null,t.form.setFieldsValue({DT_UserGuid:void 0}))},init:function(){var e=this;i["a"].post("/api/Org/Department/TopDepsTreeJson").then(function(t){0===t.code&&(e.options=t.data)}).catch(function(e){console.log(e)})},handleSubmit:function(){var e,t=this;this.form.validateFields(function(a,s){if(!a){var o=s;e=o.DT_DepGuid[o.DT_DepGuid.length-1],console.log(e),o.GoodsGuid=t.visible.id,i["a"].post("/api/Supplies/Goods/SaveFormBalanceLoss",{balance:o,DepId:e}).then(function(e){var a=e;a.code>0?t.$message.error(a.msg):(t.onClose(),t.$message.success(a.msg))}).catch(function(e){console.log(e)})}})},checkAmount:function(e,t,a){var s=/^[0-9]*$/;t>0&&t<=this.visible.goodsdetail.Amount&&s.test(t)?a():a("正整数且不能超过库存")},onDepartmentChange:function(e){var t=this;e?i["a"].post("/api/Org/User/UsersJsonByOneLevelDepGuid",{OneLevelDepGuid:e}).then(function(e){0===e.code&&(t.dim.ApplyUser=e.data,t.form.setFieldsValue({DT_UserGuid:void 0}))}).catch(function(e){console.log(e)}):(t.dim.ApplyUser=null,t.form.setFieldsValue({DT_UserGuid:void 0}))}}},l=r,n=a("2877"),c=Object(n["a"])(l,s,o,!1,null,null,null);t["default"]=c.exports},"0bfb":function(e,t,a){"use strict";var s=a("cb7c");e.exports=function(){var e=s(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},1578:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{message:"",visible:this.visible.show,width:650,destroyOnClose:!0,closable:!1},on:{close:e.onClose}},[a("template",{slot:"title"},[e._v("\n    "+e._s(e.goodsdetail.GoodsName)+"详情\n    "),a("a-button",{staticStyle:{float:"right"},attrs:{size:"small",icon:"form"},on:{click:e.edit}},[e._v("修改")])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("名称:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.goodsdetail.GoodsName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("品牌:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.visible.dim.Brand[e.goodsdetail.BrandID]))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("大类:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.goodsdetail.ClassName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("仓库:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.visible.dim.Warehouse[e.goodsdetail.WarehouseID]))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("小类:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.goodsdetail.SubclassName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("仓库备注:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.goodsdetail.WarehouseRemarks))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("规格型号:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.goodsdetail.Spec))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("库存:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.goodsdetail.Amount)+e._s(e.visible.dim.Unit[e.goodsdetail.UnitID]))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("备注:")]),a("a-col",{attrs:{span:16}},[e._v(e._s(e.goodsdetail.Remarks))])],1),a("a-divider",{attrs:{orientation:"left"}},[e._v("收支记录")]),a("a-row",{staticStyle:{padding:"8px 0"}},[a("a-col",{attrs:{span:24}},[a("a-button",{staticStyle:{float:"right","margin-left":"8px"},attrs:{size:"small",icon:"form"},on:{click:e.loss}},[e._v("盘亏")]),a("a-button",{staticStyle:{float:"right","margin-left":"8px"},attrs:{size:"small",icon:"form"},on:{click:e.gain}},[e._v("盘赢")]),a("a-button",{staticStyle:{float:"right","margin-left":"8px"},attrs:{size:"small",icon:"form"},on:{click:e.out}},[e._v("领用")]),a("a-button",{staticStyle:{float:"right","margin-left":"8px"},attrs:{size:"small",icon:"form"},on:{click:e.add}},[e._v("入库")])],1)],1),a("a-table",{attrs:{columns:e.columns,dataSource:e.dataSource,bordered:!1,pagination:!1,size:"middle",rowKey:"BalanceGuid"},scopedSlots:e._u([{key:"balanceType",fn:function(t,s){return[1==s.Direction||2==s.Direction?a("span",{staticStyle:{color:"red"}},[e._v(e._s(s.DirectionName))]):e._e(),-1==s.Direction||-2==s.Direction?a("span",{staticStyle:{color:"green"}},[e._v(e._s(s.DirectionName))]):e._e()]}},{key:"action",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[s.BalanceGuid==e.enableeditguid?a("a",{on:{click:function(t){return e.outchange(s)}}},[e._v("修改")]):e._e()])}},{key:"shuliang",fn:function(t,a){return[e._v("\n      "+e._s(a.Amount)+e._s(a.UnitName)+"\n    ")]}}])},[a("template",{slot:"footer"},[a("a-pagination",{staticStyle:{float:"right"},attrs:{defaultCurrent:1,pageSize:e.formSearch.pageSize,total:e.formSearch.total,current:e.formSearch.current},on:{change:e.pagechange}})],1)],2),a("drawer-edit",{attrs:{show:e.drawer.edit,refresh:e.init}}),a("drawer-add",{attrs:{show:e.drawer.add,refresh:e.init}}),a("drawer-out",{attrs:{show:e.drawer.out,refresh:e.init}}),a("drawer-gain",{attrs:{show:e.drawer.gain,refresh:e.init}}),a("drawer-loss",{attrs:{show:e.drawer.loss,refresh:e.init}}),a("modal-outchange",{attrs:{show:e.modal.outchange,refresh:e.init}})],2)},o=[],i=a("b775"),r=a("b783"),l=a("bcf9"),n=a("383f"),c=a("f4c1"),d=a("072a"),u=a("9997"),p=(a("c32d"),[{title:"收支",scopedSlots:{customRender:"balanceType"}},{title:"申领人",dataIndex:"ApplyName"},{title:"申领部门",dataIndex:"DepName"},{title:"操作人",dataIndex:"OperatorName"},{title:"发放日期",dataIndex:"Createdate"},{title:"数量",scopedSlots:{customRender:"shuliang"}},{title:"单价",dataIndex:"UnitPrice"},{title:"备注",dataIndex:"Remarks"},{title:"操作",scopedSlots:{customRender:"action"}}]),m={components:{DrawerEdit:r["default"],DrawerAdd:l["default"],DrawerOut:n["default"],DrawerGain:c["default"],DrawerLoss:d["default"],ModalOutchange:u["default"]},props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,id:{},dim:{Brand:{},Unit:{},Warehouse:{}}},columns:p,formSearch:{pageSize:10,current:1,total:0},dataSource:[],goodsdetail:{},enableeditguid:"",form:this.$form.createForm(this),drawer:{detail:{show:!1},add:{show:!1},out:{show:!1},gain:{show:!1},loss:{show:!1},edit:{show:!1}},modal:{outchange:{show:!1}}}},created:function(){var e=this;this.$watch("show",function(t,a){e.visible=t,e.visible.show&&e.init()})},methods:{init:function(){var e=this;i["a"].post("/api/Supplies/Goods/Detail",{GoodsGuid:e.show.id}).then(function(t){0===t.code&&(e.goodsdetail=t.data,e.pagechange(1))}).catch(function(e){console.log(e)})},pagechange:function(e){var t=this;t.formSearch.current=e,t.formSearch.GoodsGuid=t.show.id,i["a"].post("/api/Supplies/Goods/GoodsBalanceList",t.formSearch).then(function(e){var a=e;0===a.code&&(t.dataSource=a.data,t.formSearch.total=a.count,t.enableeditguid=a.msg)}).catch(function(e){console.log(e)})},onClose:function(){this.visible.show=!1,this.dataSource=[],this.goodsdetail={},this.refresh&&this.refresh()},detail:function(e){this.drawer.detail={show:!0,id:e.SBOrderItemGuid}},edit:function(){var e=this;e.goodsdetail.ClassID=parseInt(e.goodsdetail.ClassID),e.goodsdetail.SubclassID=parseInt(e.goodsdetail.SubclassID),i["a"].post("/api/Supplies/Goods/FormNewGoods",{ClassID:e.goodsdetail.ClassID}).then(function(t){0===t.code&&(e.drawer.edit={show:!0,id:e.show.id,Brand:e.visible.dimCode.Brand,Unit:e.visible.dimCode.Unit,Class:t.data.Class,SubClass:t.data.SubClass,Warehouse:e.visible.dimCode.Warehouse,goodsdetail:e.goodsdetail})}).catch(function(e){console.log(e)})},add:function(){this.drawer.add={show:!0,id:this.show.id,goodsdetail:this.goodsdetail}},out:function(){this.drawer.out={show:!0,id:this.show.id,goodsdetail:this.goodsdetail}},gain:function(){this.drawer.gain={show:!0,id:this.show.id,goodsdetail:this.goodsdetail}},loss:function(){this.drawer.loss={show:!0,id:this.show.id,goodsdetail:this.goodsdetail}},outchange:function(e){this.modal.outchange={show:!0,id:e.BalanceGuid,balance:e}}}},h=m,v=a("2877"),f=Object(v["a"])(h,s,o,!1,null,null,null);t["default"]=f.exports},"214f":function(e,t,a){"use strict";a("b0c5");var s=a("2aba"),o=a("32e9"),i=a("79e5"),r=a("be13"),l=a("2b4c"),n=a("520a"),c=l("species"),d=!i(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),u=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();e.exports=function(e,t,a){var p=l(e),m=!i(function(){var t={};return t[p]=function(){return 7},7!=""[e](t)}),h=m?!i(function(){var t=!1,a=/a/;return a.exec=function(){return t=!0,null},"split"===e&&(a.constructor={},a.constructor[c]=function(){return a}),a[p](""),!t}):void 0;if(!m||!h||"replace"===e&&!d||"split"===e&&!u){var v=/./[p],f=a(r,p,""[e],function(e,t,a,s,o){return t.exec===n?m&&!o?{done:!0,value:v.call(t,a,s)}:{done:!0,value:e.call(a,t,s)}:{done:!1}}),g=f[0],b=f[1];s(String.prototype,e,g),o(RegExp.prototype,p,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},"28a5":function(e,t,a){"use strict";var s=a("aae3"),o=a("cb7c"),i=a("ebd6"),r=a("0390"),l=a("9def"),n=a("5f1b"),c=a("520a"),d=a("79e5"),u=Math.min,p=[].push,m="split",h="length",v="lastIndex",f=4294967295,g=!d(function(){RegExp(f,"y")});a("214f")("split",2,function(e,t,a,d){var b;return b="c"=="abbc"[m](/(b)*/)[1]||4!="test"[m](/(?:)/,-1)[h]||2!="ab"[m](/(?:ab)*/)[h]||4!="."[m](/(.?)(.?)/)[h]||"."[m](/()()/)[h]>1||""[m](/.?/)[h]?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!s(e))return a.call(o,e,t);var i,r,l,n=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,m=void 0===t?f:t>>>0,g=new RegExp(e.source,d+"g");while(i=c.call(g,o)){if(r=g[v],r>u&&(n.push(o.slice(u,i.index)),i[h]>1&&i.index<o[h]&&p.apply(n,i.slice(1)),l=i[0][h],u=r,n[h]>=m))break;g[v]===i.index&&g[v]++}return u===o[h]?!l&&g.test("")||n.push(""):n.push(o.slice(u)),n[h]>m?n.slice(0,m):n}:"0"[m](void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,s){var o=e(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,o,s):b.call(String(o),a,s)},function(e,t){var s=d(b,e,this,t,b!==a);if(s.done)return s.value;var c=o(e),p=String(this),m=i(c,RegExp),h=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(g?"y":"g"),w=new m(g?c:"^(?:"+c.source+")",v),_=void 0===t?f:t>>>0;if(0===_)return[];if(0===p.length)return null===n(w,p)?[p]:[];var S=0,x=0,C=[];while(x<p.length){w.lastIndex=g?x:0;var y,G=n(w,g?p:p.slice(x));if(null===G||(y=u(l(w.lastIndex+(g?0:x)),p.length))===S)x=r(p,x,h);else{if(C.push(p.slice(S,x)),C.length===_)return C;for(var D=1;D<=G.length-1;D++)if(C.push(G[D]),C.length===_)return C;x=S=y}}return C.push(p.slice(S)),C}]})},"383f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"出库",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:700}},[a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form}},[a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:24}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("名称:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.GoodsName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("品牌:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.BrandName))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:24}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("大类:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.ClassName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("小类:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.SubclassName))])],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"部门",labelCol:{span:8},wrapperCol:{span:16}}},[[a("a-cascader",{directives:[{name:"decorator",rawName:"v-decorator",value:["DT_DepGuid",{initialValue:e.visible.goodsdetail.DT_DepGuid,rules:e.AFormImportRules.iptSelect}],expression:"['DT_DepGuid',{initialValue: visible.goodsdetail.DT_DepGuid,rules:AFormImportRules.iptSelect }]"}],attrs:{options:e.options,changeOnSelect:"",placeholder:"请选择",allowClear:!0},on:{change:e.onChange}})]],2)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"领取人",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["DT_UserGuid",{initialValue:e.visible.goodsdetail.DT_UserGuid,rules:e.AFormImportRules.iptSelect}],expression:"['DT_UserGuid',{initialValue: visible.goodsdetail.DT_UserGuid,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.ApplyUser,function(t){return a("a-select-option",{key:t.code},[e._v(e._s(t.name))])}),1)],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"领取数量",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Amount",{rules:e.AFormImportRules.Amount}],expression:"['Amount',{rules:AFormImportRules.Amount}]"}],attrs:{addonAfter:e.visible.goodsdetail.UnitName}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"库存数量",labelCol:{span:8},wrapperCol:{span:16}}},[e._v(e._s(e.visible.goodsdetail.Amount)+e._s(e.visible.goodsdetail.UnitName))])],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"批次备注",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks"],expression:"['Remarks']"}],attrs:{placeholder:"备注",rows:4}})],1)],1)],1)],1)],1),a("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},o=[],i=a("b775"),r={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,goodsdetail:{GoodsName:""}},form:this.$form.createForm(this),dim:{Departments:[]},options:[],AFormImportRules:{iptSelect:[{required:!0,message:"请选择"}],Amount:[{required:!0,message:"请输入"},{validator:this.checkAmount}]}}},watch:{show:function(e,t){var a=this;a.visible=e,e.show&&a.init()}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields()},onChange:function(e){var t=this;e?i["a"].post("/api/Org/User/UsersJsonByOneLevelDepId",{DepId:e[e.length-1]}).then(function(e){0===e.code&&(t.dim.ApplyUser=e.data,t.form.setFieldsValue({DT_UserGuid:void 0}))}).catch(function(e){console.log(e)}):(t.dim.ApplyUser=null,t.form.setFieldsValue({DT_UserGuid:void 0}))},init:function(){var e=this;i["a"].post("/api/Org/Department/TopDepsTreeJson").then(function(t){0===t.code&&(e.options=t.data)}).catch(function(e){console.log(e)})},handleSubmit:function(){var e,t=this;this.form.validateFields(function(a,s){if(!a){var o=s;e=o.DT_DepGuid[o.DT_DepGuid.length-1],o.DT_DepGuid="",o.GoodsGuid=t.visible.id,i["a"].post("/api/Supplies/Goods/SaveFormBalanceOut",{balance:o,DepId:e}).then(function(e){var a=e;a.code>0?t.$message.error(a.msg):(t.onClose(),t.$message.success(a.msg))}).catch(function(e){console.log(e)})}})},checkAmount:function(e,t,a){var s=/^[0-9]*$/;t>0&&t<=this.visible.goodsdetail.Amount&&s.test(t)?a():a("正整数且不能超过库存")}}},l=r,n=a("2877"),c=Object(n["a"])(l,s,o,!1,null,null,null);t["default"]=c.exports},"520a":function(e,t,a){"use strict";var s=a("0bfb"),o=RegExp.prototype.exec,i=String.prototype.replace,r=o,l="lastIndex",n=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e[l]||0!==t[l]}(),c=void 0!==/()??/.exec("")[1],d=n||c;d&&(r=function(e){var t,a,r,d,u=this;return c&&(a=new RegExp("^"+u.source+"$(?!\\s)",s.call(u))),n&&(t=u[l]),r=o.call(u,e),n&&r&&(u[l]=u.global?r.index+r[0].length:t),c&&r&&r.length>1&&i.call(r[0],a,function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(r[d]=void 0)}),r}),e.exports=r},"5f1b":function(e,t,a){"use strict";var s=a("23c6"),o=RegExp.prototype.exec;e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var i=a.call(e,t);if("object"!==typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==s(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},9997:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"领用修改",destroyOnClose:!0,visible:this.visible.show,maskClosable:!0},on:{ok:e.handleSubmit,cancel:e.onClose}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"部门",labelCol:{span:6},wrapperCol:{span:16}}},[[a("a-cascader",{attrs:{options:e.options,changeOnSelect:"",placeholder:"请选择",allowClear:!0},on:{change:e.onChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})]],2),a("a-form-item",{attrs:{label:"领取人",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["DT_UserGuid",{initialValue:e.visible.balance.DT_UserGuid,rules:e.AFormImportRules.iptSelect}],expression:"['DT_UserGuid',{initialValue: visible.balance.DT_UserGuid,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.ApplyUser,function(t){return a("a-select-option",{key:t.code},[e._v(e._s(t.name))])}),1)],1),a("a-form-item",{attrs:{label:"领取数量",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Amount",{initialValue:e.visible.balance.Amount,rules:e.AFormImportRules.Amount}],expression:"['Amount',{initialValue: visible.balance.Amount,rules:AFormImportRules.Amount}]"}],attrs:{addonAfter:e.visible.balance.UnitName}})],1),a("a-form-item",{attrs:{label:"批次备注",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks",{initialValue:e.visible.balance.Remarks}],expression:"['Remarks',{initialValue:visible.balance.Remarks }]"}],attrs:{placeholder:"备注"}})],1)],1)],1)},o=[],i=(a("28a5"),a("b775")),r={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,balance:{}},form:this.$form.createForm(this),dim:{Departments:[]},options:[],selectedOptions:[],AFormImportRules:{iptSelect:[{required:!0,message:"请选择"}],Amount:[{required:!0,message:"请输入"},{validator:this.checkAmount}]}}},watch:{show:function(e,t){var a=this;a.visible=e,e.show&&a.init()}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields()},init:function(){var e=this;i["a"].post("/api/Org/Department/TopDepsTreeJson").then(function(t){0===t.code&&(e.options=t.data)}).catch(function(e){console.log(e)}),i["a"].post("/api/Org/Department/GetRootDepId",{childDepGuid:e.visible.balance.DT_DepGuid}).then(function(t){e.selectedOptions=t.split(",")}).catch(function(e){console.log(e)}),i["a"].post("/api/Org/Department/TopDepsAndUserJson",{OneLevelDepGuid:e.visible.balance.DT_DepGuid}).then(function(t){0===t.code&&(e.dim.ApplyUser=t.data.ApplyUser)}).catch(function(e){console.log(e)})},onChange:function(e){console.log(e[e.length-1]);var t=this;e?i["a"].post("/api/Org/User/UsersJsonByOneLevelDepId",{DepId:e[e.length-1]}).then(function(e){0===e.code&&(t.dim.ApplyUser=e.data,t.form.setFieldsValue({DT_UserGuid:void 0}))}).catch(function(e){console.log(e)}):(t.dim.ApplyUser=null,t.form.setFieldsValue({DT_UserGuid:void 0}))},handleSubmit:function(){var e=this;this.form.validateFields(function(t,a){if(!t){var s=a;s.GoodsGuid=e.visible.balance.GoodsGuid,s.BalanceGuid=e.visible.id;var o=e.selectedOptions[e.selectedOptions.length-1];console.log(o),i["a"].post("/api/Supplies/Goods/SaveFormBalanceChange",{balance:s,DepId:o}).then(function(t){var a=t;a.code>0?e.$message.error(a.msg):(e.onClose(),e.$message.success(a.msg))}).catch(function(e){console.log(e)})}})},checkAmount:function(e,t,a){var s=/^[0-9]*$/;t>0&&t<=this.visible.balance.Amount&&s.test(t)?a():a("正整数且不能超过之前领用数量")},onDepartmentChange:function(e){var t=this;e?i["a"].post("/api/Org/User/UsersJsonByOneLevelDepGuid",{OneLevelDepGuid:e}).then(function(e){0===e.code&&(t.dim.ApplyUser=e.data,t.form.setFieldsValue({DT_UserGuid:void 0}))}).catch(function(e){console.log(e)}):(t.dim.ApplyUser=null,t.form.setFieldsValue({DT_UserGuid:void 0}))}}},l=r,n=a("2877"),c=Object(n["a"])(l,s,o,!1,null,null,null);t["default"]=c.exports},aae3:function(e,t,a){var s=a("d3f4"),o=a("2d95"),i=a("2b4c")("match");e.exports=function(e){var t;return s(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},b0c5:function(e,t,a){"use strict";var s=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:s!==/./.exec},{exec:s})},b783:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"添加/修改",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:700}},[a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"名称",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["GoodsName",{initialValue:e.visible.goodsdetail.GoodsName,rules:e.AFormImportRules.GoodsName}],expression:"['GoodsName',{initialValue:visible.goodsdetail.GoodsName,rules:AFormImportRules.GoodsName}]"}]})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"品牌",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["BrandID",{initialValue:e.visible.goodsdetail.BrandID,rules:e.AFormImportRules.iptSelect}],expression:"['BrandID',{initialValue: visible.goodsdetail.BrandID,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.visible.Brand,function(t){return a("a-select-option",{key:t.code},[e._v(e._s(t.name))])}),1)],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"大类",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["ClassID",{initialValue:e.visible.goodsdetail.ClassID,rules:e.AFormImportRules.iptSelect}],expression:"['ClassID',{initialValue: visible.goodsdetail.ClassID,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0},on:{change:e.onClassChange}},e._l(e.visible.Class,function(t){return a("a-select-option",{key:t.code},[e._v(e._s(t.name))])}),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"小类",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["SubclassID",{initialValue:e.visible.goodsdetail.SubclassID,rules:e.AFormImportRules.iptSelect}],expression:"['SubclassID',{initialValue: visible.goodsdetail.SubclassID,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.visible.SubClass,function(t){return a("a-select-option",{key:t.code},[e._v(e._s(t.name))])}),1)],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"规格型号",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Spec",{initialValue:e.visible.goodsdetail.Spec}],expression:"['Spec',{initialValue:visible.goodsdetail.Spec}]"}]})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"数量单位",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["UnitID",{initialValue:e.visible.goodsdetail.UnitID,rules:e.AFormImportRules.iptSelect}],expression:"['UnitID',{initialValue: visible.goodsdetail.UnitID,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.visible.Unit,function(t){return a("a-select-option",{key:t.code},[e._v(e._s(t.name))])}),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"存放仓库",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["WarehouseID",{initialValue:e.visible.goodsdetail.WarehouseID,rules:e.AFormImportRules.iptSelect}],expression:"['WarehouseID',{initialValue: visible.goodsdetail.WarehouseID,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.visible.Warehouse,function(t){return a("a-select-option",{key:t.code},[e._v(e._s(t.name))])}),1)],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"备注",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks",{initialValue:e.visible.goodsdetail.Remarks}],expression:"['Remarks',{initialValue:visible.goodsdetail.Remarks }]"}],attrs:{placeholder:"备注",rows:4}})],1)],1)],1)],1)],1),a("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")]),null==e.visible.id?a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handleSubmit("next")}}},[e._v("提交并继续录入")]):e._e()],1)],1)},o=[],i=a("b775"),r={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,goodsdetail:{GoodsName:"",ClassID:""},Brand:[],Unit:[],Warehouse:[],SubClass:[],Class:[]},dim:{Class:[],SubClass:[]},form:this.$form.createForm(this),AFormImportRules:{GoodsName:[{required:!0,message:"请输入名称"}],iptSelect:[{required:!0,message:"请选择"}]}}},created:function(){var e=this,t=this;this.$watch("show",function(a,s){e.visible=a,console.log(e.visible),e.visible.show&&(null==t.visible.goodsdetail&&(t.visible.goodsdetail={GoodsName:"",ClassID:""}),e.init())})},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields()},init:function(){},handleSubmit:function(e){var t=this;this.form.validateFields(function(a,s){if(!a){var o=s;o.GoodsGuid=t.visible.id,i["a"].post("/api/Supplies/Goods/SaveFormNewGoods",o).then(function(a){var s=a;s.code>0?t.$message.error(s.msg):("next"===e?(t.form.resetFields(),t.refresh&&t.refresh()):t.onClose(),t.$message.success(s.msg))}).catch(function(e){console.log(e)})}})},onClassChange:function(e){var t=this;i["a"].post("/api/Other/Class/Subclass",{ClassID:e,Type:1}).then(function(e){0===e.code&&(t.visible.SubClass=e.data,t.form.setFieldsValue({SubclassID:void 0}))}).catch(function(e){console.log(e)})}}},l=r,n=a("2877"),c=Object(n["a"])(l,s,o,!1,null,null,null);t["default"]=c.exports},bcf9:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"入库",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:700}},[a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form}},[a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:24}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("名称:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.GoodsName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("品牌:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.BrandName))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:24}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("大类:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.ClassName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("小类:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.SubclassName))])],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"单价",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["UnitPrice",{rules:e.AFormImportRules.UnitPrice}],expression:"['UnitPrice',{rules:AFormImportRules.UnitPrice}]"}],attrs:{addonAfter:"元"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"数量",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Amount",{rules:e.AFormImportRules.Amount}],expression:"['Amount',{rules:AFormImportRules.Amount}]"}],attrs:{addonAfter:e.visible.goodsdetail.UnitName}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"供应商",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["GYSGuid",{initialValue:e.visible.goodsdetail.GYSGuid,rules:e.AFormImportRules.iptSelect}],expression:"['GYSGuid',{initialValue: visible.goodsdetail.GYSGuid,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.GYSList,function(t){return a("a-select-option",{key:t.gysguid},[e._v(e._s(t.gysname))])}),1)],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"批次备注",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks"],expression:"['Remarks']"}],attrs:{placeholder:"备注",rows:4}})],1)],1)],1)],1)],1),a("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},o=[],i=a("b775"),r={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,goodsdetail:{GoodsName:"",ClassID:"",GYSGuid:""}},dim:{GYSlist:[]},form:this.$form.createForm(this),AFormImportRules:{UnitPrice:[{required:!0,message:"请输入"},{validator:this.checkPrice}],Amount:[{required:!0,message:"请输入"},{validator:this.checkAmount}],GYSGuid:[{required:!0,message:"请选择"}]}}},watch:{show:function(e,t){var a=this;a.visible=e,e.show&&(null==a.visible.goodsdetail&&(a.visible.goodsdetail={GoodsName:"",ClassID:"",GYSGuid:""}),a.init())}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields()},init:function(){var e=this;i["a"].post("/api/Supplies/Supplier/GetGYSList").then(function(t){0===t.code&&(e.dim=t.data)}).catch(function(e){console.log(e)})},handleSubmit:function(){var e=this;this.form.validateFields(function(t,a){if(!t){var s=a;s.GoodsGuid=e.visible.id,i["a"].post("/api/Supplies/Goods/SaveFormBalanceAdd",s).then(function(t){var a=t;a.code>0?e.$message.error(a.msg):(e.onClose(),e.$message.success(a.msg))}).catch(function(e){console.log(e)})}})},checkPrice:function(e,t,a){var s=/^[0-9]*\.?[0-9]{0,2}$/;t>0&&s.test(t)?a():a("大于零且小数最多两位")},checkAmount:function(e,t,a){var s=/^[0-9]*$/;t>0&&s.test(t)?a():a("大于零的整数")}}},l=r,n=a("2877"),c=Object(n["a"])(l,s,o,!1,null,null,null);t["default"]=c.exports},f4c1:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"盘盈",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:700}},[a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form}},[a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:24}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("名称:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.GoodsName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("品牌:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.BrandName))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:24}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("大类:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.ClassName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("小类:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.SubclassName))])],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"单价",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["UnitPrice",{rules:e.AFormImportRules.UnitPrice}],expression:"['UnitPrice',{rules:AFormImportRules.UnitPrice}]"}],attrs:{addonAfter:"元"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"数量",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Amount",{rules:e.AFormImportRules.Amount}],expression:"['Amount',{rules:AFormImportRules.Amount}]"}],attrs:{addonAfter:e.visible.goodsdetail.UnitName}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"供应商",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["GYSGuid",{initialValue:e.visible.goodsdetail.GYSGuid,rules:e.AFormImportRules.iptSelect}],expression:"['GYSGuid',{initialValue: visible.goodsdetail.GYSGuid,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.GYSList,function(t){return a("a-select-option",{key:t.gysguid},[e._v(e._s(t.gysname))])}),1)],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"批次备注",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks"],expression:"['Remarks']"}],attrs:{placeholder:"备注",rows:4}})],1)],1)],1)],1)],1),a("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},o=[],i=a("b775"),r={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,goodsdetail:{GoodsName:"",ClassID:"",GYSGuid:""}},dim:{GYSlist:[]},form:this.$form.createForm(this),AFormImportRules:{UnitPrice:[{required:!0,message:"请输入"},{validator:this.checkPrice}],Amount:[{required:!0,message:"请输入"},{validator:this.checkAmount}],GYSGuid:[{required:!0,message:"请选择"}]}}},watch:{show:function(e,t){var a=this;a.visible=e,e.show&&(null==a.visible.goodsdetail&&(a.visible.goodsdetail={GoodsName:"",ClassID:"",GYSGuid:""}),a.init())}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields()},init:function(){var e=this;i["a"].post("/api/Supplies/Supplier/GetGYSList").then(function(t){0===t.code&&(e.dim=t.data)}).catch(function(e){console.log(e)})},handleSubmit:function(){var e=this;this.form.validateFields(function(t,a){if(!t){var s=a;s.GoodsGuid=e.visible.id,i["a"].post("/api/Supplies/Goods/SaveFormBalanceGain",s).then(function(t){var a=t;a.code>0?e.$message.error(a.msg):(e.onClose(),e.$message.success(a.msg))}).catch(function(e){console.log(e)})}})},checkPrice:function(e,t,a){var s=/^[0-9]*\.?[0-9]{0,2}$/;t>0&&s.test(t)?a():a("大于零且小数最多两位")},checkAmount:function(e,t,a){var s=/^[0-9]*$/;t>0&&s.test(t)?a():a("大于零的整数")}}},l=r,n=a("2877"),c=Object(n["a"])(l,s,o,!1,null,null,null);t["default"]=c.exports}}]);