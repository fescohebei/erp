(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f101e"],{"9f94":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{style:{overflow:"auto",height:"100%"}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"销线id",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["LeadsGuid",{initialValue:e.assetsdetail.LeadsGuid}],expression:"['LeadsGuid',{initialValue:assetsdetail.LeadsGuid}]"}]})],1),t("a-form-item",{attrs:{label:"公司名称",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input-search",{directives:[{name:"decorator",rawName:"v-decorator",value:["ComName",{initialValue:e.assetsdetail.ComName,rules:e.AFormImportRules.iptInputReq}],expression:"['ComName',{initialValue:assetsdetail.ComName,rules:AFormImportRules.iptInputReq}]"}],attrs:{placeholder:"请输入公司名称",enterButton:"搜索"},on:{search:e.onSearch,change:e.onChange}})],1),t("span",{directives:[{name:"show",rawName:"v-show",value:e.searchNext,expression:"searchNext"}]},[t("a-form-item",{attrs:{label:"组织机构代码证",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Code",{initialValue:e.searchCom.Code,rules:e.AFormImportRules.iptInput}],expression:"['Code',{initialValue:searchCom.Code,rules:AFormImportRules.iptInput}]"}],attrs:{disabled:e.haveCom}})],1),t("a-form-item",{attrs:{label:"网址",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Url",{initialValue:e.searchCom.Url,rules:e.AFormImportRules.iptInput}],expression:"['Url',{initialValue:searchCom.Url,rules:AFormImportRules.iptInput}]"}],attrs:{disabled:e.haveCom}})],1),0==e.haveCom?[t("a-form-item",{attrs:{label:"城市",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cityname",{rules:e.AFormImportRules.iptInputReq}],expression:"['cityname',{rules:AFormImportRules.iptInputReq}]"}],attrs:{readOnly:"",placeholder:"请输入"},on:{click:e.chooseArea}})],1),t("a-form-item",{attrs:{label:"地址",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Address",{initialValue:e.searchCom.Address,rules:e.AFormImportRules.iptInputReq}],expression:"['Address',{initialValue:searchCom.Address,rules:AFormImportRules.iptInputReq}]"}],attrs:{disabled:e.haveCom}})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"客户来源",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-select",{attrs:{disabled:!0}},e._l(e.Source,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1),t("a-form-item",{attrs:{label:"客户性质",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["Nature",{initialValue:e.searchCom.Nature,rules:e.AFormImportRules.iptSelectReq}],expression:"['Nature',{initialValue:searchCom.Nature,rules:AFormImportRules.iptSelectReq }]"}],attrs:{placeholder:"请选择",allowClear:!0,disabled:e.haveCom}},e._l(e.Nature,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1),t("a-form-item",{attrs:{label:"客户规模",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["Scale",{initialValue:e.searchCom.Scale,rules:e.AFormImportRules.iptSelectReq}],expression:"['Scale',{initialValue:searchCom.Scale,rules:AFormImportRules.iptSelectReq }]"}],attrs:{placeholder:"请选择",allowClear:!0,disabled:e.haveCom}},e._l(e.Scale,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1),t("a-form-item",{attrs:{label:"行业",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["Industry",{initialValue:e.searchCom.Industry,rules:e.AFormImportRules.iptSelectReq}],expression:"['Industry',{initialValue:searchCom.Industry,rules:AFormImportRules.iptSelectReq }]"}],attrs:{placeholder:"请选择",allowClear:!0,disabled:e.haveCom}},e._l(e.Industry,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1)]:e._e(),1==e.haveCom?[t("a-form-item",{attrs:{label:"城市",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cityname",{initialValue:e.cityList[e.searchCom.CityCode],rules:e.AFormImportRules.iptInput}],expression:"['cityname',{initialValue:cityList[searchCom.CityCode],rules:AFormImportRules.iptInput}]"}],attrs:{readOnly:"",placeholder:"请输入",disabled:e.haveCom},on:{click:e.chooseArea}})],1),t("a-form-item",{attrs:{label:"地址",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Address",{initialValue:e.searchCom.Address,rules:e.AFormImportRules.iptInput}],expression:"['Address',{initialValue:searchCom.Address,rules:AFormImportRules.iptInput}]"}],attrs:{disabled:e.haveCom}})],1),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"客户来源",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-select",{attrs:{disabled:!0}},e._l(e.Source,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1),t("a-form-item",{attrs:{label:"客户性质",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["Nature",{initialValue:e.searchCom.Nature,rules:e.AFormImportRules.iptSelect}],expression:"['Nature',{initialValue:searchCom.Nature,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0,disabled:e.haveCom}},e._l(e.Nature,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1),t("a-form-item",{attrs:{label:"客户规模",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["Scale",{initialValue:e.searchCom.Scale,rules:e.AFormImportRules.iptSelect}],expression:"['Scale',{initialValue:searchCom.Scale,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0,disabled:e.haveCom}},e._l(e.Scale,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1),t("a-form-item",{attrs:{label:"行业",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["Industry",{initialValue:e.searchCom.Industry,rules:e.AFormImportRules.iptSelect}],expression:"['Industry',{initialValue:searchCom.Industry,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0,disabled:e.haveCom}},e._l(e.Industry,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1)]:e._e(),t("a-form-item",{attrs:{label:"产品线",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["ProductLine",{initialValue:e.assetsdetail.ProductLine,rules:e.AFormImportRules.iptSelectReq}],expression:"['ProductLine',{initialValue:assetsdetail.ProductLine,rules:AFormImportRules.iptSelectReq }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.ComProductLine,function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.text))])}),1)],1),t("a-form-item",{attrs:{label:"预算",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Budget",{rules:e.AFormImportRules.iptInputNumber}],expression:"['Budget',{rules:AFormImportRules.iptInputNumber}]"}]})],1),t("a-form-item",{attrs:{label:"备注",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarkspro"],expression:"['Remarkspro']"}],attrs:{placeholder:"备注",rows:4}})],1),t("a-form-item",{attrs:{label:"联系人姓名",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Linkman",{initialValue:e.assetsdetail.Linkman,rules:e.AFormImportRules.iptInputReq}],expression:"['Linkman',{initialValue:assetsdetail.Linkman,rules:AFormImportRules.iptInputReq}]"}]})],1),t("a-form-item",{attrs:{label:"手机号码",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Mobile",{initialValue:e.validtel(e.assetsdetail.LinkTel)?e.assetsdetail.LinkTel:"",rules:e.AFormImportRules.Mobile}],expression:"['Mobile',{initialValue:(validtel(assetsdetail.LinkTel) ? assetsdetail.LinkTel : ''),rules:AFormImportRules.Mobile}]"}]})],1),t("a-form-item",{attrs:{label:"固定电话",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Tel",{initialValue:e.validtel(e.assetsdetail.LinkTel)?"":e.assetsdetail.LinkTel}],expression:"['Tel',{initialValue:(validtel(assetsdetail.LinkTel) ? '' : assetsdetail.LinkTel)}]"}]})],1),t("a-form-item",{attrs:{label:"邮箱",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Email",{rules:e.AFormImportRules.Email}],expression:"['Email',{rules:AFormImportRules.Email}]"}]})],1),t("a-form-item",{attrs:{label:"所在部门",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Department",{rules:e.AFormImportRules.iptInput}],expression:"['Department',{rules:AFormImportRules.iptInput}]"}]})],1),t("a-form-item",{attrs:{label:"职务",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["JobTitle",{rules:e.AFormImportRules.iptInput}],expression:"['JobTitle',{rules:AFormImportRules.iptInput}]"}]})],1),t("a-form-item",{attrs:{label:"通讯地址",labelCol:{span:5},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["personAddress",{rules:e.AFormImportRules.iptInput}],expression:"['personAddress',{rules:AFormImportRules.iptInput}]"}]})],1),1==e.fixed?t("div",{style:{height:"30px"}}):e._e()],2)],1),1==e.fixed?t("div",{style:{position:"absolute",bottom:"0",right:"0",width:"100%",padding:"10px 16px",borderTop:"1px solid #e8e8e8",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[t("a-button",{on:{click:e.onClose}},[e._v("取消")]),0==e.haveCom?t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit",disabled:!e.searchNext},on:{click:e.handleSubmit}},[e._v("提交")]):e._e(),1==e.haveCom?t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.addTeamWork}},[e._v("加入协同")]):e._e()],1):e._e(),0==e.fixed?t("div",{style:{width:"100%",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[t("a-button",{on:{click:e.onClose}},[e._v("取消")]),0==e.haveCom?t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit",disabled:!e.searchNext},on:{click:e.handleSubmit}},[e._v("提交")]):e._e(),1==e.haveCom?t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.addTeamWork}},[e._v("加入协同")]):e._e()],1):e._e(),t("chooseArea",{attrs:{openDrawer:e.drawer.area.show},on:{Closearea:e.areaClose,Surearea:e.areaSure}})],1)},o=[],l=(t("7f7f"),t("b775")),s=(t("c32d"),t("61f7")),i=t("1269"),n={name:"addcustomer",components:{chooseArea:i["a"]},props:{assetsdetail:{type:Object,default:""},fixed:{type:Boolean,default:!1}},data:function(){return{visible:{show:!1,id:{}},dim:{},defaultData:{Source:"10"},dataSource:[],DepList:[],Source:[],Scale:[],Nature:[],Industry:[],searchCom:{},enableeditguid:"",form:this.$form.createForm(this),AFormImportRules:{iptDate:[{required:!0,message:"请选择"}],iptInput:[{message:"请输入"}],iptInputReq:[{required:!0,message:"请输入"}],iptSelect:[{required:!1,message:"请选择"}],iptSelectReq:[{required:!0,message:"请选择"}],Mobile:[{message:"请输入手机号"},{validator:this.ConfirmMobile}],Email:[{message:"请输入邮箱"},{validator:this.ConfirmEmail}],iptInputNumber:[{required:!0,message:"请输入数字"},{validator:this.ConfirmNumber}]},drawer:{area:{show:!1}},modal:{},haveCom:!1,searchNext:!1,cityList:{}}},created:function(){this.init()},methods:{init:function(){var e=this;l["a"].post("/api/Dim/Enum/DimDecode",{Names:["City"]}).then(function(a){e.$loading.close(),0===a.code&&(e.cityList=a.data.City)}).catch(function(a){e.$loading.close(),console.log(a)}),l["a"].get("/api/Org/Department/DepsByCurUser").then(function(a){0===a.code&&(e.DepList=a.data)}).catch(function(e){console.log(e)}),l["a"].post("/api/Dim/Enum/GetEnum",{Names:["Source","Scale","Nature","Industry","ComProductLine"]}).then(function(a){0===a.code&&(e.Source=a.data.Source,e.Industry=a.data.Industry,e.Scale=a.data.Scale,e.Nature=a.data.Nature,e.dim.ComProductLine=a.data.ComProductLine)}).catch(function(e){console.log(e)})},handleSubmit:function(e){var a=this;this.form.validateFields(function(t,r){if(!t){var o={company:{ComName:r.ComName,Code:r.Code,Url:r.Url,Address:r.Address,Source:"10",Nature:r.Nature,Scale:r.Scale,Industry:r.Industry,CityCode:a.city.value},comProductLine:{ProductLine:r.ProductLine,DepId:r.DepId,Budget:r.Budget,Remarks:r.Remarkspro},comContact:{Linkman:r.Linkman,Mobile:r.Mobile,Tel:r.Tel,Email:r.Email,Department:r.Department,JobTitle:r.JobTitle,Address:r.personAddress},LeadsGuid:r.LeadsGuid};a.$loading.open(),l["a"].post("/api/Crm/Customer/Add",o).then(function(t){a.$loading.close();var r=t;r.code>0?a.$message.error(r.msg):("next"===e?(a.form.resetFields(),a.refresh&&a.refresh()):a.$emit("onClose"),a.$message.success(r.msg))}).catch(function(e){a.$loading.close(),console.log(e)})}})},ConfirmMobile:function(e,a,t){!a||Object(s["d"])(a)?t():t("手机号码不符合规则！")},ConfirmEmail:function(e,a,t){!a||Object(s["b"])(a)?t():t("邮箱不符合规则！")},ConfirmNumber:function(e,a,t){!a||Object(s["c"])(a)?t():t("请输入数字！")},onBlur:function(e){console.log(e),this.onSearch(e)},onChange:function(){this.searchNext=!1},onSearch:function(e){var a=this;e?l["a"].post("/api/Crm/Com/ExactByName",{ComName:e}).then(function(e){var t=e;t.code>0?a.$message.error(t.msg):(null==t.data.company?(a.haveCom=!1,a.searchCom={}):(a.haveCom=!0,a.searchCom=t.data.company,a.$nextTick()),a.searchNext=!0)}).catch(function(e){console.log(e)}):a.$message.error("请输入公司名称")},addTeamWork:function(e){var a=this,t=this;this.form.validateFields(function(r,o){if(!r){var s={productLine:{ProductLine:o.ProductLine,DepId:o.DepId,ComGuid:t.searchCom.ComGuid,Budget:o.Budget,Remarks:o.Remarkspro},comContact:{Linkman:o.Linkman,Mobile:o.Mobile,Tel:o.Tel,Email:o.Email,Department:o.Department,JobTitle:o.JobTitle,Address:o.personAddress},LeadsGuid:a.assetsdetail.LeadsGuid};t.$loading.open(),l["a"].post("/api/Crm/ProductLine/Add",s).then(function(a){t.$loading.close();var r=a;r.code>0?t.$message.error(r.msg):("next"===e?(t.form.resetFields(),t.refresh&&t.refresh()):(t.$emit("onClose"),t.searchCom={}),t.$message.success(r.msg))}).catch(function(e){t.$loading.close(),console.log(e)})}})},onClose:function(){this.$emit("onClose")},validtel:function(e){return Object(s["d"])(e)},chooseArea:function(){this.drawer.area={show:!0}},areaClose:function(e){this.drawer.area={show:!1}},areaSure:function(e){this.city=e,this.drawer.area={show:!1},this.form.setFieldsValue({cityname:e.name})}}},m=n,u=t("2877"),p=Object(u["a"])(m,r,o,!1,null,null,null);a["default"]=p.exports}}]);