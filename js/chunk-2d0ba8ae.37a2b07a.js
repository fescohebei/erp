(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ba8ae"],{"383f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"出库",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:700}},[a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form}},[a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:24}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("名称:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.GoodsName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("品牌:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.BrandName))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:24}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("大类:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.ClassName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("小类:")]),a("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.goodsdetail.SubclassName))])],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"部门",labelCol:{span:8},wrapperCol:{span:16}}},[[a("a-cascader",{directives:[{name:"decorator",rawName:"v-decorator",value:["DT_DepGuid",{initialValue:e.visible.goodsdetail.DT_DepGuid,rules:e.AFormImportRules.iptSelect}],expression:"['DT_DepGuid',{initialValue: visible.goodsdetail.DT_DepGuid,rules:AFormImportRules.iptSelect }]"}],attrs:{options:e.options,changeOnSelect:"",placeholder:"请选择",allowClear:!0},on:{change:e.onChange}})]],2)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"领取人",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["DT_UserGuid",{initialValue:e.visible.goodsdetail.DT_UserGuid,rules:e.AFormImportRules.iptSelect}],expression:"['DT_UserGuid',{initialValue: visible.goodsdetail.DT_UserGuid,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.ApplyUser,function(t){return a("a-select-option",{key:t.code},[e._v(e._s(t.name))])}),1)],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"领取数量",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Amount",{rules:e.AFormImportRules.Amount}],expression:"['Amount',{rules:AFormImportRules.Amount}]"}],attrs:{addonAfter:e.visible.goodsdetail.UnitName}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"库存数量",labelCol:{span:8},wrapperCol:{span:16}}},[e._v(e._s(e.visible.goodsdetail.Amount)+e._s(e.visible.goodsdetail.UnitName))])],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"批次备注",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks"],expression:"['Remarks']"}],attrs:{placeholder:"备注",rows:4}})],1)],1)],1)],1)],1),a("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},o=[],i=a("b775"),r={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,goodsdetail:{GoodsName:""}},form:this.$form.createForm(this),dim:{Departments:[]},options:[],AFormImportRules:{iptSelect:[{required:!0,message:"请选择"}],Amount:[{required:!0,message:"请输入"},{validator:this.checkAmount}]}}},watch:{show:function(e,t){var a=this;a.visible=e,e.show&&a.init()}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields()},onChange:function(e){var t=this;e?i["a"].post("/api/Org/User/UsersJsonByOneLevelDepId",{DepId:e[e.length-1]}).then(function(e){0===e.code&&(t.dim.ApplyUser=e.data,t.form.setFieldsValue({DT_UserGuid:void 0}))}).catch(function(e){console.log(e)}):(t.dim.ApplyUser=null,t.form.setFieldsValue({DT_UserGuid:void 0}))},init:function(){var e=this;i["a"].post("/api/Org/Department/TopDepsTreeJson").then(function(t){0===t.code&&(e.options=t.data)}).catch(function(e){console.log(e)})},handleSubmit:function(){var e,t=this;this.form.validateFields(function(a,s){if(!a){var o=s;e=o.DT_DepGuid[o.DT_DepGuid.length-1],o.DT_DepGuid="",o.GoodsGuid=t.visible.id,i["a"].post("/api/Supplies/Goods/SaveFormBalanceOut",{balance:o,DepId:e}).then(function(e){var a=e;a.code>0?t.$message.error(a.msg):(t.onClose(),t.$message.success(a.msg))}).catch(function(e){console.log(e)})}})},checkAmount:function(e,t,a){var s=/^[0-9]*$/;t>0&&t<=this.visible.goodsdetail.Amount&&s.test(t)?a():a("正整数且不能超过库存")}}},l=r,n=a("2877"),d=Object(n["a"])(l,s,o,!1,null,null,null);t["default"]=d.exports}}]);