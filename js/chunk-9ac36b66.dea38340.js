(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ac36b66","chunk-758ca360","chunk-2d0c4d8d"],{"0128":function(t,e,a){"use strict";var i=a("ba6e"),s=a.n(i);s.a},"3d28":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{attrs:{message:"",visible:this.visible.show,width:650,destroyOnClose:!0,closable:!1},on:{close:t.onClose}},[a("template",{slot:"title"},[t._v("审批内容详情\n  ")]),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("姓名:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.Name))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("所属部门:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.OriginatorDeptName))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("审批编号:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.BusinessId))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("主题:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.Title))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("审批结果:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.ResultStr))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("流程状态:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.StatusStr))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("发起时间:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.CreateTime))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("完成时间:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.FinishTime))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("报销类别:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.报销类别))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("确认状态:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(1==t.visible.detail.Confirmed?"已确认":"未确认"))])],1),1==t.visible.detail.Confirmed?a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("确认人:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.ConfirmName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("确认时间:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.ConfirmedTime))])],1):t._e(),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("总金额:")]),a("a-col",{attrs:{span:6}},[t._v(t._s(t.visible.detail.总金额))])],1),a("a-divider",{attrs:{orientation:"left"}},[t._v("分摊情况")]),a("a-table",{attrs:{columns:t.columns,dataSource:t.dataSource,bordered:!1,pagination:!1,size:"middle",rowKey:"部门"}})],2)},s=[],n=(a("7514"),a("ac6a"),a("b775")),r=[{title:"分摊部门",dataIndex:"部门"},{title:"金额",dataIndex:"金额"}],l={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,detail:{}},columns:r,dataSource:[]}},created:function(){var t=this;this.$watch("show",function(e,a){t.visible=e,t.visible.show&&t.init()})},methods:{init:function(){var t=this;n["a"].post("/api/Budget/Approve/ApproveDetail",{ProcessInstanceId:t.visible.detail.processInstanceId}).then(function(e){if(0===e.code){var a=new Array;e.data.forEach(function(e){t.visible.detail.Name=e.Name,t.visible.detail.OriginatorDeptName=e.OriginatorDeptName,t.visible.detail.BusinessId=e.BusinessId,t.visible.detail.Title=e.Title,t.visible.detail.ResultStr=e.ResultStr,t.visible.detail.StatusStr=e.StatusStr,t.visible.detail.CreateTime=e.CreateTime,t.visible.detail.FinishTime=e.FinishTime,t.visible.detail.ConfirmName=e.ConfirmName,t.visible.detail.ConfirmedTime=e.ConfirmedTime;var i=JSON.parse(e.FormComponentValues),s=i.find(function(t){return"报销类别"===t.Name}).Value;t.visible.detail.报销类别=s;var n=i.find(function(t){return"TableField"===t.ComponentType}).ExtValue,r=JSON.parse(n).statValue.find(function(t){return"总金额（元）"===t.label}).num;t.visible.detail.总金额=r+"元";i=JSON.parse(e.FormComponentValues);var l=i.find(function(t){return"部门分摊"===t.Name}).Value;JSON.parse(l).forEach(function(t){var e=t.rowValue.find(function(t){return"部门"===t.label}).value,i=t.rowValue.find(function(t){return"金额（元）"===t.label}).value;a.push({"部门":e,"金额":i})}),t.dataSource=a})}}).catch(function(t){console.log(t)})},onClose:function(){this.visible.show=!1,this.dataSource=[],this.refresh&&this.refresh()}}},o=l,d=a("2877"),c=Object(d["a"])(o,i,s,!1,null,null,null);e["default"]=c.exports},"98f5":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{attrs:{message:"",visible:this.visible.show,width:450,destroyOnClose:!0,closable:!1},on:{close:t.onClose}},[a("template",{slot:"title"},[t._v("执行详情")]),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[t._v("部门预算:")]),a("a-col",{attrs:{span:7}},[t._v(t._s(t.visible.detail.Amount))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[t._v("部门执行:")]),a("a-col",{attrs:{span:7}},[t._v(t._s(t.visible.detail.AmountExecute))])],1),a("a-divider",{attrs:{orientation:"left"}},[t._v("部门预算执行明细")]),a("a-table",{attrs:{columns:t.columns,dataSource:t.dataSource,bordered:!1,pagination:!1,size:"middle",rowKey:"BudgetExecuteGuid"},scopedSlots:t._u([{key:"action",fn:function(e,i){return a("a",{on:{click:function(e){return t.detail(i)}}},[t._v("详情")])}}])}),a("drawer-detail",{attrs:{show:t.drawer.detail,refresh:t.init}})],2)},s=[],n=a("b775"),r=a("c32d"),l=a.n(r),o=a("3d28"),d=[{title:"执行日期",customRender:function(t,e,a){return l()(e.ExecuteDate).format("YYYY-MM-DD")}},{title:"执行金额",dataIndex:"AmountExecute"},{title:"操作",scopedSlots:{customRender:"action"}}],c={components:{DrawerDetail:o["default"]},props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,detail:{}},columns:d,dataSource:[],drawer:{detail:{show:!1}}}},created:function(){var t=this;this.$watch("show",function(e,a){t.visible=e,t.visible.show&&t.init()})},methods:{init:function(){var t=this;n["a"].post("/api/Budget/Statement/ExecuteItemList",t.visible.detail).then(function(e){0===e.code&&(t.dataSource=e.data)}).catch(function(t){console.log(t)})},onClose:function(){this.visible.show=!1,this.dataSource=[]},detail:function(t){this.drawer.detail={show:!0,id:t.processInstanceId,detail:t}}}},u=c,p=a("2877"),h=Object(p["a"])(u,i,s,!1,null,null,null);e["default"]=h.exports},aa79:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",{attrs:{bordered:!1,"body-style":{padding:"24px"},title:t.formSearch.FiscalYear+"年度预算"}},[a("div",{staticClass:"extra-wrap",staticStyle:{"vertical-align":"middle"},attrs:{slot:"extra"},slot:"extra"},[a("a-select",{staticStyle:{width:"80px","margin-left":"10px"},attrs:{value:t.formSearch.FiscalYear},on:{change:t.FiscalYearChange}},t._l(t.dim.budgets,function(e){return a("a-select-option",{key:e.BudgetGuid,attrs:{value:e.BudgetGuid}},[t._v(t._s(e.FiscalYear))])}),1),a("a-select",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{value:t.formSearch.DepGuid},on:{change:t.DepGuidChange}},t._l(t.dim.depts,function(e){return a("a-select-option",{key:e.DepGuid,attrs:{value:e.DepGuid}},[t._v(t._s(e.Name))])}),1),a("a-select",{staticStyle:{width:"115px","margin-left":"10px"},attrs:{value:t.formSearch.IncludeChild},on:{change:t.IncludeChildChange}},[a("a-select-option",{key:1,attrs:{value:1}},[t._v("包含子部门")]),a("a-select-option",{key:0,attrs:{value:0}},[t._v("不含子部门")])],1)],1),a("a-row",[a("a-col",{attrs:{span:24}},[a("v-chart",{attrs:{"force-fit":!0,height:"251",data:t.bardata}},[a("v-tooltip"),a("v-axis"),a("v-legend"),a("v-bar",{attrs:{position:"科目*金额",color:"name",adjust:t.adjust}})],1)],1)],1)],1),a("a-row",{staticStyle:{margin:"0 -12px"}},[a("a-col",{staticStyle:{padding:"0 12px"},attrs:{span:24}},[a("a-card",{staticStyle:{"margin-top":"24px"},attrs:{bordered:!1,title:"科目预算(按科目汇总各部门)"}},[a("a-table",{attrs:{dataSource:t.tabledata,columns:t.columns,size:"small",pagination:{style:{marginBottom:0},pageSize:5},rowKey:"BSGuid"},scopedSlots:t._u([{key:"action",fn:function(e,i){return a("span",{staticStyle:{"text-align":"right"}},[a("a",{on:{click:function(e){return t.detail(i)}}},[t._v("详情")])])}}])})],1)],1)],1),a("drawer-detail-execute",{attrs:{show:t.drawer.detailexecute,refresh:t.init}})],1)},s=[],n=(a("7514"),a("b775")),r=a("98f5"),l=[{title:"科目",dataIndex:"Name"},{title:"预算",dataIndex:"Amount"},{title:"执行",dataIndex:"AmountExecute"},{title:"占比",customRender:function(t,e,a){return e.Amount>0?Math.round(e.AmountExecute/e.Amount*1e4)/100+"%":""}},{title:"操作",scopedSlots:{customRender:"action"}}],o={components:{DrawerDetailExecute:r["default"]},data:function(){return{columns:l,adjust:[{type:"dodge",marginRatio:1/32}],bardata:[],tabledata:[],dim:{budgets:[],depts:[]},formSearch:{DepGuid:"",BudgetGuid:"",IncludeChild:1,FiscalYear:""},drawer:{detailexecute:{show:!1}}}},created:function(){this.init()},methods:{init:function(){var t=this;n["a"].post("/api/Budget/My/Index").then(function(e){if(0===e.code){if(t.dim=e.data,t.dim.depts.length>0&&(t.formSearch.DepGuid=t.dim.depts[0].DepGuid,t.formSearch.BudgetGuid=t.dim.depts[0].DepGuid),t.dim.budgets.length>0){var a=(new Date).getFullYear();t.formSearch.BudgetGuid=t.dim.budgets.find(function(t){return t.FiscalYear==a}).BudgetGuid,t.formSearch.FiscalYear=a}t.DataChange()}}).catch(function(t){console.log(t)})},detail:function(t){this.drawer.detailexecute={show:!0,detail:t}},FiscalYearChange:function(t){var e=this;e.formSearch.BudgetGuid=t,e.formSearch.FiscalYear=e.dim.budgets.find(function(e){return e.BudgetGuid==t}).FiscalYear,e.DataChange()},DepGuidChange:function(t){var e=this;e.formSearch.DepGuid=t,e.DataChange()},IncludeChildChange:function(t){var e=this;e.formSearch.IncludeChild=t,e.DataChange()},DataChange:function(){var t=this;n["a"].post("/api/Budget/My/Data",t.formSearch).then(function(e){0===e.code&&(t.bardata=e.data.bar,t.tabledata=e.data.table)})}}},d=o,c=(a("0128"),a("2877")),u=Object(c["a"])(d,i,s,!1,null,"082df0d6",null);e["default"]=u.exports},ba6e:function(t,e,a){}}]);