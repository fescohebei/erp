(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a966"],{bbc3:function(e,s,t){"use strict";t.r(s);var i=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("a-drawer",{attrs:{title:"维修",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:700}},[t("a-card",{attrs:{bordered:!1}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ServiceGuid",{initialValue:e.visible.assetsservicedetail.ServiceGuid}],expression:"['ServiceGuid',{initialValue:visible.assetsservicedetail.ServiceGuid}]"}],attrs:{type:"hidden"}})],1),t("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:24}},[t("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("编号:")]),t("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.assetsservicedetail.AssetsCode))]),t("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("名称:")]),t("a-col",{attrs:{span:8}},[e._v(e._s(e.visible.assetsservicedetail.AssetsName))])],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"维修日期",labelCol:{span:8},wrapperCol:{span:16}}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["ServiceBeginDate",{initialValue:e.visible.assetsservicedetail.ServiceBeginDate,rules:e.AFormImportRules.iptDate}],expression:"['ServiceBeginDate',{initialValue: visible.assetsservicedetail.ServiceBeginDate,rules:AFormImportRules.iptDate }]"}]})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"结束日期",labelCol:{span:8},wrapperCol:{span:16}}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["ServiceEndDate",{initialValue:e.visible.assetsservicedetail.ServiceEndDate,rules:e.AFormImportRules.iptDate}],expression:"['ServiceEndDate',{initialValue: visible.assetsservicedetail.ServiceEndDate,rules:AFormImportRules.iptDate }]"}]})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"维修交接人",labelCol:{span:8},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ServiceHeir",{initialValue:e.visible.assetsservicedetail.ServiceHeir,rules:e.AFormImportRules.iptDate}],expression:"['ServiceHeir',{initialValue:visible.assetsservicedetail.ServiceHeir,rules:AFormImportRules.iptDate }]"}]})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"维修费用",labelCol:{span:8},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ServiceCost",{initialValue:e.visible.assetsservicedetail.ServiceCost,rules:e.AFormImportRules.iptDate}],expression:"['ServiceCost',{initialValue:visible.assetsservicedetail.ServiceCost,rules:AFormImportRules.iptDate }]"}],attrs:{addonAfter:"元"}})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"供应商",labelCol:{span:8},wrapperCol:{span:16}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["GYSGuid",{initialValue:e.visible.assetsservicedetail.GYSGuid,rules:e.AFormImportRules.iptSelect}],expression:"['GYSGuid',{initialValue: visible.assetsservicedetail.GYSGuid,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.GYSList,function(s){return t("a-select-option",{key:s.gysguid},[e._v(e._s(s.gysname))])}),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"维修地点",labelCol:{span:8},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ServiceAddress",{initialValue:e.visible.assetsservicedetail.ServiceAddress,rules:e.AFormImportRules.iptDate}],expression:"['ServiceAddress',{initialValue:visible.assetsservicedetail.ServiceAddress,rules:AFormImportRules.iptDate }]"}]})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"维修备注",labelCol:{span:4},wrapperCol:{span:20}}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks",{initialValue:e.visible.assetsservicedetail.Remarks}],expression:"['Remarks',{initialValue: visible.assetsservicedetail.Remarks }]"}],attrs:{placeholder:"备注",rows:4}})],1)],1)],1)],1)],1),t("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[t("a-button",{on:{click:e.onClose}},[e._v("取消")]),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},a=[],r=(t("ac6a"),t("b775")),l={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,assetsservicedetail:{AssetsCode:"",AssetsName:""}},form:this.$form.createForm(this),dim:{Departments:[]},AFormImportRules:{iptDate:[{required:!0,message:"请选择"}],iptSelect:[{required:!0,message:"请选择"}],Amount:[{required:!0,message:"请输入"},{validator:this.checkAmount}]}}},watch:{show:function(e,s){var t=this;null!=e.assetsservicedetail.ServiceBeginDate&&(e.assetsservicedetail.ServiceBeginDate=moment(e.assetsservicedetail.ServiceBeginDate)),null!=e.assetsservicedetail.ServiceEndDate&&(e.assetsservicedetail.ServiceEndDate=moment(e.assetsservicedetail.ServiceEndDate)),t.visible=e,e.show&&(null==t.visible.assetsservicedetail&&(t.visible.assetsservicedetail={AssetsCode:"",AssetsName:""}),t.init())}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields()},init:function(){var e=this;r["a"].post("/api/Supplies/Supplier/GetGYSList").then(function(s){0===s.code&&(e.dim=s.data)}).catch(function(e){console.log(e)}),r["a"].post("/api/Supplies/Assets/GetServiceInfo",{AssetsGuid:e.visible.id}).then(function(s){0===s.code&&s.count>0&&s.data.rows.forEach(function(s){e.visible.assetsservicedetail={ServiceGuid:s.ServiceGuid,AssetsGuid:s.AssetsGuid,AssetsCode:s.AssetsCode,AssetsName:s.AssetsName,ServiceBeginDate:moment(s.ServiceBeginDate),ServiceEndDate:moment(s.ServiceEndDate),ServiceHeir:s.ServiceHeir,ServiceCost:s.ServiceCost,ServiceAddress:s.ServiceAddress,Remarks:s.Remarks,GYSGuid:s.GYSGuid}})}).catch(function(e){console.log(e)})},handleSubmit:function(){var e=this;this.form.validateFields(function(s,t){if(!s){var i=t;i.AssetsGuid=e.visible.id,i.AssetsCode=e.visible.assetscode,i.AssetsName=e.visible.assetsname,r["a"].post("/api/Supplies/Assets/SaveFormService",i).then(function(s){var t=s;t.code>0?e.$message.error(t.msg):(e.onClose(),e.$message.success(t.msg))}).catch(function(e){console.log(e)})}})}}},o=l,c=t("2877"),n=Object(c["a"])(o,i,a,!1,null,null,null);s["default"]=n.exports}}]);