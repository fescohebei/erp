(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e4caa"],{9272:function(e,r,a){"use strict";a.r(r);var t=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{style:{overflow:"auto",height:"100%"}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"公司名称",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ComName",{initialValue:e.searchCom.Code,rules:e.AFormImportRules.iptInputReq}],expression:"['ComName',{initialValue:searchCom.Code,rules:AFormImportRules.iptInputReq}]"}]})],1),a("a-form-item",{attrs:{label:"组织机构代码证",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Code",{initialValue:e.searchCom.Code,rules:e.AFormImportRules.iptInput}],expression:"['Code',{initialValue:searchCom.Code,rules:AFormImportRules.iptInput}]"}]})],1),a("a-form-item",{attrs:{label:"网址",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Url",{initialValue:e.searchCom.Url,rules:e.AFormImportRules.iptInput}],expression:"['Url',{initialValue:searchCom.Url,rules:AFormImportRules.iptInput}]"}]})],1),a("a-form-item",{attrs:{label:"城市",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cityname",{rules:e.AFormImportRules.iptInputReq}],expression:"['cityname',{rules:AFormImportRules.iptInputReq}]"}],attrs:{readOnly:"",placeholder:"请输入"},on:{click:e.chooseArea}})],1),a("a-form-item",{attrs:{label:"地址",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Address",{initialValue:e.searchCom.Address,rules:e.AFormImportRules.iptInputReq}],expression:"['Address',{initialValue:searchCom.Address,rules:AFormImportRules.iptInputReq}]"}]})],1),a("a-form-item",{attrs:{label:"客户来源",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["Source",{initialValue:e.searchCom.Source,rules:e.AFormImportRules.iptSelectReq}],expression:"['Source',{initialValue:searchCom.Source,rules:AFormImportRules.iptSelectReq }]"}],attrs:{allowClear:!0}},e._l(e.Source,function(r){return a("a-select-option",{key:r.key},[e._v(e._s(r.text))])}),1)],1),a("a-form-item",{attrs:{label:"客户性质",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["Nature",{initialValue:e.searchCom.Nature,rules:e.AFormImportRules.iptSelectReq}],expression:"['Nature',{initialValue:searchCom.Nature,rules:AFormImportRules.iptSelectReq }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.Nature,function(r){return a("a-select-option",{key:r.key},[e._v(e._s(r.text))])}),1)],1),a("a-form-item",{attrs:{label:"客户规模",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["Scale",{initialValue:e.searchCom.Scale,rules:e.AFormImportRules.iptSelectReq}],expression:"['Scale',{initialValue:searchCom.Scale,rules:AFormImportRules.iptSelectReq }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.Scale,function(r){return a("a-select-option",{key:r.key},[e._v(e._s(r.text))])}),1)],1),a("a-form-item",{attrs:{label:"行业",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["Industry",{initialValue:e.searchCom.Industry,rules:e.AFormImportRules.iptSelectReq}],expression:"['Industry',{initialValue:searchCom.Industry,rules:AFormImportRules.iptSelectReq }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.Industry,function(r){return a("a-select-option",{key:r.key},[e._v(e._s(r.text))])}),1)],1),a("a-form-item",{attrs:{label:"产品线",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["ProductLine",{rules:e.AFormImportRules.iptSelectReq}],expression:"['ProductLine',{rules:AFormImportRules.iptSelectReq }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.ComProductLine,function(r){return a("a-select-option",{key:r.key},[e._v(e._s(r.text))])}),1)],1),a("a-form-item",{attrs:{label:"预算",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Budget",{rules:e.AFormImportRules.iptInputNumber}],expression:"['Budget',{rules:AFormImportRules.iptInputNumber}]"}]})],1),a("a-form-item",{attrs:{label:"备注",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarkspro"],expression:"['Remarkspro']"}],attrs:{placeholder:"备注",rows:4}})],1),a("a-form-item",{attrs:{label:"联系人姓名",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Linkman",{rules:e.AFormImportRules.iptInputReq}],expression:"['Linkman',{rules:AFormImportRules.iptInputReq}]"}]})],1),a("a-form-item",{attrs:{label:"手机号码",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Mobile",{rules:e.AFormImportRules.Mobile}],expression:"['Mobile',{rules:AFormImportRules.Mobile}]"}]})],1),a("a-form-item",{attrs:{label:"固定电话",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Tel"],expression:"['Tel']"}]})],1),a("a-form-item",{attrs:{label:"邮箱",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Email",{rules:e.AFormImportRules.Email}],expression:"['Email',{rules:AFormImportRules.Email}]"}]})],1),a("a-form-item",{attrs:{label:"所在部门",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Department",{rules:e.AFormImportRules.iptInput}],expression:"['Department',{rules:AFormImportRules.iptInput}]"}]})],1),a("a-form-item",{attrs:{label:"职务",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["JobTitle",{rules:e.AFormImportRules.iptInput}],expression:"['JobTitle',{rules:AFormImportRules.iptInput}]"}]})],1),a("a-form-item",{attrs:{label:"通讯地址",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["personAddress",{rules:e.AFormImportRules.iptInput}],expression:"['personAddress',{rules:AFormImportRules.iptInput}]"}]})],1),1==e.fixed?a("div",{style:{height:"30px"}}):e._e()],1),a("div",{style:{position:"absolute",bottom:"0",right:"0",width:"100%",padding:"10px 16px",borderTop:"1px solid #e8e8e8",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")])],1),a("chooseArea",{attrs:{openDrawer:e.drawer.area.show},on:{Closearea:e.areaClose,Surearea:e.areaSure}})],1)},o=[],l=(a("7f7f"),a("ac6a"),a("bd86")),s=a("b775"),i=(a("c32d"),a("61f7")),n=a("1269"),m={name:"addcustomer",components:{chooseArea:n["a"]},props:{assetsdetail:{type:Object,default:""},fixed:{type:Boolean,default:!1}},data:function(){return{visible:{show:!1,id:{}},dim:{},defaultData:{Source:"10"},dataSource:[],DepList:[],Source:[],Scale:[],Nature:[],Industry:[],searchCom:{},enableeditguid:"",form:this.$form.createForm(this),AFormImportRules:{iptDate:[{required:!0,message:"请选择"}],iptInput:[Object(l["a"])({message:"请输入"},"message","请输入")],iptInputReq:[{required:!0,message:"请输入"}],iptSelect:[{required:!1,message:"请选择"}],iptSelectReq:[{required:!0,message:"请选择"}],Mobile:[{message:"请输入手机号"},{validator:this.ConfirmMobile}],Email:[{message:"请输入邮箱"},{validator:this.ConfirmEmail}],iptInputNumber:[{required:!0,message:"请输入数字"},{validator:this.ConfirmNumber}]},drawer:{area:{show:!1}},modal:{},haveCom:!1,searchNext:!1,options:[],city:{}}},created:function(){this.init()},methods:{init:function(){var e=this;s["a"].get("/api/Org/Department/DepsByCurUser").then(function(r){0===r.code&&(e.DepList=r.data)}).catch(function(e){console.log(e)}),s["a"].post("/api/Dim/Enum/GetEnum",{Names:["Source","Scale","Nature","Industry","ComProductLine"]}).then(function(r){0===r.code&&(e.Source=r.data.Source,e.Industry=r.data.Industry,e.Scale=r.data.Scale,e.Nature=r.data.Nature,e.dim.ComProductLine=r.data.ComProductLine)}).catch(function(e){console.log(e)}),s["a"].post("/api/Dim/Enum/GetDim",{Names:["Province"]}).then(function(r){0===r.code&&r.data.Province.forEach(function(r,a){var t={};t.value=r.code,t.label=r.name,t.isLeaf=!1,e.options.push(t)})}).catch(function(e){console.log(e)})},handleSubmit:function(e){var r=this;this.form.validateFields(function(a,t){if(!a){var o={company:{ComName:t.ComName,Code:t.Code,Url:t.Url,Address:t.Address,Source:t.Source,Nature:t.Nature,Scale:t.Scale,Industry:t.Industry,CityCode:r.city.value},comProductLine:{ProductLine:t.ProductLine,DepId:t.DepId,Budget:t.Budget,Remarks:t.Remarkspro},comContact:{Linkman:t.Linkman,Mobile:t.Mobile,Tel:t.Tel,Email:t.Email,Department:t.Department,JobTitle:t.JobTitle,Address:t.personAddress},LeadsGuid:t.LeadsGuid};r.$loading.open(),s["a"].post("/api/Crm/Customer/Add",o).then(function(a){r.$loading.close();var t=a;t.code>0?r.$message.error(t.msg):("next"===e?(r.form.resetFields(),r.refresh&&r.refresh()):(r.$emit("onClose"),r.form.resetFields()),r.$message.success(t.msg))}).catch(function(e){r.$loading.close(),console.log(e)})}})},ConfirmMobile:function(e,r,a){!r||Object(i["d"])(r)?a():a("手机号码不符合规则！")},ConfirmEmail:function(e,r,a){!r||Object(i["b"])(r)?a():a("邮箱不符合规则！")},ConfirmNumber:function(e,r,a){!r||Object(i["c"])(r)?a():a("请输入数字！")},onClose:function(){this.$emit("onClose"),this.form.resetFields()},chooseArea:function(){this.drawer.area={show:!0}},areaClose:function(e){this.drawer.area={show:!1}},areaSure:function(e){this.city=e,this.drawer.area={show:!1},this.form.setFieldsValue({cityname:e.name})}}},u=m,p=a("2877"),c=Object(p["a"])(u,t,o,!1,null,null,null);r["default"]=c.exports}}]);