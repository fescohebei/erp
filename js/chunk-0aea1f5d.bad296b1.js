(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0aea1f5d","chunk-2f0de6f0","chunk-9a8a5dd0","chunk-2d0aef64"],{"01a7":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"新建",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:400}},[a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"姓名",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["PName",{rules:e.AFormImportRules.iptInput}],expression:"['PName',{rules:AFormImportRules.iptInput}]"}]})],1),a("a-form-item",{attrs:{label:"身份证号",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["CardID",{rules:e.AFormImportRules.IDCard}],expression:"['CardID',{rules:AFormImportRules.IDCard}]"}]})],1),a("a-form-item",{attrs:{label:"手机号",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Mobile",{rules:e.AFormImportRules.Mobile}],expression:"['Mobile',{rules:AFormImportRules.Mobile}]"}]})],1),a("a-form-item",{attrs:{label:"意向业务",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["PersonLeadsType",{rules:e.AFormImportRules.iptSelect}],expression:"['PersonLeadsType',{rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},[a("a-select-option",{key:"1"},[e._v("灵活就业")])],1)],1)],1)],1),a("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")]),null==e.visible.id?a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handleSubmit("next")}}},[e._v("提交并继续录入")]):e._e()],1)],1)},n=[],o=a("b775"),s=a("61f7"),i={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,assetsdetail:{AssetsCode:""}},dim:{Brand:[]},form:this.$form.createForm(this),AFormImportRules:{iptDate:[{required:!0,message:"请选择"}],iptInput:[{required:!0,message:"请输入"}],iptSelect:[{required:!0,message:"请选择"}],IDCard:[{required:!0,message:"请输入身份证号"},{validator:this.ConfirmIDCard}],Mobile:[{required:!0,message:"请输入手机号"},{validator:this.ConfirmMobile}]}}},watch:{show:function(e,t){var a=this;null==a.visible.assetsdetail&&(a.visible.assetsdetail={AssetsCode:""}),null!=e.assetsdetail.PurchaseDate&&(e.assetsdetail.PurchaseDate=moment(e.assetsdetail.PurchaseDate)),a.visible=e,e.show&&a.init()}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields()},init:function(){var e=this;o["a"].post("/api/Supplies/Assets/FormNewAssets",{ClassID:e.visible.assetsdetail.ClassID}).then(function(t){0===t.code&&(e.dim=t.data)}).catch(function(e){console.log(e)})},handleSubmit:function(e){var t=this;this.form.validateFields(function(a,r){if(!a){var n=r;n.AssetsGuid=t.visible.id,o["a"].post("/api/Leads/Person/SaveLeadsPerson",n).then(function(a){var r=a;r.code>0?t.$message.error(r.msg):("next"===e?(t.form.resetFields(),t.refresh&&t.refresh()):t.onClose(),t.$message.success(r.msg))}).catch(function(e){console.log(e)})}})},onClassChange:function(e){var t=this;e?o["a"].post("/api/Dim/Class/Subclass",{ClassID:e,Type:2}).then(function(e){0===e.code&&(t.dim.SubClass=e.data,t.form.setFieldsValue({SubclassID:void 0}))}).catch(function(e){console.log(e)}):t.form.setFieldsValue({SubclassID:void 0})},ConfirmIDCard:function(e,t,a){!t||Object(s["a"])(t)?a():a("身份证号不符合规则！")},ConfirmMobile:function(e,t,a){!t||Object(s["d"])(t)?a():a("手机号码不符合规则！")}}},l=i,c=a("2877"),u=Object(c["a"])(l,r,n,!1,null,null,null);t["default"]=u.exports},"02f4":function(e,t,a){var r=a("4588"),n=a("be13");e.exports=function(e){return function(t,a){var o,s,i=String(n(t)),l=r(a),c=i.length;return l<0||l>=c?e?"":void 0:(o=i.charCodeAt(l),o<55296||o>56319||l+1===c||(s=i.charCodeAt(l+1))<56320||s>57343?e?i.charAt(l):o:e?i.slice(l,l+2):s-56320+(o-55296<<10)+65536)}}},"0390":function(e,t,a){"use strict";var r=a("02f4")(!0);e.exports=function(e,t,a){return t+(a?r(e,t).length:1)}},"0bfb":function(e,t,a){"use strict";var r=a("cb7c");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"214f":function(e,t,a){"use strict";a("b0c5");var r=a("2aba"),n=a("32e9"),o=a("79e5"),s=a("be13"),i=a("2b4c"),l=a("520a"),c=i("species"),u=!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();e.exports=function(e,t,a){var f=i(e),p=!o(function(){var t={};return t[f]=function(){return 7},7!=""[e](t)}),h=p?!o(function(){var t=!1,a=/a/;return a.exec=function(){return t=!0,null},"split"===e&&(a.constructor={},a.constructor[c]=function(){return a}),a[f](""),!t}):void 0;if(!p||!h||"replace"===e&&!u||"split"===e&&!d){var m=/./[f],v=a(s,f,""[e],function(e,t,a,r,n){return t.exec===l?p&&!n?{done:!0,value:m.call(t,a,r)}:{done:!0,value:e.call(a,t,r)}:{done:!1}}),b=v[0],g=v[1];r(String.prototype,e,b),n(RegExp.prototype,f,2==t?function(e,t){return g.call(e,this,t)}:function(e){return g.call(e,this)})}}},"28a5":function(e,t,a){"use strict";var r=a("aae3"),n=a("cb7c"),o=a("ebd6"),s=a("0390"),i=a("9def"),l=a("5f1b"),c=a("520a"),u=a("79e5"),d=Math.min,f=[].push,p="split",h="length",m="lastIndex",v=4294967295,b=!u(function(){RegExp(v,"y")});a("214f")("split",2,function(e,t,a,u){var g;return g="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[h]||2!="ab"[p](/(?:ab)*/)[h]||4!="."[p](/(.?)(.?)/)[h]||"."[p](/()()/)[h]>1||""[p](/.?/)[h]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!r(e))return a.call(n,e,t);var o,s,i,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,p=void 0===t?v:t>>>0,b=new RegExp(e.source,u+"g");while(o=c.call(b,n)){if(s=b[m],s>d&&(l.push(n.slice(d,o.index)),o[h]>1&&o.index<n[h]&&f.apply(l,o.slice(1)),i=o[0][h],d=s,l[h]>=p))break;b[m]===o.index&&b[m]++}return d===n[h]?!i&&b.test("")||l.push(""):l.push(n.slice(d)),l[h]>p?l.slice(0,p):l}:"0"[p](void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,r){var n=e(this),o=void 0==a?void 0:a[t];return void 0!==o?o.call(a,n,r):g.call(String(n),a,r)},function(e,t){var r=u(g,e,this,t,g!==a);if(r.done)return r.value;var c=n(e),f=String(this),p=o(c,RegExp),h=c.unicode,m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(b?"y":"g"),x=new p(b?c:"^(?:"+c.source+")",m),w=void 0===t?v:t>>>0;if(0===w)return[];if(0===f.length)return null===l(x,f)?[f]:[];var C=0,S=0,y=[];while(S<f.length){x.lastIndex=b?S:0;var I,D=l(x,b?f:f.slice(S));if(null===D||(I=d(i(x.lastIndex+(b?0:S)),f.length))===C)S=s(f,S,h);else{if(y.push(f.slice(C,S)),y.length===w)return y;for(var k=1;k<=D.length-1;k++)if(y.push(D[k]),y.length===w)return y;S=C=I}}return y.push(f.slice(C)),y}]})},"4c27":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"上传成单数据",visible:this.visible.show,width:400,destroyOnClose:!0},on:{close:e.onClose}},[a("a-spin",{attrs:{tip:"上传中",spinning:e.spinning}},[a("a-upload-dragger",{attrs:{name:"file",multiple:!1,action:"/api/Leads/Person/UploadFile",accept:".xls, .xlsx",showUploadList:!1,withCredentials:!0,beforeUpload:e.uploadbefore},on:{change:e.uploadchange}},[a("p",{staticClass:"ant-upload-drag-icon"},[a("a-icon",{attrs:{type:"inbox"}})],1),a("p",{staticClass:"ant-upload-text"},[e._v("\n            将文件拖到此处，或\n            "),a("a-tag",{attrs:{color:"#2db7f5"}},[e._v("点击上传")])],1),a("p",{staticClass:"ant-upload-hint"},[e._v("只能上传xls/xlsx文件")])])],1),a("a-card",{staticClass:"markdown",attrs:{title:"注意事项"}},[a("ul",[a("li",[a("a",{attrs:{target:"_blank",href:"/template/灵活就业成单明细模板.xlsx"}},[e._v("下载《灵活就业成单明细模板》")])]),a("li",[e._v("列顺序可调整，表格必须包含标黄列")]),a("li",[e._v("数据必须放在第一个Sheet表")])])])],1)},n=[],o={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{spinning:!1,visible:{show:!1}}},created:function(){var e=this;this.$watch("show",function(t,a){e.visible=t,e.spinning=!1})},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh()},uploadbefore:function(e){this.spinning=!0},uploadchange:function(e){var t=e.file;e.fileList,e.event;if("done"==t.status){var a=t.response;a.code>0?(this.$message.error(a.msg),a.data&&(this.errdatarows=a.data)):(this.$message.success("导入成功"),this.onClose())}this.spinning=!1}}},s=o,i=(a("b4a9"),a("2877")),l=Object(i["a"])(s,r,n,!1,null,null,null);t["default"]=l.exports},"4c8b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-layout",[a("a-layout-content",[a("a-card",{attrs:{bordered:!1}},[a("div",[a("a-form",{attrs:{layout:"horizontal"}},[a("div",{class:e.advanced?null:"fold"},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:6}},[a("a-form-item",{attrs:{label:"姓名",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-input",{attrs:{placeholder:"请输入"},model:{value:e.formSearch.PName,callback:function(t){e.$set(e.formSearch,"PName",t)},expression:"formSearch.PName"}})],1)],1),a("a-col",{attrs:{md:6}},[a("a-form-item",{attrs:{label:"身份证号",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-input",{attrs:{placeholder:"请输入"},model:{value:e.formSearch.CardID,callback:function(t){e.$set(e.formSearch,"CardID",t)},expression:"formSearch.CardID"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:e.init}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.edit({key:null})}}},[e._v("添加")]),e.roles.indexOf(98)>=0?a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.btnUpload}},[e._v("导入成单")]):e._e(),e.roles.indexOf(1)>=0?a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.btnExport}},[e._v("导出业绩")]):e._e()],1)],1)],1)],1)])],1),a("a-table",{attrs:{columns:e.columns,dataSource:e.dataSource,pagination:!1,rowKey:"PLGUID"}},[a("template",{slot:"footer"},[a("a-pagination",{staticStyle:{float:"right"},attrs:{defaultCurrent:1,pageSize:e.formSearch.pageSize,total:e.formSearch.total,current:e.formSearch.current},on:{change:e.pagechange}})],1)],2)],1)],1),a("drawer-edit",{attrs:{show:e.drawer.edit,refresh:e.init}}),a("drawer-upload",{attrs:{show:e.drawer.upload,refresh:e.init}})],1)},n=[],o=(a("ac6a"),a("b775")),s=a("01a7"),i=a("4c27"),l=[{title:"姓名",dataIndex:"PName"},{title:"身份证号",dataIndex:"CardID"},{title:"意向业务",dataIndex:"PersonLeadsTypeText"},{title:"状态",dataIndex:"LeadsStatusText"},{title:"归属人",dataIndex:"userName"},{title:"提交日期",dataIndex:"SubmitDate"},{title:"合作日期",dataIndex:"CooperateDate"}],c={components:{DrawerEdit:s["default"],DrawerUpload:i["default"]},data:function(){return{advanced:!0,columns:l,formSearch:{pageSize:10,current:1,total:0},dataSource:[],roles:[],drawer:{edit:{show:!1},upload:{show:!1}},modal:{exporttransfer:{show:!1}}}},mounted:function(){var e=this;e.init()},methods:{init:function(){this.pagechange(1)},pagechange:function(e){var t=this;t.formSearch.current=e,t.$loading.open(),o["a"].post("/api/Leads/Person/ListData",t.formSearch).then(function(e){t.$loading.close(),0===e.code&&(e.data.rows.forEach(function(e){e.CooperateDate=moment(e.CooperateDate).format("YYYY-MM-DD")}),t.dataSource=e.data.rows,t.roles=e.data.role,t.formSearch.total=e.count)}).catch(function(e){t.$loading.close(),console.log(e)})},edit:function(e){this.drawer.edit={show:!0,id:e.AssetsGuid,assetsdetail:e}},btnExport:function(){var e=document.createElement("a");e.href="/api/Leads/Person/ExportCooperate",e.target="_blank",e.click()},btnUpload:function(){this.drawer.upload={show:!0}},exportbalanceout:function(){this.modal.exporttransfer={show:!0}}}},u=c,d=(a("8928"),a("2877")),f=Object(d["a"])(u,r,n,!1,null,null,null);t["default"]=f.exports},"520a":function(e,t,a){"use strict";var r=a("0bfb"),n=RegExp.prototype.exec,o=String.prototype.replace,s=n,i="lastIndex",l=function(){var e=/a/,t=/b*/g;return n.call(e,"a"),n.call(t,"a"),0!==e[i]||0!==t[i]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(s=function(e){var t,a,s,u,d=this;return c&&(a=new RegExp("^"+d.source+"$(?!\\s)",r.call(d))),l&&(t=d[i]),s=n.call(d,e),l&&s&&(d[i]=d.global?s.index+s[0].length:t),c&&s&&s.length>1&&o.call(s[0],a,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)}),s}),e.exports=s},"5f1b":function(e,t,a){"use strict";var r=a("23c6"),n=RegExp.prototype.exec;e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var o=a.call(e,t);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},"61f7":function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"a",function(){return n}),a.d(t,"d",function(){return o}),a.d(t,"c",function(){return s});a("28a5");function r(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function n(e){var t=!0;if((t&&!e||!/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(e))&&(t=!1),t&&18==e.length){for(var a=e.split(""),r=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=[1,0,"X",9,8,7,6,5,4,3,2],o=0,s=0,i=0,l=0;l<17;l++)s=a[l],i=r[l],o+=s*i;n[o%11]!=a[17]&&(t=!1)}return t}function o(e){var t=/^1[3|4|5|6|7|8|9][0-9]\d{8}$/;return t.test(e)}function s(e){var t=/^(([1-9][0-9]*\.[0-9][0-9]*)|([0]\.[0-9][0-9]*)|([1-9][0-9]*)|([0]{1}))$/;return t.test(e)}},8928:function(e,t,a){"use strict";var r=a("f99f"),n=a.n(r);n.a},"95e6":function(e,t,a){},aae3:function(e,t,a){var r=a("d3f4"),n=a("2d95"),o=a("2b4c")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==n(e))}},b0c5:function(e,t,a){"use strict";var r=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},b4a9:function(e,t,a){"use strict";var r=a("95e6"),n=a.n(r);n.a},f99f:function(e,t,a){}}]);