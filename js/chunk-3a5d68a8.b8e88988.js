(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a5d68a8"],{"0bfb":function(e,t,a){"use strict";var i=a("cb7c");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"2b47":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"更名申请",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:450}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"公司id",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ComGuid",{initialValue:e.visible.assetsdetail.ComGuid,rules:e.AFormImportRules.iptInput}],expression:"['ComGuid',{initialValue:visible.assetsdetail.ComGuid,rules:AFormImportRules.iptInput}]"}],attrs:{disabled:!0}})],1),a("a-form-item",{attrs:{label:"客户新名称",labelCol:{span:6},wrapperCol:{span:15}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ComNameNew",{initialValue:e.visible.assetsdetail.ComName,rules:e.AFormImportRules.iptInputReq}],expression:"['ComNameNew',{initialValue:visible.assetsdetail.ComName,rules:AFormImportRules.iptInputReq}]"}]})],1),a("a-form-item",{attrs:{label:"情况说明",labelCol:{span:6},wrapperCol:{span:15}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks"],expression:"['Remarks']"}],attrs:{placeholder:"情况说明",rows:4}})],1),a("a-form-item",{attrs:{label:"证明附件",labelCol:{span:6},wrapperCol:{span:15}}},[a("a-button",{attrs:{disabled:1==e.notInDingTalk&&"disabled"},on:{click:e.uploadFile}},[a("a-icon",{attrs:{type:"upload"}}),e._v(" 上传附件")],1),1==e.notInDingTalk?a("div",[a("a-tag",{attrs:{color:"red"}},[e._v("此浏览器不支持上传，请到钉钉应用界面上传附件！")])],1):e._e(),0==e.notInDingTalk?e._l(e.uploadArry,function(t){return a("div",{key:t.fileId},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" "+e._s(t.fileName)+" "),a("a-icon",{staticStyle:{cursor:"pointer",color:"#1890ff"},attrs:{type:"delete"},on:{click:function(a){return e.deleteFile(t.fileId)}}}),e._v("  "),a("a-icon",{staticStyle:{cursor:"pointer",color:"#1890ff"},attrs:{type:"file-search"},on:{click:function(a){return e.preview(t)}}})],1)}):e._e()],2)],1),a("a-row",{staticStyle:{padding:"10px 0"},attrs:{gutter:24}}),a("div",{style:{position:"absolute",bottom:"0",right:"0",width:"100%",padding:"10px 16px",borderTop:"1px solid #e8e8e8",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},o=[],s=(a("ac6a"),a("6b54"),a("b775")),r={components:{},props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,assetsdetail:{}},form:this.$form.createForm(this),AFormImportRules:{iptInputReq:[{required:!0,message:"请输入"}]},notInDingTalk:!1,SpaceId:"",uploadArry:[]}},watch:{show:function(e,t){var a=this;a.visible=e,null==a.visible.assetsdetail&&(a.visible.assetsdetail={ComGuid:""}),e.show&&a.init()}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.uploadArry=[],this.form.resetFields()},init:function(){var e=this;s["a"].get("/api/DingTalk/CspaceInfo").then(function(t){var a=t,i=a.data.SpaceId;0===a.code&&(e.SpaceId=i)}).catch(function(e){console.log(e)}),s["a"].post("/api/DingTalk/GetSign",{}).then(function(t){e.fescoMessage=t.data,dd.config({agentId:t.data.AgentId,corpId:t.data.corpId,timeStamp:t.data.timeStamp,nonceStr:t.data.nonceStr,signature:t.data.signature,type:0,jsApiList:["biz.cspace.saveFile","biz.util.uploadAttachment","biz.cspace.preview","biz.cspace.chooseSpaceDir"]})}).catch(function(e){console.log(e)}),"notInDingTalk"==dd.env.platform&&(e.notInDingTalk=!0)},handleSubmit:function(e){var t=this;this.form.validateFields(function(e,a){if(!e){if(0==t.uploadArry.length)return void t.$message.error("证明附件不能为空！");var i={ComGuid:a.ComGuid,ComNameNew:a.ComNameNew,FormalAttachment:t.uploadArry,Remarks:a.Remarks};t.$loading.open(),s["a"].post("/api/Crm/Com/Rename",i).then(function(e){t.$loading.close();var a=e;a.code>0?t.$message.error(a.msg):(t.onClose(),t.$message.success(a.msg))}).catch(function(e){t.$loading.close(),console.log(e)})}})},uploadFile:function(){var e=this;dd.ready(function(){dd.biz.util.uploadAttachment({image:{multiple:!0,compress:!1,max:9,spaceId:e.SpaceId.toString()},space:{corpId:e.fescoMessage.corpId,spaceId:e.SpaceId.toString(),max:9},file:{spaceId:e.SpaceId.toString(),max:9},types:["file"],onSuccess:function(t){e.uploadArry=e.uploadArry.concat(t.data)},onFail:function(e){}})})},preview:function(e){var t=this;dd.ready(function(){dd.biz.cspace.preview({corpId:t.fescoMessage.corpId,spaceId:t.SpaceId.toString(),fileId:e.fileId,fileName:e.fileName,fileSize:e.fileSize,fileType:e.fileType,onSuccess:function(){},onFail:function(e){}})})},deleteFile:function(e){var t=this;this.uploadArry.forEach(function(a,i){a.fileId===e&&t.uploadArry.splice(i,1)})}}},n=r,l=a("2877"),c=Object(l["a"])(n,i,o,!1,null,null,null);t["default"]=c.exports},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(e,t,a){"use strict";a("3846");var i=a("cb7c"),o=a("0bfb"),s=a("9e1e"),r="toString",n=/./[r],l=function(e){a("2aba")(RegExp.prototype,r,e,!0)};a("79e5")(function(){return"/a/b"!=n.call({source:"a",flags:"b"})})?l(function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!s&&e instanceof RegExp?o.call(e):void 0)}):n.name!=r&&l(function(){return n.call(this)})}}]);