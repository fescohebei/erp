(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e5e3c2f2","chunk-b40dad8a","chunk-6574e546"],{"02f4":function(e,t,n){var a=n("4588"),o=n("be13");e.exports=function(e){return function(t,n){var r,i,s=String(o(t)),l=a(n),c=s.length;return l<0||l>=c?e?"":void 0:(r=s.charCodeAt(l),r<55296||r>56319||l+1===c||(i=s.charCodeAt(l+1))<56320||i>57343?e?s.charAt(l):r:e?s.slice(l,l+2):i-56320+(r-55296<<10)+65536)}}},"0390":function(e,t,n){"use strict";var a=n("02f4")(!0);e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},"0bfb":function(e,t,n){"use strict";var a=n("cb7c");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"1af6":function(e,t,n){var a=n("63b6");a(a.S,"Array",{isArray:n("9003")})},"214f":function(e,t,n){"use strict";n("b0c5");var a=n("2aba"),o=n("32e9"),r=n("79e5"),i=n("be13"),s=n("2b4c"),l=n("520a"),c=s("species"),p=!r(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),u=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=s(e),d=!r(function(){var t={};return t[f]=function(){return 7},7!=""[e](t)}),h=d?!r(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[f](""),!t}):void 0;if(!d||!h||"replace"===e&&!p||"split"===e&&!u){var m=/./[f],v=n(i,f,""[e],function(e,t,n,a,o){return t.exec===l?d&&!o?{done:!0,value:m.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}}),b=v[0],g=v[1];a(String.prototype,e,b),o(RegExp.prototype,f,2==t?function(e,t){return g.call(e,this,t)}:function(e){return g.call(e,this)})}}},"28a5":function(e,t,n){"use strict";var a=n("aae3"),o=n("cb7c"),r=n("ebd6"),i=n("0390"),s=n("9def"),l=n("5f1b"),c=n("520a"),p=n("79e5"),u=Math.min,f=[].push,d="split",h="length",m="lastIndex",v=4294967295,b=!p(function(){RegExp(v,"y")});n("214f")("split",2,function(e,t,n,p){var g;return g="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[h]||2!="ab"[d](/(?:ab)*/)[h]||4!="."[d](/(.?)(.?)/)[h]||"."[d](/()()/)[h]>1||""[d](/.?/)[h]?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!a(e))return n.call(o,e,t);var r,i,s,l=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,d=void 0===t?v:t>>>0,b=new RegExp(e.source,p+"g");while(r=c.call(b,o)){if(i=b[m],i>u&&(l.push(o.slice(u,r.index)),r[h]>1&&r.index<o[h]&&f.apply(l,r.slice(1)),s=r[0][h],u=i,l[h]>=d))break;b[m]===r.index&&b[m]++}return u===o[h]?!s&&b.test("")||l.push(""):l.push(o.slice(u)),l[h]>d?l.slice(0,d):l}:"0"[d](void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,a){var o=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,o,a):g.call(String(o),n,a)},function(e,t){var a=p(g,e,this,t,g!==n);if(a.done)return a.value;var c=o(e),f=String(this),d=r(c,RegExp),h=c.unicode,m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(b?"y":"g"),y=new d(b?c:"^(?:"+c.source+")",m),I=void 0===t?v:t>>>0;if(0===I)return[];if(0===f.length)return null===l(y,f)?[f]:[];var x=0,C=0,A=[];while(C<f.length){y.lastIndex=b?C:0;var w,S=l(y,b?f:f.slice(C));if(null===S||(w=u(s(y.lastIndex+(b?0:C)),f.length))===x)C=i(f,C,h);else{if(A.push(f.slice(x,C)),A.length===I)return A;for(var _=1;_<=S.length-1;_++)if(A.push(S[_]),A.length===I)return A;C=x=w}}return A.push(f.slice(x)),A}]})},3846:function(e,t,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"520a":function(e,t,n){"use strict";var a=n("0bfb"),o=RegExp.prototype.exec,r=String.prototype.replace,i=o,s="lastIndex",l=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e[s]||0!==t[s]}(),c=void 0!==/()??/.exec("")[1],p=l||c;p&&(i=function(e){var t,n,i,p,u=this;return c&&(n=new RegExp("^"+u.source+"$(?!\\s)",a.call(u))),l&&(t=u[s]),i=o.call(u,e),l&&i&&(u[s]=u.global?i.index+i[0].length:t),c&&i&&i.length>1&&r.call(i[0],n,function(){for(p=1;p<arguments.length-2;p++)void 0===arguments[p]&&(i[p]=void 0)}),i}),e.exports=i},"5dbc":function(e,t,n){var a=n("d3f4"),o=n("8b97").set;e.exports=function(e,t,n){var r,i=t.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&a(r)&&o&&o(e,r),e}},"5f1b":function(e,t,n){"use strict";var a=n("23c6"),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var r=n.call(e,t);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==a(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},"61f7":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return i});n("28a5");function a(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function o(e){var t=!0;if((t&&!e||!/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(e))&&(t=!1),t&&18==e.length){for(var n=e.split(""),a=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],o=[1,0,"X",9,8,7,6,5,4,3,2],r=0,i=0,s=0,l=0;l<17;l++)i=n[l],s=a[l],r+=i*s;o[r%11]!=n[17]&&(t=!1)}return t}function r(e){var t=/^1[3|4|5|6|7|8|9][0-9]\d{8}$/;return t.test(e)}function i(e){var t=/^(([1-9][0-9]*\.[0-9][0-9]*)|([0]\.[0-9][0-9]*)|([1-9][0-9]*)|([0]{1}))$/;return t.test(e)}},"6b54":function(e,t,n){"use strict";n("3846");var a=n("cb7c"),o=n("0bfb"),r=n("9e1e"),i="toString",s=/./[i],l=function(e){n("2aba")(RegExp.prototype,i,e,!0)};n("79e5")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?l(function(){var e=a(this);return"/".concat(e.source,"/","flags"in e?e.flags:!r&&e instanceof RegExp?o.call(e):void 0)}):s.name!=i&&l(function(){return s.call(this)})},"75fc":function(e,t,n){"use strict";var a=n("a745"),o=n.n(a);function r(e){if(o()(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var i=n("774e"),s=n.n(i),l=n("c8bb"),c=n.n(l);function p(e){if(c()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return s()(e)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(e){return r(e)||p(e)||u()}n.d(t,"a",function(){return f})},"774e":function(e,t,n){e.exports=n("d2d5")},"8b97":function(e,t,n){var a=n("d3f4"),o=n("cb7c"),r=function(e,t){if(o(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{a=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),a(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,n){return r(e,n),t?e.__proto__=n:a(e,n),e}}({},!1):void 0),check:r}},a745:function(e,t,n){e.exports=n("f410")},aa77:function(e,t,n){var a=n("5ca1"),o=n("be13"),r=n("79e5"),i=n("fdef"),s="["+i+"]",l="​",c=RegExp("^"+s+s+"*"),p=RegExp(s+s+"*$"),u=function(e,t,n){var o={},s=r(function(){return!!i[e]()||l[e]()!=l}),c=o[e]=s?t(f):i[e];n&&(o[n]=c),a(a.P+a.F*s,"String",o)},f=u.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(p,"")),e};e.exports=u},aae3:function(e,t,n){var a=n("d3f4"),o=n("2d95"),r=n("2b4c")("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==o(e))}},b0c5:function(e,t,n){"use strict";var a=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:a!==/./.exec},{exec:a})},c5f6:function(e,t,n){"use strict";var a=n("7726"),o=n("69a8"),r=n("2d95"),i=n("5dbc"),s=n("6a99"),l=n("79e5"),c=n("9093").f,p=n("11e9").f,u=n("86cc").f,f=n("aa77").trim,d="Number",h=a[d],m=h,v=h.prototype,b=r(n("2aeb")(v))==d,g="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():f(t,3);var n,a,o,r=t.charCodeAt(0);if(43===r||45===r){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+t}for(var i,l=t.slice(2),c=0,p=l.length;c<p;c++)if(i=l.charCodeAt(c),i<48||i>o)return NaN;return parseInt(l,a)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(b?l(function(){v.valueOf.call(n)}):r(n)!=d)?i(new m(y(t)),n,h):y(t)};for(var I,x=n("9e1e")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;x.length>C;C++)o(m,I=x[C])&&!o(h,I)&&u(h,I,p(m,I));h.prototype=v,v.constructor=h,n("2aba")(a,d,h)}},c8bb:function(e,t,n){e.exports=n("54a1")},e21c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-drawer",{attrs:{title:"开票申请",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:550}},[n("a-card",{attrs:{bordered:!1}},[n("a-form",{attrs:{form:e.form}},[n("a-form-item",{attrs:{label:"客户名称",labelCol:{span:8},wrapperCol:{span:16}}},[e._v("\n        "+e._s(e.visible.assetsdetail.ComName?e.visible.assetsdetail.ComName:e.visible.assetsdetail.Title)+"\n      ")]),n("a-form-item",{attrs:{label:"产品线",labelCol:{span:8},wrapperCol:{span:16}}},["reapply"==e.visible.type||"modify"==e.visible.type?[e._v("\n          "+e._s(e.ComProductLine[e.visible.assetsdetail.ProductLine])+"\n        ")]:[e._v("\n          "+e._s(e.visible.assetsdetail.ProductLineText)+"\n        ")]],2),n("a-form-item",{attrs:{label:"所属月份",labelCol:{span:8},wrapperCol:{span:16}}},[n("a-month-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["所属月份",{initialValue:e.moment(e.redetail.month,"YYYY-MM"),rules:e.AFormImportRules.iptInputReq}],expression:"['所属月份',{initialValue:moment(redetail.month, 'YYYY-MM'),rules:AFormImportRules.iptInputReq}]"}],staticStyle:{width:"100%"},attrs:{format:"YYYYMM"}})],1),n("a-form-item",{attrs:{label:"发票种类",labelCol:{span:8},wrapperCol:{span:16}}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["发票种类",{initialValue:e.redetail.invtype,rules:e.AFormImportRules.iptSelectReq}],expression:"['发票种类',{initialValue:redetail.invtype,rules:AFormImportRules.iptSelectReq }]"}],attrs:{placeholder:"请选择",allowClear:!0}},[n("a-select-option",{attrs:{value:"增值税专票"}},[e._v("增值税专票")]),n("a-select-option",{attrs:{value:"普票"}},[e._v("普票")])],1)],1),n("a-form-item",{attrs:{label:"服务费",labelCol:{span:8},wrapperCol:{span:16}}},[n("a-input-number",{staticStyle:{width:"100%"},attrs:{min:.01},on:{change:e.costChange},model:{value:e.cost.fwf,callback:function(t){e.$set(e.cost,"fwf",t)},expression:"cost.fwf"}})],1),n("a-form-item",{attrs:{label:"社保合计",labelCol:{span:8},wrapperCol:{span:16}}},[n("a-input-number",{staticStyle:{width:"100%"},attrs:{min:.01},on:{change:e.costChange},model:{value:e.cost.shebao,callback:function(t){e.$set(e.cost,"shebao",t)},expression:"cost.shebao"}})],1),n("a-form-item",{attrs:{label:"公积金",labelCol:{span:8},wrapperCol:{span:16}}},[n("a-input-number",{staticStyle:{width:"100%"},attrs:{min:.01},on:{change:e.costChange},model:{value:e.cost.gjj,callback:function(t){e.$set(e.cost,"gjj",t)},expression:"cost.gjj"}})],1),n("a-form-item",{attrs:{label:"代发薪资",labelCol:{span:8},wrapperCol:{span:16}}},[n("a-input-number",{staticStyle:{width:"100%"},attrs:{min:.01},on:{change:e.costChange},model:{value:e.cost.dfxz,callback:function(t){e.$set(e.cost,"dfxz",t)},expression:"cost.dfxz"}})],1),n("a-form-item",{attrs:{label:"商险",labelCol:{span:8},wrapperCol:{span:16}}},[n("a-input-number",{staticStyle:{width:"100%"},attrs:{min:.01},on:{change:e.costChange},model:{value:e.cost.sx,callback:function(t){e.$set(e.cost,"sx",t)},expression:"cost.sx"}})],1),n("a-form-item",{attrs:{label:"总金额",labelCol:{span:8},wrapperCol:{span:16}}},[e._v("\n        "+e._s(e.allCost)+"元\n      ")]),n("a-form-item",{attrs:{label:"分摊",labelCol:{span:8},wrapperCol:{span:16}}},[e._l(e.ApplyShares,function(t,a){return[n("div",{key:a},[n("span",[e._v(e._s(e.visible.DeptArray[t.DepId]))]),e._v(" "),n("span",[e._v(e._s(e.visible.UserArray[t.Userid]))]),e._v(" "),n("span",[e._v(e._s(t.Percentage))]),e._v("%\n              "),e.ApplyShares.length>0?n("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o"},on:{click:function(){return e.remove(t.key)}}}):e._e()],1)]}),n("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed"},on:{click:e.showModal}},[n("a-icon",{attrs:{type:"plus"}}),e._v(" 添加分摊人员\n        ")],1),n("chooseShareModel",{ref:"collectionForm",attrs:{showModalLayer:e.showModalLayer,options:e.options,loadData:e.loadData,AFormImportRules:e.AFormImportRules},on:{cancel:e.handleCancel,create:e.handleCreate}})],2),n("a-form-item",{attrs:{label:"附件",labelCol:{span:8},wrapperCol:{span:16}}},[n("a-button",{attrs:{disabled:1==e.notInDingTalk&&"disabled"},on:{click:e.uploadFile}},[n("a-icon",{attrs:{type:"upload"}}),e._v(" 上传附件")],1),1==e.notInDingTalk?n("div",[n("a-tag",{attrs:{color:"red"}},[e._v("此浏览器不支持上传，请到钉钉应用界面上传附件！")])],1):e._e(),e._l(e.uploadArry,function(t){return n("div",{key:t.fileId},[n("a-icon",{attrs:{type:"file-text"}}),e._v(" "+e._s(t.fileName)+" "),n("a-icon",{staticStyle:{cursor:"pointer",color:"#1890ff"},attrs:{type:"delete"},on:{click:function(n){return e.deleteFile(t.fileId)}}})],1)})],2)],1)],1),n("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px","z-index":9}},[n("a-button",{on:{click:e.onClose}},[e._v("取消")]),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:function(t){return e.handleSubmit("storage")}}},[e._v("暂存")]),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:function(t){return e.handleSubmit()}}},[e._v("立即提交")])],1)],1)},o=[],r=(n("c5f6"),n("6b54"),n("75fc")),i=(n("7f7f"),n("ac6a"),n("b775")),s=n("c32d"),l=n.n(s),c=n("61f7"),p={props:{loadData:{type:Function,default:null},showModalLayer:{type:Boolean,default:!1},options:{type:Array,default:[]},AFormImportRules:{type:Object,default:function(){return{}}}},data:function(){return{DepList:[],selectedOptionsCell:[],SaleUserid:""}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"form_in_modal"})},template:'\n    <a-modal\n      :visible="showModalLayer"\n      title=\'选择分摊人员\'\n      okText=\'确定\'\n      @cancel="() => { $emit(\'cancel\') }"\n      @ok="() => { $emit(\'create\') }"\n    >\n      <a-form  :form="form">\n        <a-form-item label="部门" :labelCol="{span: 4}" :wrapperCol="{span: 18}">\n          <a-cascader v-decorator="[\'DepId\',{rules:[{required:true}]}]" :options="options" @change="onChange" :loadData="loadData" changeOnSelect placeholder="请选择部门" />\n        </a-form-item>  \n        <a-form-item label="人员" :labelCol="{span: 4}" :wrapperCol="{span: 18}">\n          <a-select v-decorator="[\'Userid\',{rules:[{required:true}]}]">\n            <a-select-option  v-for="item in DepList" :key="item.code">{{item.name}}</a-select-option>\n          </a-select>\n        </a-form-item>\n        <a-form-item label="比例" :labelCol="{span: 4}" :wrapperCol="{span: 18}">\n          <a-input-number style="width:100%" v-decorator="[\'Percentage\',{rules:[{required:true}]}]" :min="1" :max="99"  addon-after="%" />\n        </a-form-item>  \n      </a-form>\n    </a-modal>\n  ',methods:{onChange:function(e){this.DepList=[],this.SaleUserid="",this.userbydepid(e[e.length-1])},userbydepid:function(e){var t=this;i["a"].post("/api/Org/User/UsersByDepId",{DepId:e}).then(function(e){var n=e;0===n.code&&(t.DepList=n.data)}).catch(function(e){console.log(e)})}}},u={components:{ChooseShareModel:p},props:{show:{type:Object,default:function(){}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,assetsdetail:{},componenttype:"",type:"",FormComponentValues:{},InvApplyItemTypeArr:{},DeptArray:{},UserArray:{}},showModalLayer:!1,options:[],ApplyShares:[],SpaceId:"",uploadArry:[],productLineList:[],notInDingTalk:!1,form:this.$form.createForm(this),AFormImportRules:{iptDate:[{required:!0,message:"请选择"}],iptInputReq:[{required:!0,message:"请输入"}],iptInput:[{required:!1,message:"请输入"}],iptSelect:[{required:!1,message:"请选择"}],iptSelectReq:[{required:!0,message:"请选择"}],Mobile:[{required:!0,message:"请输入手机号"},{validator:this.ConfirmMobile}],iptInputNumber:[{required:!1,message:"请输入数字"},{validator:this.ConfirmNumber}]},fescoMessage:{},allCost:0,cost:{fwf:"",shebao:"",gjj:"",dfxz:"",sx:""},InvApplyItemType:[],InvApplyItemTypeArr:[],ComProductLine:{},redetail:{month:"",invtype:""},moment:l.a}},watch:{show:function(e,t){var n=this;n.visible=e,e.show&&(n.init(),n.redetail.month=new Date)}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields(),this.options=[],this.allCost=0,this.cost={fwf:"",shebao:"",gjj:"",dfxz:"",sx:""},this.ApplyShares=[]},init:function(){var e=this;i["a"].post("/api/Dim/Enum/GetEnum",{Names:["ComProductLine","InvApplyItemType"]}).then(function(t){0===t.code&&(e.InvApplyItemType=t.data.InvApplyItemType,t.data.ComProductLine.forEach(function(t,n){e.ComProductLine[t.key]=t.text}))}).catch(function(e){console.log(e)}),i["a"].post("/api/DingTalk/GetSign",{}).then(function(t){e.fescoMessage=t.data,dd.config({agentId:t.data.AgentId,corpId:t.data.corpId,timeStamp:t.data.timeStamp,nonceStr:t.data.nonceStr,signature:t.data.signature,type:0,jsApiList:["biz.cspace.saveFile","biz.util.uploadAttachment","biz.cspace.preview","biz.cspace.chooseSpaceDir"]})}).catch(function(e){console.log(e)}),i["a"].post("/api/Org/Department/ChildrenDepsByDepId",{DepId:"1"}).then(function(t){0===t.code&&t.data.forEach(function(t,n){var a={};a.value=t.code,a.label=t.name,a.isLeaf=!1,e.options.push(a)})}).catch(function(e){console.log(e)}),i["a"].get("/api/DingTalk/CspaceInfo").then(function(t){var n=t,a=n.data.SpaceId;0===n.code&&(e.SpaceId=a)}).catch(function(e){console.log(e)}),"notInDingTalk"==dd.env.platform&&(e.notInDingTalk=!0),"{}"!=JSON.stringify(e.visible.FormComponentValues)&&(e.redetail={month:e.visible.FormComponentValues["所属月份"],invtype:e.visible.FormComponentValues["发票种类"]},e.visible.FormComponentValues.ApplyItems.forEach(function(t,n){"服务费"==e.visible.InvApplyItemTypeArr[t.InvAIType]&&(e.cost.fwf=t["金额"]),"社保"==e.visible.InvApplyItemTypeArr[t.InvAIType]&&(e.cost.shebao=t["金额"]),"公积金"==e.visible.InvApplyItemTypeArr[t.InvAIType]&&(e.cost.gjj=t["金额"]),"代发薪资"==e.visible.InvApplyItemTypeArr[t.InvAIType]&&(e.cost.dfxz=t["金额"]),"商险"==e.visible.InvApplyItemTypeArr[t.InvAIType]&&(e.cost.sx=t["金额"])}),e.costChange(),e.visible.FormComponentValues.ApplyShares.forEach(function(t,n){e.ApplyShares.push({key:n+1,DepId:t.DepId,Userid:t.Userid,Percentage:t.Percentage})}),e.uploadArry=e.visible.FormComponentValues["附件"],console.log(e.uploadArry))},handleSubmit:function(e){var t=this,n=this,a=[],o="",r="";this.form.validateFields(function(s,l){if(!s){var c=new Date(l["所属月份"]);if(o=c.getFullYear()+""+(c.getMonth()+1>9?c.getMonth()+1:"0"+(c.getMonth()+1)),console.log(n.InvApplyItemType),n.InvApplyItemType.forEach(function(e,n){var o={};"服务费"==e.text&&t.cost.fwf&&(o.InvAIType=e.key,o["金额"]=t.cost.fwf),"社保"==e.text&&t.cost.shebao&&(o.InvAIType=e.key,o["金额"]=t.cost.shebao),"公积金"==e.text&&t.cost.gjj&&(o.InvAIType=e.key,o["金额"]=t.cost.gjj),"代发薪资"==e.text&&t.cost.dfxz&&(o.InvAIType=e.key,o["金额"]=t.cost.dfxz),"商险"==e.text&&t.cost.sx&&(o.InvAIType=e.key,o["金额"]=t.cost.sx),"{}"!=JSON.stringify(o)&&a.push(o)}),!a.length)return void t.$message.error("开票条目不能为空！");var p={ComGuid:t.visible.assetsdetail.ComGuid,ComProductLineGuid:t.visible.assetsdetail.ComProductLineGuid,"所属月份":o,"发票种类":l["发票种类"],ApplyItems:a,ApplyShares:t.ApplyShares,"附件":n.uploadArry};p.IsSubmit="storage"!=e,n.$loading.open(),"modify"==n.visible.type?(r="/api/Invoice/Apply/Modify",p.InvApplyGuid=n.visible.assetsdetail.InvApplyGuid):r="/api/Invoice/Apply/Add",i["a"].post(r,p).then(function(e){n.$loading.close();var t=e;t.code>0?n.$message.error(t.msg):(n.onClose(),n.$message.success(t.msg))}).catch(function(e){n.$loading.close(),console.log(e)})}})},loadData:function(e){var t=e[e.length-1],n=this;t.loading=!0,i["a"].post("/api/Org/Department/ChildrenDepsByDepId",{DepId:t.value}).then(function(e){t.loading=!1,0===e.code&&(e.data.length>0?(t.children=[],e.data.forEach(function(e,n){var a={};a.value=e.code,a.label=e.name,a.isLeaf=!1,t.children.push(a)}),n.options=Object(r["a"])(n.options)):(t.isLeaf=!0,t.loading=!1))}).catch(function(e){console.log(e),t.loading=!1})},remove:function(e){console.log(e),this.ApplyShares=this.ApplyShares.filter(function(t){return t.key!=e}),console.log(this.ApplyShares)},ConfirmNumber:function(e,t,n){!t||Object(c["c"])(t)?n():n("请输入数字！")},uploadFile:function(){var e=this;dd.ready(function(){dd.biz.util.uploadAttachment({image:{multiple:!0,compress:!1,max:9,spaceId:e.SpaceId.toString()},space:{corpId:e.fescoMessage.corpId,spaceId:e.SpaceId.toString(),max:9},file:{spaceId:e.SpaceId.toString(),max:9},types:["photo","file","space"],onSuccess:function(t){e.uploadArry=e.uploadArry.concat(t.data)},onFail:function(e){}})})},deleteFile:function(e){var t=this;this.uploadArry.forEach(function(n,a){n.fileId===e&&t.uploadArry.splice(a,1)})},showModal:function(){this.showModalLayer=!0,console.log(this.showModalLayer)},handleCancel:function(){this.showModalLayer=!1},handleCreate:function(){var e=this,t=this.$refs.collectionForm.form,n=0,a=0;this.ApplyShares.forEach(function(e,t){n=e.key>n?e.key:n,a+=e.Percentage}),t.validateFields(function(o,r){o||(a+r.Percentage>99?e.$message.error("分摊比例总和不能超过99！"):(console.log("Received values of form: ",r),e.ApplyShares.push({key:n+1,DepId:r.DepId[r.DepId.length-1],Userid:r.Userid,Percentage:r.Percentage}),console.log(e.ApplyShares),t.resetFields(),e.showModalLayer=!1))})},costChange:function(){this.allCost=0,this.cost.fwf&&(this.allCost=Number(this.cost.fwf)+Number(this.allCost)),this.cost.shebao&&(this.allCost=Number(this.cost.shebao)+Number(this.allCost)),this.cost.gjj&&(this.allCost=Number(this.cost.gjj)+Number(this.allCost)),this.cost.sx&&(this.allCost=Number(this.cost.sx)+Number(this.allCost)),this.cost.dfxz&&(this.allCost=Number(this.cost.dfxz)+Number(this.allCost)),isNaN(parseFloat(this.allCost))||(this.allCost=this.allCost.toFixed(2))}}},f=u,d=n("2877"),h=Object(d["a"])(f,a,o,!1,null,null,null);t["default"]=h.exports},f410:function(e,t,n){n("1af6"),e.exports=n("584a").Array.isArray},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);