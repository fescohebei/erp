(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42427301","chunk-6723996b"],{"015a":function(t,e,a){},"238f":function(t,e,a){"use strict";var n=a("bebc"),i=a.n(n);i.a},bebc:function(t,e,a){},cef7:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"匹配账单",destroyOnClose:!0,visible:this.visible.show,width:1100,maskClosable:!1,footer:null},on:{cancel:t.onClose}},[a("a-row",{attrs:{gutter:30}},[a("a-col",{attrs:{span:24}},[a("a-row",{attrs:{gutter:5}},[a("a-col",{attrs:{span:2,align:"right"}},[t._v("\n          公司:\n        ")]),a("a-col",{attrs:{span:6}},[t._v("\n           "+t._s(t.visible.claimdetail.ComName)+"\n        ")]),a("a-col",{attrs:{span:2,align:"right"}},[t._v("\n          户名:\n        ")]),a("a-col",{attrs:{span:6}},[t._v("\n           "+t._s(t.visible.claimdetail["户名"])+"\n        ")]),a("a-col",{attrs:{span:2,align:"right"}},[t._v("\n          金额:\n        ")]),a("a-col",{attrs:{span:6}},[t._v("\n           "+t._s(t.visible.claimdetail["金额"])+"\n        ")])],1),a("a-row",{attrs:{gutter:5}},[a("a-col",{attrs:{span:2,align:"right"}},[t._v("\n          记账日期:\n        ")]),a("a-col",{attrs:{span:6}},[t._v("\n           "+t._s(t.visible.claimdetail["记账日期"])+"\n        ")]),a("a-col",{attrs:{span:2,align:"right"}},[t._v("\n          摘要:\n        ")]),a("a-col",{attrs:{span:14}},[t._v("\n           "+t._s(t.visible.claimdetail["摘要"])+"\n        ")])],1)],1),a("a-col",{staticClass:"bright",attrs:{span:24}},[a("a-divider",{attrs:{orientation:"left"}},[t._v("账单查询")]),a("a-table",{attrs:{columns:t.columns,dataSource:t.dataSource,pagination:!1,rowKey:"BillGuid",size:"middle"},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{staticStyle:{"text-align":"right"}},[30!=n.Receipted?a("a",{on:{click:function(e){return t.claim(n,"line")}}},[t._v("认领")]):t._e()])}},{key:"ProductLineText",fn:function(e,n){return a("span",{staticStyle:{"text-align":"right"}},[t._v("\n          "+t._s(t.visible.ComProductLine[n.ProductLine])+"\n        ")])}}])},[a("template",{slot:"footer"},[a("a-pagination",{staticStyle:{float:"right"},attrs:{defaultCurrent:1,pageSize:t.formSearch.pageSize,total:t.formSearch.total,current:t.formSearch.current},on:{change:t.pagechange}})],1)],2)],1)],1)],1)},i=[],o=(a("ac6a"),a("b775")),c=[{title:"公司名称",dataIndex:"ComName",width:200},{title:"产品线",scopedSlots:{customRender:"ProductLineText"}},{title:"所属月份",dataIndex:"所属月份"},{title:"代发薪资",dataIndex:"代发薪资"},{title:"公积金",dataIndex:"公积金"},{title:"商险",dataIndex:"商险"},{title:"服务费",dataIndex:"服务费"},{title:"社保",dataIndex:"社保"},{title:"账单金额",dataIndex:"账单金额"},{title:"操作",scopedSlots:{customRender:"action"},width:140}],r={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,claimdetail:{},ComProductLine:{},ComName:""},columns:c,dataSource:[],form:this.$form.createForm(this),AFormImportRules:{Amount:[{required:!0,message:"请输入"},{validator:this.checkAmount}]},formSearch:{Keyword:"",pageSize:5,current:1,total:0,ComProductLineGuid:""},InvApplyStatus:{},comNameText:"",comProductLineText:"",selected:{},comNameInp:"",InvoiceOpenType:{},InvoicePaymentType:{}}},watch:{show:function(t,e){var a=this;a.visible=t,console.log(a.visible),t.show&&a.init()}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields(),this.comNameText="",this.comProductLineText="",this.selected={},this.kpDataSource=[],this.formSearch.Keyword=""},init:function(){var t=this;console.log(t.visible),o["a"].post("/api/Dim/Enum/GetEnum",{Names:["InvApplyStatus","InvoiceOpenType","InvoicePaymentType"]}).then(function(e){0===e.code&&(e.data.InvApplyStatus.forEach(function(e,a){t.InvApplyStatus[e.key]=e.text}),e.data.InvoicePaymentType.forEach(function(e,a){t.InvoicePaymentType[e.key]=e.text}),e.data.InvoiceOpenType.forEach(function(e,a){t.InvoiceOpenType[e.key]=e.text}))}).catch(function(e){t.$loading.close(),console.log(e)}),this.pagechange(1)},initPage:function(){this.pagechange(1)},pagechange:function(t){var e=this;e.formSearch.current=t,e.formSearch.ComGuid=this.visible.claimdetail.ComGuid,e.$loading.open(),o["a"].post("/api/Bill/Info/List",e.formSearch).then(function(t){e.$loading.close(),0===t.code&&(e.dataSource=t.data.rows,e.formSearch.total=t.count)}).catch(function(t){e.$loading.close(),console.log(t)})},claim:function(t,e){var a=this,n=this;this.form.validateFields(function(e,i){if(!e){var c=i,r="";c.RecPISplitGuid=a.visible.claimdetail.RecPISplitGuid,c.BillGuid=t.BillGuid,r='是否将该笔到款认领到"'+t.ComName+'"的"'+t["所属月份"]+'"月份账单上吗？',a.$confirm({title:r,content:"",onOk:function(){o["a"].post("/api/Bill/Receipt/PickFromCom",c).then(function(t){var e=t;e.code>0?n.$message.error(e.msg):(n.onClose(),n.$message.success(e.msg))}).catch(function(t){console.log(t)})},onCancel:function(){}})}})},changeComName:function(){this.formSearch.Keyword?this.comNameInp="":this.comNameInp="comNameInpErr"}}},s=r,l=(a("238f"),a("2877")),u=Object(l["a"])(s,n,i,!1,null,"cb52dca4",null);e["default"]=u.exports},d88a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{attrs:{columns:t.columns,dataSource:t.dataSource,pagination:!1,rowKey:"RecPIGuid"},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{staticStyle:{"text-align":"right"}},[a("a",{on:{click:function(e){return t.claimproductline(n)}}},[t._v("匹配账单")])])}},{key:"Status",fn:function(e,n){return a("span",{staticStyle:{"text-align":"right"}},[t._v("\r\n        "+t._s(t.RecPublishItemStatus[n.Status])+"\r\n    ")])}},{key:"BankId",fn:function(e,n){return a("span",{staticStyle:{"text-align":"right"}},[t._v("\r\n        "+t._s(t.Bank[n.BankId])+"\r\n    ")])}},{key:"khBank",fn:function(e,n){return[a("a-tooltip",[a("template",{slot:"title"},[t._v("\r\n          "+t._s(n["开户行"])+"\r\n        ")]),a("div",{staticClass:"remark-text ellipsis"},[t._v(t._s(n["开户行"]))])],2)]}},{key:"Remark",fn:function(e,n){return[a("a-tooltip",[a("template",{slot:"title"},[t._v("\r\n          "+t._s(n["摘要"])+"\r\n        ")]),a("div",{staticClass:"remark-text ellipsis"},[t._v(t._s(n["摘要"]))])],2)]}}])},[a("template",{slot:"footer"},[a("a-pagination",{staticStyle:{float:"right"},attrs:{defaultCurrent:1,pageSize:t.formSearch.pageSize,total:t.formSearch.total,current:t.formSearch.current},on:{change:t.pagechange}})],1)],2),a("modal-claim-productline",{attrs:{show:t.drawer.claimproductline,refresh:t.pagerefresh}})],1)},i=[],o=(a("ac6a"),a("b775")),c=a("cef7"),r=[{title:"公司名称",dataIndex:"ComName"},{title:"户名",dataIndex:"户名",key:"户名"},{title:"交易金额",dataIndex:"交易金额"},{title:"剩余金额",dataIndex:"金额",key:"金额"},{title:"记账日期",dataIndex:"记账日期",key:"记账日期"},{title:"摘要",dataIndex:"摘要",key:"摘要",scopedSlots:{customRender:"Remark"}},{title:"操作",scopedSlots:{customRender:"action"},width:100}],s={components:{ModalClaimProductline:c["default"]},props:{assetsdetail:{type:Object,default:function(){return{}}}},data:function(){return{columns:r,dataSource:[],formSearch:{ComGuid:"",ComProductLineGuid:"",pageSize:5,current:1,total:0},drawer:{claimproductline:{show:!1}},ComProductLine:{}}},mounted:function(){var t=this;t.init()},computed:{},methods:{init:function(){var t=this;o["a"].post("/api/Dim/Enum/GetEnum",{Names:["ComProductLine"]}).then(function(e){0===e.code&&e.data.ComProductLine.forEach(function(e,a){t.ComProductLine[e.key]=e.text})}).catch(function(e){t.$loading.close(),console.log(e)}),this.pagechange(1)},pagerefresh:function(){this.pagechange(this.formSearch.current)},pagechange:function(t){var e=this;e.formSearch.current=t,e.formSearch.ComGuid=e.assetsdetail.company.ComGuid,e.$loading.open(),o["a"].post("/api/Bill/Receipt/Unmatched",e.formSearch).then(function(t){e.$loading.close(),0===t.code&&(e.dataSource=t.data.rows,e.formSearch.total=t.count)}).catch(function(t){e.$loading.close(),console.log(t)})},claimproductline:function(t){var e=this;e.drawer.claimproductline={show:!0,claimdetail:t,ComProductLine:e.ComProductLine}}}},l=s,u=(a("da90"),a("2877")),d=Object(u["a"])(l,n,i,!1,null,null,null);e["default"]=d.exports},da90:function(t,e,a){"use strict";var n=a("015a"),i=a.n(n);i.a}}]);