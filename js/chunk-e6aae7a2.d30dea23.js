(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e6aae7a2","chunk-c1b53df0"],{"0bfb":function(e,t,a){"use strict";var i=a("cb7c");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2400:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:e.visible.title,visible:this.visible.show,width:550,destroyOnClose:!0},on:{close:e.onClose}},[a("a-form",{attrs:{form:e.form,layout:"horizontal"}},[a("a-row",{attrs:{gutter:11}},[a("a-col",{attrs:{md:24}},[e.cuiShouDetail.length>0?[a("a-timeline",e._l(e.cuiShouDetail,function(t){return a("a-timeline-item",{key:t.index},[a("p",[e._v("客服："+e._s(e.visible.UserArray[t.Userid])+"  "),a("a-divider",{attrs:{type:"vertical"}}),e._v(" 客服操作时间："+e._s(t.CreateDate))],1),a("p",[e._v("处理结果："+e._s(e.visible.YuQiExecType[t.YuQiExecType])+"  "),10==t.YuQiExecType?a("span",[a("a-divider",{attrs:{type:"vertical"}}),e._v(" 延展天数："+e._s(t["延展天数"]))],1):e._e()]),a("p",[e._v("客服说明："+e._s(t.Explain))]),1==e.notInDingTalk?a("div",{staticStyle:{"margin-bottom":"14px"}},[e._v("客服附件： "),a("a-tag",{attrs:{color:"red"}},[e._v("此浏览器不支持预览，请到钉钉应用界面预览附件！")])],1):null==t.kfUpload?a("div",{staticStyle:{"margin-bottom":"14px"}},[e._v("无")]):[a("a-row",{staticStyle:{"margin-bottom":"14px"}},[a("a-col",{attrs:{span:3}},[e._v("客服附件:")]),a("a-col",{attrs:{span:20}},[e._l(t.kfUpload,function(t,i){return[a("div",{key:i,staticClass:"fujian"},[e._v("\n                        "+e._s(t.fileName)+" "),a("a-tag",{attrs:{color:"blue"},on:{click:function(a){return e.showFile(t)}}},[e._v("预览")])],1)]})],2)],1)],a("p",[e._v("质控说明："+e._s(t["质控情况说明"]))]),1==e.notInDingTalk?a("div",{staticStyle:{"margin-bottom":"14px"}},[e._v("质控附件： "),a("a-tag",{attrs:{color:"red"}},[e._v("此浏览器不支持预览，请到钉钉应用界面预览附件！")])],1):null==t.zkUpload?a("div",[e._v("质控附件:无")]):[a("a-row",{staticStyle:{"margin-bottom":"14px"}},[a("a-col",{attrs:{span:3}},[e._v("质控附件:")]),a("a-col",{attrs:{span:20}},[e._l(t.zkUpload,function(t,i){return[a("div",{key:i,staticClass:"fujian"},[e._v("\n                        质控附件:"+e._s(t.fileName)+" "),a("a-tag",{attrs:{color:"blue"},on:{click:function(a){return e.showFile(t)}}},[e._v("预览")])],1)]})],2)],1)]],2)}),1)]:e._e(),a("a-form-item",{attrs:{label:"处理方式",labelCol:{span:4},wrapperCol:{span:19}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["YuQiExecType",{rules:e.AFormImportRules.iptSelect}],expression:"['YuQiExecType',{rules:AFormImportRules.iptSelect}]"}],on:{change:e.ReceiptChange}},e._l(e.visible.YuQiExecTypeArray,function(t){return a("a-select-option",{key:t.key},[e._v("\n              "+e._s(t.text)+"\n            ")])}),1)],1),e.showDay?a("a-form-item",{directives:[{name:"decorator",rawName:"v-decorator",value:["延展天数",{rules:e.AFormImportRules.iptInput}],expression:"['延展天数',{rules:AFormImportRules.iptInput}]"}],attrs:{label:"延展天数",labelCol:{span:4},wrapperCol:{span:19}}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["延展天数",{rules:e.AFormImportRules.Explain}],expression:"['延展天数',{rules:AFormImportRules.Explain}]"}],staticStyle:{width:"100%"},attrs:{min:1}})],1):e._e(),a("a-form-item",{attrs:{label:"附件",labelCol:{span:4},wrapperCol:{span:20}}},[a("a-button",{attrs:{disabled:1==e.notInDingTalk&&"disabled"},on:{click:e.uploadFile}},[a("a-icon",{attrs:{type:"upload"}}),e._v(" 上传附件")],1),1==e.notInDingTalk?a("div",[a("a-tag",{attrs:{color:"red"}},[e._v("此浏览器不支持上传，请到钉钉应用界面上传附件！")])],1):e._e(),e._l(e.uploadArry,function(t){return a("div",{key:t.fileId},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" "+e._s(t.fileName)+"  "),a("a-icon",{staticStyle:{cursor:"pointer",color:"#1890ff"},attrs:{type:"search"},on:{click:function(a){return e.showFile(t)}}}),e._v("  "),a("a-icon",{staticStyle:{cursor:"pointer",color:"#1890ff"},attrs:{type:"delete"},on:{click:function(a){return e.deleteFile(t.fileId)}}})],1)})],2),a("a-form-item",{attrs:{label:"说明",labelCol:{span:4},wrapperCol:{span:19}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Explain",{rules:e.AFormImportRules.Explain}],expression:"['Explain',{rules:AFormImportRules.Explain}]"}],attrs:{placeholder:"说明",rows:4}})],1)],2)],1)],1),a("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px","z-index":9}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:function(t){return e.handleSubmit()}}},[e._v("立即提交")])],1)],1)},o=[],n=(a("6b54"),a("ac6a"),a("b775")),r={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{spinning:!1,visible:{show:!1,title:"",ReceiptType:"",BankList:[],detail:{},YuQiExecTypeArray:[],YuQiExecType:{}},form:this.$form.createForm(this),AFormImportRules:{iptSelect:[{required:!0,message:"请选择"}],iptInput:[{required:!0,message:"请输入"}],Explain:[{required:!0,message:"请输入"}]},receivedtype:{ReceiptType:""},errdatarows:[],fileList:[],previewVisible:!1,previewImage:"",notInDingTalk:!1,uploadArry:[],SpaceId:"",SpaceIdNormal:"",showDay:!1,cuiShouDetail:[]}},created:function(){var e=this;this.$watch("show",function(t,a){e.visible=t,e.spinning=!1,e.init()})},methods:{onClose:function(){this.visible.show=!1,this.receivedtype={ReceiptType:""},this.showDay=!1,this.uploadArry=[],this.cuiShouDetail={},this.refresh&&this.refresh()},init:function(){var e=this;n["a"].post("/api/Bill/Urge/Detail",{BillGuid:e.visible.detail.BillGuid}).then(function(t){e.cuiShouDetail=t.data.YuQi,e.cuiShouDetail.forEach(function(e){e.kfUpload=JSON.parse(e["附件"]),e.zkUpload=JSON.parse(e["质控附件"])})}).catch(function(e){console.log(e)}),n["a"].post("/api/DingTalk/GrantCustomSpaceAdd",{domain:"Bill"}).then(function(e){}).catch(function(e){console.log(e)}),n["a"].post("/api/DingTalk/GetCustomSpace",{Domain:"Bill"}).then(function(t){var a=t,i=a.data.Spaceid;0===a.code&&(e.SpaceIdNormal=i)}).catch(function(e){console.log(e)}),n["a"].post("/api/DingTalk/GetSign",{}).then(function(t){e.fescoMessage=t.data,dd.config({agentId:t.data.AgentId,corpId:t.data.corpId,timeStamp:t.data.timeStamp,nonceStr:t.data.nonceStr,signature:t.data.signature,type:0,jsApiList:["biz.cspace.saveFile","biz.util.uploadAttachment","biz.cspace.preview","biz.cspace.chooseSpaceDir"]})}).catch(function(e){console.log(e)}),"notInDingTalk"==dd.env.platform&&(this.notInDingTalk=!0)},uploadFile:function(){var e=this,t="";dd.ready(function(){t=e.SpaceIdNormal,dd.biz.util.uploadAttachment({image:{multiple:!0,compress:!1,max:9,spaceId:t.toString()},space:{corpId:e.fescoMessage.corpId,spaceId:t.toString(),max:9},file:{spaceId:t.toString(),max:9},types:["file"],onSuccess:function(t){e.uploadArry=e.uploadArry.concat(t.data),n["a"].post("/api/DingTalk/GrantCustomSpaceDownload",{Domain:"Bill",Files:e.uploadArry}).then(function(e){}).catch(function(e){console.log(e)})},onFail:function(e){}})})},showFile:function(e){console.log(e);var t=this,a="";dd.ready(function(){a=t.SpaceIdNormal,dd.biz.cspace.preview({corpId:t.fescoMessage.corpId,spaceId:a.toString(),fileId:e.fileId,fileName:e.fileName,fileSize:e.fileSize,fileType:e.fileType,onSuccess:function(){},onFail:function(e){}})})},deleteFile:function(e){var t=this;this.uploadArry.forEach(function(a,i){a.fileId===e&&t.uploadArry.splice(i,1)})},handleSubmit:function(e){var t=this,a=this;this.form.validateFields(function(e,i){if(!e){if(!a.uploadArry.length)return void t.$message.error("请上传附件！");var o={BillGuid:t.visible.detail.BillGuid,Explain:i.Explain,YuQiExecType:i.YuQiExecType,"附件":a.uploadArry};10==i.YuQiExecType&&(o["延展天数"]=i["延展天数"]),a.submitCallback("/api/Bill/Urge/YuQi",o)}})},submitCallback:function(e,t){var a=this;a.$loading.open(),n["a"].post(e,t).then(function(e){a.$loading.close();var t=e;t.code>0?a.$message.error(t.msg):(a.onClose(),a.refresh(),a.$message.success(t.msg))}).catch(function(e){a.$loading.close(),console.log(e)})},ReceiptChange:function(e){this.showDay=10==e}}},l=r,s=(a("6eb2"),a("2877")),c=Object(s["a"])(l,i,o,!1,null,null,null);t["default"]=c.exports},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(e,t,a){"use strict";a("3846");var i=a("cb7c"),o=a("0bfb"),n=a("9e1e"),r="toString",l=/./[r],s=function(e){a("2aba")(RegExp.prototype,r,e,!0)};a("79e5")(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?s(function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!n&&e instanceof RegExp?o.call(e):void 0)}):l.name!=r&&s(function(){return l.call(this)})},"6eb2":function(e,t,a){"use strict";var i=a("e6a8"),o=a.n(i);o.a},e6a8:function(e,t,a){}}]);