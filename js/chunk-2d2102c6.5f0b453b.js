(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2102c6"],{b783:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-drawer",{attrs:{title:"添加/修改",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:700}},[t("a-card",{attrs:{bordered:!1}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"名称",labelCol:{span:8},wrapperCol:{span:16}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["GoodsName",{initialValue:e.visible.goodsdetail.GoodsName,rules:e.AFormImportRules.GoodsName}],expression:"['GoodsName',{initialValue:visible.goodsdetail.GoodsName,rules:AFormImportRules.GoodsName}]"}]})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"品牌",labelCol:{span:8},wrapperCol:{span:16}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["BrandID",{initialValue:e.visible.goodsdetail.BrandID,rules:e.AFormImportRules.iptSelect}],expression:"['BrandID',{initialValue: visible.goodsdetail.BrandID,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.Brand,function(a){return t("a-select-option",{key:a.code},[e._v(e._s(a.name))])}),1)],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"大类",labelCol:{span:8},wrapperCol:{span:16}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["ClassID",{initialValue:e.visible.goodsdetail.ClassID,rules:e.AFormImportRules.iptSelect}],expression:"['ClassID',{initialValue: visible.goodsdetail.ClassID,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0},on:{change:e.onClassChange}},e._l(e.dim.Class,function(a){return t("a-select-option",{key:a.code},[e._v(e._s(a.name))])}),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"小类",labelCol:{span:8},wrapperCol:{span:16}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["SubclassID",{initialValue:e.visible.goodsdetail.SubclassID,rules:e.AFormImportRules.iptSelect}],expression:"['SubclassID',{initialValue: visible.goodsdetail.SubclassID,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.SubClass,function(a){return t("a-select-option",{key:a.code},[e._v(e._s(a.name))])}),1)],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"规格型号",labelCol:{span:4},wrapperCol:{span:20}}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Spec",{initialValue:e.visible.goodsdetail.Spec}],expression:"['Spec',{initialValue:visible.goodsdetail.Spec}]"}]})],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"数量单位",labelCol:{span:8},wrapperCol:{span:16}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["UnitID",{initialValue:e.visible.goodsdetail.UnitID,rules:e.AFormImportRules.iptSelect}],expression:"['UnitID',{initialValue: visible.goodsdetail.UnitID,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.Unit,function(a){return t("a-select-option",{key:a.code},[e._v(e._s(a.name))])}),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"存放仓库",labelCol:{span:8},wrapperCol:{span:16}}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["WarehouseID",{initialValue:e.visible.goodsdetail.WarehouseID,rules:e.AFormImportRules.iptSelect}],expression:"['WarehouseID',{initialValue: visible.goodsdetail.WarehouseID,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.Warehouse,function(a){return t("a-select-option",{key:a.code},[e._v(e._s(a.name))])}),1)],1)],1)],1),t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"备注",labelCol:{span:4},wrapperCol:{span:20}}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks",{initialValue:e.visible.goodsdetail.Remarks}],expression:"['Remarks',{initialValue:visible.goodsdetail.Remarks }]"}],attrs:{placeholder:"备注",rows:4}})],1)],1)],1)],1)],1),t("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[t("a-button",{on:{click:e.onClose}},[e._v("取消")]),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")]),null==e.visible.id?t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(a){return e.handleSubmit("next")}}},[e._v("提交并继续录入")]):e._e()],1)],1)},l=[],o=t("b775"),i={props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,goodsdetail:{GoodsName:"",ClassID:""}},dim:{Brand:[]},form:this.$form.createForm(this),AFormImportRules:{GoodsName:[{required:!0,message:"请输入名称"}],iptSelect:[{required:!0,message:"请选择"}]}}},watch:{show:function(e,a){var t=this;t.visible=e,e.show&&(null==t.visible.goodsdetail&&(t.visible.goodsdetail={GoodsName:"",ClassID:""}),t.init())}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields()},init:function(){var e=this;o["a"].post("/api/Dim/Group/FormNewGoods",{ClassID:e.visible.goodsdetail.ClassID}).then(function(a){0===a.code&&(e.dim=a.data)}).catch(function(e){console.log(e)})},handleSubmit:function(e){var a=this;this.form.validateFields(function(t,s){if(!t){var l=s;l.GoodsGuid=a.visible.id,o["a"].post("/api/Supplies/Goods/SaveFormNewGoods",l).then(function(t){var s=t;s.code>0?a.$message.error(s.msg):("next"===e?(a.form.resetFields(),a.refresh&&a.refresh()):a.onClose(),a.$message.success(s.msg))}).catch(function(e){console.log(e)})}})},onClassChange:function(e){var a=this;o["a"].post("/api/Dim/Class/Subclass",{ClassID:e,Type:1}).then(function(e){0===e.code&&(a.dim.SubClass=e.data,a.form.setFieldsValue({SubclassID:void 0}))}).catch(function(e){console.log(e)})}}},r=i,n=t("2877"),d=Object(n["a"])(r,s,l,!1,null,null,null);a["default"]=d.exports}}]);