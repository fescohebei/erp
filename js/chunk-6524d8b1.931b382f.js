(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6524d8b1"],{"6a51":function(e,t,a){"use strict";var r=a("6ca8"),i=a.n(r);i.a},"6ca8":function(e,t,a){},b733:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-layout",[a("a-layout-content",[a("a-card",{attrs:{bordered:!1}},[a("div",[a("a-form",{attrs:{form:e.form,layout:"horizontal"}},[a("div",{class:e.advanced?null:"fold"},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:6}},[a("a-form-item",{attrs:{label:"公司名称",labelCol:{span:6},wrapperCol:{span:17,offset:1}}},[a("a-input",{attrs:{placeholder:"请输入"},model:{value:e.formSearch.Keyword,callback:function(t){e.$set(e.formSearch,"Keyword",t)},expression:"formSearch.Keyword"}})],1)],1),a("a-col",{attrs:{span:4}},[a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:e.initPage}},[e._v("查询")])],1)],1)],1)],1)])],1),a("a-table",{attrs:{columns:e.columns,dataSource:e.dataSource,pagination:!1,rowKey:"ComGuid",expandedRowKeys:e.expandedRowKeys},on:{expand:e.childLineList},scopedSlots:e._u([{key:"CreatDate",fn:function(t,r){return a("span",{staticStyle:{"text-align":"right"}},[""!=r.PullTime?[e._v(e._s(r.PullTime))]:e._e(),""==r.PullTime?[e._v(e._s(r.CreatDate))]:e._e()],2)}},{key:"isOperate",fn:function(t,r){return a("span",{staticStyle:{"text-align":"right"}},[a("a-tag",{attrs:{color:1==r.Opened?"red":0==r.Cooperated?"blue":1==r.Cooperated?"green":""}},[1==r.Opened?[e._v("公海")]:e._e(),0==r.Opened?[e._v(e._s(r.CooperatedText))]:e._e()],2)],1)}},{key:"CityCode",fn:function(t,r){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n          "+e._s(e.cityList[r.CityCode])+"\n        ")])}},{key:"action",fn:function(t,r){return a("span",{staticStyle:{"text-align":"right"}},[a("a",{on:{click:function(t){return e.detail(r)}}},[e._v("详情")])])}}])},[a("a-table",{attrs:{slot:"expandedRowRender",rowKey:"ComProductLineGuid",columns:e.columnsLines,"data-source":e.dataLeads,pagination:!1},slot:"expandedRowRender",scopedSlots:e._u([{key:"operate",fn:function(t,r){return a("span",{staticStyle:{"text-align":"right"}},[a("a-tag",{attrs:{color:1==r.Opened?"red":0==r.Cooperated?"blue":1==r.Cooperated?"green":""}},[1==r.Opened?[e._v("没人跟进")]:e._e(),0==r.Opened?[e._v(e._s(r.CooperatedText))]:e._e()],2)],1)}},{key:"action",fn:function(t,r){return a("span",{staticStyle:{"text-align":"right"}},[a("a",{on:{click:function(t){return e.lineDetail(r)}}},[e._v("详情")])])}},{key:"CreateDate",fn:function(t,r){return a("span",{staticStyle:{"text-align":"right"}},[1==r.Opened?[e._v(e._s(r.ThrowTime))]:e._e(),0==r.Opened?[e._v(e._s(r.PullTime))]:e._e()],2)}},{key:"ServiceUserid",fn:function(t,r){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n            "+e._s(e.UserArray[r.ServiceUserid])+"\n          ")])}},{key:"XTUserid",fn:function(t,r){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n            "+e._s(e.UserArray[r.XTUserid])+"\n          ")])}},{key:"Stage",fn:function(t,r){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n            "+e._s(e.SaleStage[r.Stage])+"\n          ")])}}])}),a("template",{slot:"footer"},[a("a-pagination",{staticStyle:{float:"right"},attrs:{defaultCurrent:1,pageSize:e.formSearch.pageSize,total:e.formSearch.total,current:e.formSearch.current},on:{change:e.pagechange}})],1)],2)],1)],1),a("drawer-detail",{attrs:{show:e.drawer.detail,refresh:e.pagerefresh}}),a("drawer-line-detail",{attrs:{show:e.drawer.linedetail,assetsdetail:{},refresh:e.pagerefresh}})],1)},i=[],n=(a("ac6a"),a("b775")),o=a("61f7"),s=a("bb17"),d=a("8a34"),c=[{title:"是否合作",scopedSlots:{customRender:"isOperate"}},{title:"公司名称",dataIndex:"ComName"},{title:"城市",scopedSlots:{customRender:"CityCode"}},{title:"归属人",dataIndex:"UseridText"},{title:"入库时间",dataIndex:"PullTime"},{title:"操作",scopedSlots:{customRender:"action"}}],l=[{title:"状态",scopedSlots:{customRender:"operate"},width:90},{title:"产品线",dataIndex:"ProductLineText",width:120},{title:"销售姓名",dataIndex:"UseridText",width:130},{title:"客服",scopedSlots:{customRender:"ServiceUserid"},width:100},{title:"协同人员",scopedSlots:{customRender:"XTUserid"},width:130},{title:"入库时间",scopedSlots:{customRender:"CreateDate"},width:200},{title:"销售阶段",scopedSlots:{customRender:"Stage"},width:200},{title:"操作",scopedSlots:{customRender:"action"}}],u={components:{DrawerDetail:s["default"],DrawerLineDetail:d["default"]},data:function(){return{advanced:!0,columns:c,columnsLines:l,visible:!1,confirmLoading:!1,formSearch:{pageSize:10,current:1,total:0,Keyword:"",cityname:"",Industry:""},form:this.$form.createForm(this),AFormImportRules:{iptInput:[{required:!0,message:"请输入"}]},claimForm:this.$form.createForm(this),AFormClaimRules:{iptInputNumber:[{required:!0,message:"请输入数字"},{validator:this.ConfirmNumber}]},dataSource:[],dataLeads:[],dataDetail:[],roles:[],roles87:!1,rolesType:0,drawer:{detail:{show:!1},linedetail:{show:!1},area:{show:!1}},modal:{exporttransfer:{show:!1}},checkComId:"",checkLineId:"",userid:"",expandedRowKeys:[],department:[],departmentKey:"",showClaimLayer:!1,childLine:{expanded:"",record:""},SaleUserid:"",allOptions:[],AllUserList:[],UserArray:[],DeptArray:[],cityList:[],callback:function(){},Leaved:"0",city:{},SaleStage:{},ComLeadsStatus:{},ProductLine:{}}},mounted:function(){var e=this;e.init()},methods:{init:function(){var e=this;this.pagechange(1),n["a"].post("/api/Dim/Enum/DimDecode",{Names:["User","Dept","City"]}).then(function(t){0===t.code&&(e.UserArray=t.data.User,e.DeptArray=t.data.Dept,e.cityList=t.data.City)}).catch(function(e){console.log(e)}),n["a"].post("/api/Dim/Enum/GetEnum",{Names:["Industry","SaleStage","ComLeadsStatus","ComProductLine"]}).then(function(t){0===t.code&&(e.Industry=t.data.Industry,t.data.SaleStage.forEach(function(t,a){e.SaleStage[t.key]=t.text}),t.data.ComLeadsStatus.forEach(function(t,a){e.ComLeadsStatus[t.key]=t.text}),t.data.ComProductLine.forEach(function(t,a){e.ProductLine[t.key]=t.text}))}).catch(function(e){console.log(e)})},initPage:function(){this.pagechange(1)},pagerefresh:function(){this.pagechange(this.formSearch.current)},pagechange:function(e){var t=this;""==t.formSearch.Keyword||t.formSearch.Keyword.length<2?t.$message.error("请输入公司名称（至少2个字及以上）！"):(t.formSearch.current=e,t.formSearch.Scene="",t.$loading.open(),n["a"].post("/api/Crm/Com/List",t.formSearch).then(function(e){t.$loading.close(),0===e.code&&(e.data.rows.forEach(function(e){e.CreatDate=moment(e.CreatDate).format("YYYY-MM-DD")}),t.dataSource=e.data.rows)}).catch(function(e){t.$loading.close(),console.log(e)}))},detail:function(e){this.drawer.detail={show:!0,id:e.ComGuid,userid:this.userid,listText:e,UserArray:this.UserArray,DeptArray:this.DeptArray,cityList:this.cityList,SaleStage:this.SaleStage,ComLeadsStatus:this.ComLeadsStatus,ProductLine:this.ProductLine}},childLineList:function(e,t){var a=this;a.childLine.expanded=e,a.childLine.record=t,e?(n["a"].post("/api/Crm/Com/Detail",{ComGuid:t.ComGuid}).then(function(e){0===e.code&&(a.dataLeads=e.data.lines,a.dataDetail=e.data)}).catch(function(e){console.log(e)}),this.expandedRowKeys=[],this.expandedRowKeys.push(t.ComGuid)):this.expandedRowKeys=[]},childLineListRefresh:function(){var e=this;e.childLine.expanded?(n["a"].post("/api/Crm/Com/Detail",{ComGuid:e.childLine.record.ComGuid}).then(function(t){0===t.code&&(e.dataLeads=t.data.lines,e.dataDetail=t.data)}).catch(function(e){console.log(e)}),this.expandedRowKeys=[],this.expandedRowKeys.push(e.childLine.record.ComGuid)):this.expandedRowKeys=[]},lineDetail:function(e){this.drawer.linedetail={show:!0,assetsdetail:e,userid:this.userid,UserArray:this.UserArray,DeptArray:this.DeptArray,SaleStage:this.SaleStage}},ConfirmNumber:function(e,t,a){!t||Object(o["c"])(t)?a():a("请输入数字！")}}},h=u,p=(a("6a51"),a("2877")),m=Object(p["a"])(h,r,i,!1,null,null,null);t["default"]=m.exports}}]);