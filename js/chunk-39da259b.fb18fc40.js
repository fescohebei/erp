(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39da259b","chunk-2d2300f6"],{"84a7":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a-layout",[o("a-layout-content",[o("a-card",{attrs:{bordered:!1}},[o("div",[o("a-form",{attrs:{layout:"horizontal"}},[o("div",{class:e.advanced?null:"fold"},[o("a-row",{attrs:{gutter:10}},[o("a-col",{attrs:{md:6}},[o("a-form-item",{attrs:{label:"公司名称",labelCol:{span:6},wrapperCol:{span:17,offset:1}}},[o("a-input",{attrs:{placeholder:"请输入"},model:{value:e.formSearch.Keyword,callback:function(t){e.$set(e.formSearch,"Keyword",t)},expression:"formSearch.Keyword"}})],1)],1),o("a-col",{attrs:{span:12}},[o("a-form-item",[o("a-button",{attrs:{type:"primary"},on:{click:e.pageinit}},[e._v("查询")])],1)],1)],1)],1)])],1),o("a-table",{attrs:{columns:e.columns,dataSource:e.dataSource,pagination:!1,rowKey:"ComProductLineGuid"},scopedSlots:e._u([{key:"ComProductLine",fn:function(t,a){return o("span",{},[e._v("\n          "+e._s(e.ComProductLine[a.ProductLine])+"\n        ")])}},{key:"action",fn:function(t,a){return o("span",{staticStyle:{"text-align":"right"}},[o("a",{on:{click:function(t){return e.detail(a)}}},[e._v("详情")]),o("a-divider",{attrs:{type:"vertical"}}),o("a",{on:{click:function(t){return e.verify(a)}}},[e._v("调整")])],1)}}])},[o("template",{slot:"footer"},[o("a-pagination",{staticStyle:{float:"right"},attrs:{defaultCurrent:1,pageSize:e.formSearch.pageSize,total:e.formSearch.total,current:e.formSearch.current},on:{change:e.pagechange}})],1)],2)],1)],1),o("drawer-detail",{attrs:{show:e.drawer.detail,refresh:e.pagerefresh}}),o("drawer-verify",{attrs:{show:e.drawer.verify,refresh:e.pagerefresh}})],1)},r=[],n=(o("ac6a"),o("b775")),s=(o("61f7"),o("0dd8")),i=o("eb58"),c=[{title:"公司名称",dataIndex:"ComName"},{title:"产品线",scopedSlots:{customRender:"ComProductLine"}},{title:"操作",scopedSlots:{customRender:"action"}}],l={components:{DrawerDetail:s["default"],DrawerVerify:i["default"]},data:function(){return{advanced:!0,columns:c,visible:!1,formSearch:{pageSize:10,current:1,total:0,Keyword:""},form:this.$form.createForm(this),AFormImportRules:{iptInput:[{required:!0,message:"请输入"}]},dataSource:[],dataLeads:[],dataDetail:[],roles:[],drawer:{detail:{show:!1},verify:{show:!1}},modal:{exporttransfer:{show:!1}},ThrowReason:[],checkComId:"",checkLineId:"",userid:"",expandedRowKeys:[],department:[],departmentKey:"",showClaimLayer:!1,claimLineId:"",childLine:{expanded:"",record:""},Roles:!1,ComProductLine:{},user:{},productLines:[]}},mounted:function(){var e=this;e.init()},methods:{init:function(){var e=this;n["a"].post("/api/Dim/Enum/DimDecode",{Names:["User"]}).then(function(t){0===t.code?e.user=t.data.User:e.$message.error(t.msg)}).catch(function(e){console.log(e)}),n["a"].post("/api/Dim/Enum/GetEnum",{Names:["ComProductLine"]}).then(function(t){0===t.code?(t.data.ComProductLine.forEach(function(t,o){e.ComProductLine[t.key]=t.text}),e.productLines=t.data.ComProductLine,e.pageinit()):e.$message.error(t.msg)}).catch(function(e){console.log(e)})},pageinit:function(){this.pagechange(1)},pagerefresh:function(){this.pagechange(this.formSearch.current)},pagechange:function(e){var t=this;t.formSearch.current=e,t.$loading.open(),n["a"].post("/api/Other/ProductLineConfirm/List",t.formSearch).then(function(e){t.$loading.close(),0===e.code&&(t.dataSource=e.data.rows,t.roles=e.data.role,t.formSearch.total=e.count)}).catch(function(e){t.$loading.close(),console.log(e)})},detail:function(e){this.drawer.detail={show:!0,id:e.ComGuid,assetsdetail:e,user:this.user}},verify:function(e){this.drawer.verify={show:!0,id:e.ComGuid,assetsdetail:e,user:this.user,productLines:this.productLines}}}},d=l,u=o("2877"),m=Object(u["a"])(d,a,r,!1,null,null,null);t["default"]=m.exports},eb58:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a-drawer",{attrs:{message:"",visible:this.visible.show,maskClosable:!1,width:450,destroyOnClose:!0,closable:!1},on:{close:e.onClose}},[o("template",{slot:"title"},[e._v("\n    调整产品线\n  ")]),o("a-row",{staticStyle:{padding:"10px 0"},attrs:{gutter:24}}),o("a-form",{attrs:{form:e.form,layout:"horizontal"}},[o("a-row",{attrs:{gutter:11}},[o("a-col",{attrs:{md:24}},[o("a-form-item",{attrs:{label:"是否调整产品线",labelCol:{span:7},wrapperCol:{span:17}}},[o("a-select",{model:{value:e.postdata.Holded,callback:function(t){e.$set(e.postdata,"Holded",t)},expression:"postdata.Holded"}},[o("a-select-option",{key:0},[e._v("\n              调整为新产品线\n            ")]),o("a-select-option",{key:1},[e._v("\n              保留原产品线\n            ")])],1)],1),e.postdata.Holded?e._e():o("a-form-item",{attrs:{label:"新产品线",labelCol:{span:7},wrapperCol:{span:17}}},[o("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["ProductLineNew",{rules:e.AFormImportRules.iptSelect}],expression:"['ProductLineNew',{rules:AFormImportRules.iptSelect}]"}]},e._l(e.visible.productLines,function(t){return o("a-select-option",{key:t.key},[e._v("\n              "+e._s(t.text)+"\n            ")])}),1)],1)],1)],1)],1),o("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[o("a-button",{on:{click:e.onClose}},[e._v("取消")]),o("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],2)},r=[],n=o("b775"),s=(o("c32d"),{components:{},props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,id:{},assetsdetail:{},user:{}},form:this.$form.createForm(this),AFormImportRules:{note:[{required:!1,message:"请输入"}],iptSelect:[{required:!0,message:"请选择"}]},drawer:{},modal:{outchange:{show:!1}},FormalAttachment:[],notInDingTalk:!1,SpaceId:"",fescoMessage:{},postdata:{Holded:0}}},created:function(){var e=this;this.$watch("show",function(t,o){e.visible=t,e.visible.show&&e.init()})},methods:{init:function(){},onClose:function(){this.visible.show=!1,this.refresh&&this.refresh()},handleSubmit:function(e){var t=this;this.form.validateFields(function(e,o){if(!e){var a=o;a.ComProductLineGuid=t.visible.assetsdetail.ComProductLineGuid,a.Holded=0==t.postdata.Holded,n["a"].post("/api/Other/ProductLineConfirm/Save",a).then(function(e){var o=e;o.code>0?t.$message.error(o.msg):(t.onClose(),t.$message.success(o.msg))}).catch(function(e){console.log(e)})}})}}}),i=s,c=o("2877"),l=Object(c["a"])(i,a,r,!1,null,null,null);t["default"]=l.exports}}]);