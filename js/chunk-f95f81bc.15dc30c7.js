(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f95f81bc","chunk-5bc3a7f4","chunk-959e662a","chunk-2d231207","chunk-2d0b38ca"],{"0dd8":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{message:"",visible:this.visible.show,width:820,destroyOnClose:!0,closable:!1},on:{close:e.onClose}},[a("template",{slot:"title"},[e._v("\n    客户详情\n    "),0==e.assetsdetail.company.Opened&&e.visible.userid==e.assetsdetail.company.Userid?a("a-button",{staticStyle:{float:"right"},attrs:{size:"small",icon:"form"},on:{click:e.modify}},[e._v("修改")]):e._e(),0==e.assetsdetail.company.Opened&&e.visible.userid==e.assetsdetail.company.Userid?a("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"delete"},on:{click:e.throwCom}},[e._v("放弃")]):e._e(),0==e.assetsdetail.company.Opened&&e.visible.userid==e.assetsdetail.company.Userid?a("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"form"},on:{click:e.modifyComName}},[e._v("更名")]):e._e()],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("公司名称:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.company.ComName?e.assetsdetail.company.ComName:"无"))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[e._v("组织机构代码证:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.company.Code?e.assetsdetail.company.Code:"无"))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("网址:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.company.Url?e.assetsdetail.company.Url:"无"))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[e._v("城市:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.company.CityCode?e.visible.cityList[e.assetsdetail.company.CityCode]:"无"))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("地址:")]),a("a-col",{attrs:{span:18}},[e._v(e._s(e.assetsdetail.company.Address?e.assetsdetail.company.Address:"无"))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("客户来源:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.company.SourceText?e.assetsdetail.company.SourceText:"无"))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[e._v("客户性质:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.company.NatureText?e.assetsdetail.company.NatureText:"无"))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("客户规模:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.company.ScaleText?e.assetsdetail.company.ScaleText:"无"))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[e._v("行业:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.company.IndustryText?e.assetsdetail.company.IndustryText:"无"))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("归属人:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.company.UseridText?e.assetsdetail.company.UseridText:"无"))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[e._v("归属部门:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.company.DepIdText?e.assetsdetail.company.DepIdText:"无"))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("客户评级:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.rankText?e.rankText:"无"))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("备注:")]),a("a-col",{attrs:{span:20}},[e._v(e._s(e.assetsdetail.company.Remarks?e.assetsdetail.company.Remarks:"无"))])],1),a("a-row",{staticStyle:{padding:"10px 0"},attrs:{gutter:24}}),a("div",[a("a-tabs",{attrs:{type:"card",defaultActiveKey:"1"},on:{change:e.callback}},[a("a-tab-pane",{key:"1",attrs:{tab:"沟通记录"}},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{span:24}},[a("a-form-item",[a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(t){return e.connectAdd()}}},[e._v("添加")])],1)],1)],1),e.sourceListRecords.length>0?[a("a-timeline",[e._l(e.sourceListRecords,function(t){return a("a-timeline-item",{key:t.index},[a("p",[e._v(e._s(t.Contacttime)+" "),a("a-divider",{attrs:{type:"vertical"}}),e._v(" "+e._s(e.user[t.Userid])+"  "),a("a-divider",{attrs:{type:"vertical"}}),e._v(" "+e._s(e.ContactType[t.ContactType])+"沟通  "),a("a-divider",{attrs:{type:"vertical"}}),e._l(t.ProductLines,function(s,i){return[i==t.ProductLines.length-1?[a("span",{key:s},[e._v(e._s(e.ProductLine[s]))])]:[a("span",{key:s},[e._v(e._s(e.ProductLine[s]))]),e._v(",\n                ")]]})],2),a("p",[e._v("沟通内容："+e._s(t.ContactContent))]),1==t.ProcessUp?a("p",[e._v("附带销售阶段迁升")]):e._e()])}),a("a-timeline-item",[a("a",{directives:[{name:"show",rawName:"v-show",value:1==e.formSearch.next,expression:"formSearch.next==true"}],on:{click:e.loadMore}},[e._v("查看更多")]),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.formSearch.next,expression:"formSearch.next==false"}]},[a("a-icon",{attrs:{type:"smile"}}),e._v(" 我是有底线的")],1)])],2)]:e._e(),0==e.sourceListRecords.length?[a("div",[a("a-row",{staticStyle:{"text-align":"center"}},[a("a-icon",{attrs:{type:"smile"}}),e._v(" 暂无数据")],1)],1)]:e._e()],2),a("a-tab-pane",{key:"2",attrs:{tab:"销线",forceRender:""}},[a("a-table",{attrs:{columns:e.columnsLeads,dataSource:e.dataLeads,bordered:!1,pagination:!1,size:"middle",rowKey:"LeadsGuid"},scopedSlots:e._u([{key:"Status",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n            "+e._s(e.visible.ComLeadsStatus[s.Status])+"\n          ")])}},{key:"ProductLine",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n            "+e._s(e.visible.ProductLine[s.ProductLine])+"\n          ")])}},{key:"Userid",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n            "+e._s(e.visible.UserArray[s.Userid])+"\n          ")])}},{key:"action",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[a("a",{on:{click:function(t){return e.leadsDetail(s)}}},[e._v("详情")])])}}])})],1),a("a-tab-pane",{key:"3",attrs:{tab:"合同"}},[a("contractList",{attrs:{assetsdetail:e.assetsdetail.company,userid:e.visible.userid,componenttype:e.company},on:{refresh:e.init}})],1),a("a-tab-pane",{key:"4",attrs:{tab:"联系人"}},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{span:24}},[a("a-form-item",[a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(t){return e.linkAdd()}}},[e._v("添加")])],1)],1)],1),e.linkmanList.length>0?a("a-row",{attrs:{gutter:24}},e._l(e.linkmanList,function(t){return a("a-col",{key:t.ComContactGuid,attrs:{span:12}},[a("a-row",{staticClass:"linkman"},[a("a-col",{staticClass:"acol",attrs:{span:8}},[a("a-icon",{attrs:{type:"user"}}),e._v(" "+e._s(t.Linkman))],1),a("a-col",{staticClass:"acol",attrs:{span:16,align:"right"}},[a("a-icon",{attrs:{type:"phone"}}),e._v(e._s(t.Mobile)+" "),t.Tel&&t.Mobile?a("span",[e._v("/")]):e._e(),e._v(" "+e._s(t.Tel)+" "),t.Tel||t.Mobile?e._e():a("span",[e._v("没有联系方式")])],1),a("a-col",{staticClass:"acol",attrs:{span:10}},[e._v(e._s(t.ProductLineText))]),a("a-col",{staticClass:"acol",attrs:{span:14,align:"right"}},[e._v(e._s(t.Department)+" "),t.Department&&t.JobTitle?a("span",[e._v("/")]):e._e(),e._v(" "+e._s(t.JobTitle))]),a("a-col",{staticClass:"acol",attrs:{span:24}},[a("a",{on:{click:function(a){return e.linkDetail(t)}}},[e._v("详情")]),e._v(" | "),a("a",{on:{click:function(a){return e.linkModify(t)}}},[e._v("修改")]),e._v(" | "),a("a",{on:{click:function(a){return e.linkDelete(t)}}},[e._v("弃用")]),e._v(" | "),a("a",{on:{click:function(a){return e.connectAddLink(t)}}},[e._v("添加沟通记录")])])],1)],1)}),1):a("a-row",[a("a-col",{attrs:{align:"center"}},[a("a-icon",{attrs:{type:"smile"}}),e._v(" 暂无联系人")],1)],1),e.linkmanList.length>0?a("a-pagination",{staticStyle:{float:"right"},attrs:{defaultCurrent:1,pageSize:e.linkTable.pageSize,total:e.linkTable.total,current:e.linkTable.current},on:{change:e.linkmanListChange}}):e._e()],1),a("a-tab-pane",{key:"5",attrs:{tab:"所有产品线"}},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{span:24}},[a("a-form-item",[a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(t){return e.lineAdd()}}},[e._v("添加")])],1)],1)],1),a("a-table",{attrs:{columns:e.columns,dataSource:e.dataSource,bordered:!1,pagination:!1,size:"middle",rowKey:"ComProductLineGuid"},scopedSlots:e._u([{key:"operate",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[a("a-tag",{attrs:{color:1==s.Opened?"red":0==s.Cooperated?"blue":1==s.Cooperated?"green":""}},[1==s.Opened?[e._v("没人跟进")]:e._e(),0==s.Opened?[e._v(e._s(s.CooperatedText))]:e._e()],2),0==s.Opened?[a("a-tag",{attrs:{color:void 0!=s.ServiceDepId||void 0!=s.ServiceUserid?"green":"red"}},[0!=s.Opened||void 0==s.ServiceDepId&&void 0==s.ServiceUserid?e._e():[e._v("已交接")],0==s.Opened&&void 0==s.ServiceDepId&&void 0==s.ServiceUserid?[e._v("未交接")]:e._e()],2)]:e._e()],2)}},{key:"ProductLine",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n            "+e._s(e.ProductLine[s.ProductLine])+"\n          ")])}},{key:"CreateDate",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[1==s.Opened?[e._v(e._s(s.ThrowTime))]:e._e(),0==s.Opened?[e._v(e._s(s.PullTime))]:e._e()],2)}},{key:"Stage",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n            "+e._s(s.Stage?e.visible.SaleStage[s.Stage]:"")+"\n          ")])}},{key:"Userid",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n            "+e._s(e.visible.UserArray[s.Userid])+"\n          ")])}},{key:"XTUserid",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n            "+e._s(e.visible.UserArray[s.XTUserid])+"\n          ")])}},{key:"action",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[a("a",{on:{click:function(t){return e.lineDetail(s)}}},[e._v("详情")]),0==s.Opened?a("a-divider",{attrs:{type:"vertical"}}):e._e(),0==s.Opened?a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link"},[e._v("\n                更多\n                "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[0==s.Opened&&e.visible.userid==s.Userid&&null==s.ServiceDepId&&null==s.ServiceUserid?a("a-menu-item",{on:{click:function(t){return e.serviceFormDetail(s)}}},[e._v("服务交接")]):e._e(),a("a-menu-item",{on:{click:function(t){return e.linemodify(s)}}},[e._v("修改")]),a("a-menu-item",{on:{click:function(t){return e.throwLine(s)}}},[e._v("放弃")]),a("a-menu-item",{on:{click:function(t){return e.claimEmployee(s)}}},[e._v("协同人员")])],1)],1):e._e(),1==s.Opened?a("a-divider",{attrs:{type:"vertical"}}):e._e(),1==s.Opened?a("a",{on:{click:function(t){return e.claimLine(s)}}},[e._v("协同开发")]):e._e()],1)}}])})],1)],1)],1),a("a-modal",{attrs:{title:"协同开发",visible:e.showClaimLayer,"confirm-loading":e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-form",{attrs:{form:e.claimForm,layout:"horizontal"}},[a("div",[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:24}},[a("a-form-item",{attrs:{label:"所属部门",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-select",{model:{value:e.departmentKey,callback:function(t){e.departmentKey=t},expression:"departmentKey"}},e._l(e.department,function(t){return a("a-select-option",{key:t.code},[e._v("\n                      "+e._s(t.name)+"\n                    ")])}),1)],1),a("a-form-item",{attrs:{label:"预算",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Budget",{rules:e.AFormClaimRules.iptInputNumber}],expression:"['Budget',{rules:AFormClaimRules.iptInputNumber}]"}]})],1)],1)],1)],1)])],1),a("a-modal",{attrs:{title:"提示信息",visible:e.throwlinelayer,"confirm-loading":e.confirmLoading},on:{ok:e.throwhandleOk,cancel:e.throwhandleCancel}},[a("a-form",{attrs:{layout:"horizontal"}},[a("div",[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:24}},[a("a-form-item",{attrs:{label:"放弃原因",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-select",{model:{value:e.ThrowReasonKey,callback:function(t){e.ThrowReasonKey=t},expression:"ThrowReasonKey"}},e._l(e.ThrowReason,function(t){return a("a-select-option",{key:t.key},[e._v("\n                      "+e._s(t.text)+"\n                    ")])}),1)],1)],1)],1)],1)])],1),a("a-modal",{attrs:{title:"提示信息",visible:e.throwComlayer,"confirm-loading":e.confirmLoading},on:{ok:e.comhandleOk,cancel:e.comhandleCancel}},[a("a-form",{attrs:{layout:"horizontal"}},[a("div",[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:24}},[a("a-form-item",{attrs:{label:"放弃原因",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-select",{model:{value:e.ThrowComReasonKey,callback:function(t){e.ThrowComReasonKey=t},expression:"ThrowComReasonKey"}},e._l(e.ThrowReason,function(t){return a("a-select-option",{key:t.key},[e._v("\n                      "+e._s(t.text)+"\n                    ")])}),1)],1)],1)],1)],1)])],1),a("drawer-edit",{attrs:{show:e.drawer.edit,refresh:e.init}}),a("drawer-modify",{attrs:{show:e.drawer.modify,refresh:e.init}}),a("drawer-connect-add",{attrs:{show:e.drawer.connectAdd,refresh:e.init}}),a("drawer-leads-detail",{attrs:{show:e.drawer.leadsdetail,refresh:e.init}}),a("drawer-link-modify",{attrs:{show:e.drawer.linkmodify,refresh:e.initLink}}),a("drawer-link-detail",{attrs:{show:e.drawer.linkdetail,refresh:e.initLink}}),a("drawer-add-line",{attrs:{show:e.drawer.addline,assetsdetail:{},refresh:e.init}}),a("drawer-line-modify",{attrs:{show:e.drawer.linemodify,assetsdetail:{},refresh:e.init}}),a("drawer-line-detail",{attrs:{show:e.drawer.linedetail,serviceForm:e.serviceDoubleDetail,deleteLine:e.throwLine,assetsdetail:{},refresh:e.init}}),a("drawer-modify-comname",{attrs:{show:e.drawer.modifycomname,assetsdetail:{},refresh:e.init}}),a("modal-choose-employee",{attrs:{show:e.modal.employee,refresh:e.init}})],2)},i=[],o=(a("ac6a"),a("b775")),r=a("61f7"),n=a("7e7e"),l=a("eee6"),c=(a("c32d"),a("51d9")),d=a("f228"),u=a("51c1"),m=a("3443"),p=a("e830"),h=a("6e63"),f=a("bbe5"),v=a("1663"),y=a("2b47"),g=a("3ffd"),w=[{title:"状态",scopedSlots:{customRender:"operate"},width:150},{title:"产品线",scopedSlots:{customRender:"ProductLine"},width:100},{title:"销售姓名",scopedSlots:{customRender:"Userid"},width:90},{title:"协同人员",scopedSlots:{customRender:"XTUserid"},width:130},{title:"入库时间",scopedSlots:{customRender:"CreateDate"}},{title:"销售阶段",scopedSlots:{customRender:"Stage"}},{title:"操作",scopedSlots:{customRender:"action"}}],b=[{title:"产品线",dataIndex:"ProductLineText",width:100},{title:"销售姓名",dataIndex:"UseridText",width:90},{title:"沟通方式",dataIndex:"ContactTypeText",width:90},{title:"沟通时间",dataIndex:"Contacttime",width:210},{title:"操作",scopedSlots:{customRender:"action"}}],C=[{title:"状态",scopedSlots:{customRender:"Status"}},{title:"产品线",scopedSlots:{customRender:"ProductLine"}},{title:"提供人",scopedSlots:{customRender:"Userid"}},{title:"操作",scopedSlots:{customRender:"action"}}],S={components:{DrawerEdit:n["default"],DrawerModify:l["default"],DrawerConnectAdd:c["default"],DrawerLeadsDetail:d["default"],DrawerLinkModify:u["default"],DrawerLinkDetail:m["default"],DrawerAddLine:p["default"],DrawerLineModify:h["default"],DrawerLineDetail:f["default"],contractList:v["default"],DrawerModifyComname:y["default"],ModalChooseEmployee:g["default"]},props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null},deleteCustomer:{type:Function,default:null},serviceForm:{type:Function,default:null}},data:function(){return{visible:{show:!1,id:{},listText:{},userid:"",UserArray:{},DeptArray:{},cityList:{},SaleStage:{},ComLeadsStatus:{},ProductLine:{}},company:"company",showClaimLayer:!1,columns:w,columnsLeads:C,columnsconnect:b,formSearch:{pageSize:5,current:1,total:0,next:!0},linkTable:{pageSize:4,current:1,total:0},dataSource:[],dataLeads:[],sourceListRecords:[],linkmanList:[],assetsdetail:{company:{},line:{},leads:{},rank:{}},enableeditguid:"",form:this.$form.createForm(this),claimForm:this.$form.createForm(this),AFormClaimRules:{iptInputNumber:[{required:!0,message:"请输入数字"},{validator:this.ConfirmNumber}]},drawer:{edit:{show:!1},modify:{show:!1},connectAdd:{show:!1},leadsdetail:{show:!1},linkmodify:{show:!1},linkdetail:{show:!1},addline:{show:!1},linemodify:{show:!1},linedetail:{show:!1},modifycomname:{show:!1}},modal:{outchange:{show:!1},employee:{show:!1}},confirmLoading:!1,department:[],departmentKey:"",checkLineId:"",throwlinelayer:!1,ThrowReason:[],ThrowReasonKey:"",throwComlayer:!1,checkComId:"",ThrowComReasonKey:"",ContactType:{},ProductLine:{},user:{},chooseRecord:{},invoiceDetail:{},comRankObject:{},rankText:""}},created:function(){var e=this;this.$watch("show",function(t,a){e.visible=t,e.visible.show&&e.init()})},methods:{init:function(){var e=this;o["a"].post("/api/Crm/Com/Detail",{ComGuid:e.show.id}).then(function(t){0===t.code&&(e.assetsdetail=t.data,e.dataSource=t.data.lines,e.dataLeads=t.data.leads,e.sourceListRecords=[],e.formSearch.next=!0,e.visible.userid=t.data.Operator.Userid,e.pagechange(1),e.rank())}).catch(function(e){console.log(e)}),o["a"].post("/api/Dim/Enum/GetEnum",{Names:["ComProductLine","ContactType","ComRankNormal"]}).then(function(t){0===t.code?(t.data.ComProductLine.forEach(function(t,a){e.ProductLine[t.key]=t.text}),t.data.ContactType.forEach(function(t,a){e.ContactType[t.key]=t.text}),t.data.ComRankNormal.forEach(function(t,a){e.comRankObject[t.key]=t.text})):e.$message.error(t.msg)}).catch(function(e){console.log(e)}),o["a"].post("/api/Dim/Enum/DimDecode",{Names:["User"]}).then(function(t){0===t.code?e.user=t.data.User:e.$message.error(t.msg)}).catch(function(e){console.log(e)})},onClose:function(){this.visible.show=!1,this.dataSource=[],this.sourceListRecords=[],this.formSearch.next=!0,this.assetsdetail={company:{},line:{},leads:{},rank:{}},this.invoiceDetail={},this.refresh&&this.refresh()},rank:function(){var e=this;o["a"].post("/api/Crm/ComRank/Last",{ComGuid:e.assetsdetail.company.ComGuid}).then(function(t){0===t.code&&(t.data?e.rankText=e.comRankObject[t.data.Rank]:e.rankText="")}).catch(function(e){console.log(e)})},detail:function(e){this.drawer.detail={show:!0,id:e.SBOrderItemGuid}},edit:function(){this.drawer.edit={show:!0,id:this.show.id,assetsdetail:this.assetsdetail}},modify:function(){this.assetsdetail.company.cityname=this.visible.cityList[this.assetsdetail.company.CityCode],this.drawer.modify={show:!0,id:this.show.id,assetsdetail:this.assetsdetail,cityList:this.visible.cityList}},throwLine:function(e){var t=this;t.throwlinelayer=!0,t.chooseRecord=e,t.checkLineId=e.ComProductLineGuid,o["a"].post("/api/Dim/Enum/GetEnum",{Names:["ThrowReason"]}).then(function(e){0===e.code?t.ThrowReason=e.data.ThrowReason:t.$message.error(e.msg)}).catch(function(e){console.log(e)})},throwhandleOk:function(e){var t=this;""===t.ThrowReasonKey?t.$message.error("请选择放弃原因！"):o["a"].post("/api/Crm/ProductLine/Throw",{ComProductLineGuid:t.checkLineId,ThrowReason:t.ThrowReasonKey}).then(function(e){0===e.code?(t.throwlinelayer=!1,t.drawer.linedetail={show:!1,assetsdetail:t.chooseRecord},t.$message.success(e.msg),t.init(),t.ThrowReasonKey="",t.checkLineId=""):t.$message.error(e.msg)}).catch(function(e){console.log(e)})},throwhandleCancel:function(e){this.throwlinelayer=!1,this.checkLineId=""},throwCom:function(e){var t=this;e=t.assetsdetail.company,t.throwComlayer=!0,t.checkComId=e.ComGuid,o["a"].post("/api/Dim/Enum/GetEnum",{Names:["ThrowReason"]}).then(function(e){0===e.code&&(t.ThrowReason=e.data.ThrowReason)}).catch(function(e){console.log(e)})},comhandleOk:function(e){var t=this;""===t.ThrowComReasonKey?t.$message.error("请选择放弃原因！"):o["a"].post("/api/Crm/Com/Throw",{ComGuid:t.checkComId,ThrowReason:t.ThrowComReasonKey}).then(function(e){0===e.code&&(t.throwComlayer=!1,t.refresh(),t.ThrowComReasonKey="",t.checkComId="",t.$message.success(e.msg),t.onClose())}).catch(function(e){console.log(e)})},comhandleCancel:function(e){this.throwComlayer=!1,this.checkComId=""},outchange:function(e){this.modal.outchange={show:!0,id:e.BalanceGuid,balance:e}},callback:function(e){4==e&&this.linkmanListChange(1)},loadMore:function(){this.formSearch.current=this.formSearch.current+1,this.pagechange(this.formSearch.current)},pagechange:function(e){var t=this,a=t.formSearch;t.formSearch.current=e,a.ComGuid=t.assetsdetail.company.ComGuid,o["a"].post("/api/Crm/Contact/ListRecords",a).then(function(e){0===e.code&&(t.sourceListRecords=t.sourceListRecords.concat(e.data.rows),t.formSearch.total=e.count,e.data.rows.length<t.formSearch.pageSize&&(t.formSearch.next=!1))}).catch(function(e){console.log(e)})},initLink:function(){this.linkmanListChange(1)},linkmanListChange:function(e){var t=this,a=t.linkTable;t.linkTable.current=e,a.ComGuid=t.assetsdetail.company.ComGuid,o["a"].post("/api/Crm/Contact/List",a).then(function(e){0===e.code&&(t.linkmanList=e.data.rows,t.linkTable.total=e.count)}).catch(function(e){console.log(e)})},connectAdd:function(){this.drawer.connectAdd={show:!0,assetsdetail:this.assetsdetail,connectdetail:{}}},connectAddLink:function(e){this.drawer.connectAdd={show:!0,assetsdetail:this.assetsdetail,connectdetail:e}},leadsDetail:function(e){this.drawer.leadsdetail={show:!0,id:e.LeadsGuid,ComProductLine:this.visible.ProductLine,cityList:this.visible.cityList,userArray:this.visible.UserArray,ComLeadsStatus:this.visible.ComLeadsStatus}},linkAdd:function(){this.drawer.linkmodify={show:!0,assetsdetail:this.assetsdetail,type:"add",title:"新增联系人"}},linkModify:function(e){this.drawer.linkmodify={show:!0,assetsdetail:e,type:"modify",title:"修改联系人"}},linkDetail:function(e){this.drawer.linkdetail={show:!0,assetsdetail:e}},linkDelete:function(e){var t=this;t.$confirm({title:"确定弃用该联系人?",content:"点击确定弃用联系人。",onOk:function(){o["a"].post("/api/Crm/Contact/Throw",{ComContactGuid:e.ComContactGuid}).then(function(e){0===e.code?(t.$message.success(e.msg),t.initLink()):t.$message.error(e.msg)}).catch(function(e){console.log(e)})},onCancel:function(){}})},claimLine:function(e){var t=this;t.showClaimLayer=!0,o["a"].get("/api/Org/Department/DepsByCurUser").then(function(e){0===e.code&&(t.department=e.data)}).catch(function(e){console.log(e)}),t.checkLineId=e.ComProductLineGuid},handleOk:function(e){var t=this;t.departmentKey?t.claimForm.validateFields(function(e,a){console.log(a),e||o["a"].post("/api/Crm/ProductLine/Pick",{ComProductLineGuid:t.checkLineId,DepId:t.departmentKey,Budget:a.Budget}).then(function(e){0===e.code&&(t.showClaimLayer=!1,t.$message.success(e.msg),t.departmentKey="",t.checkLineId="",t.init()),e.code>0&&t.$message.error(e.msg)}).catch(function(e){console.log(e)})}):t.$message.error("请选择你的所属部门！")},handleCancel:function(e){this.showClaimLayer=!1,this.checkLineId=""},lineAdd:function(){this.drawer.addline={show:!0,assetsdetail:this.assetsdetail}},linemodify:function(e){this.drawer.linemodify={show:!0,assetsdetail:e}},lineDetail:function(e){this.drawer.linedetail={show:!0,assetsdetail:e,userid:this.visible.userid,UserArray:this.visible.UserArray,DeptArray:this.visible.DeptArray,SaleStage:this.visible.SaleStage}},serviceFormDetail:function(e){this.serviceForm(e,this.init)},serviceDoubleDetail:function(e,t){this.serviceForm(e,t)},modifyComName:function(){this.drawer.modifycomname={show:!0,assetsdetail:this.visible.listText}},ConfirmNumber:function(e,t,a){!t||Object(r["c"])(t)?a():a("请输入数字！")},claimEmployee:function(e){this.modal.employee={show:!0,detail:e}}}},_=S,k=(a("aa1e"),a("2877")),L=Object(k["a"])(_,s,i,!1,null,null,null);t["default"]=L.exports},"299f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"新建",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:400}},[a("a-card",{attrs:{bordered:!1}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"公司名称",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ComName",{initialValue:e.visible.assetsdetail.ComName,rules:e.AFormImportRules.iptInput}],expression:"['ComName',{initialValue:visible.assetsdetail.ComName,rules:AFormImportRules.iptInput}]"}]})],1),a("a-form-item",{attrs:{label:"产品线",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["ProductLine",{initialValue:e.visible.assetsdetail.ProductLine,rules:e.AFormImportRules.iptSelect}],expression:"['ProductLine',{initialValue:visible.assetsdetail.ProductLine,rules:AFormImportRules.iptSelect }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.ComProductLine,function(t){return a("a-select-option",{key:t.key},[e._v(e._s(t.text))])}),1)],1),a("a-form-item",{attrs:{label:"城市",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cityname",{rules:e.AFormImportRules.iptInput}],expression:"['cityname',{rules:AFormImportRules.iptInput}]"}],attrs:{readOnly:"",placeholder:"请输入"},on:{click:e.chooseArea}})],1),a("a-form-item",{attrs:{label:"联系人",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Linkman",{initialValue:e.visible.assetsdetail.Linkman,rules:e.AFormImportRules.iptInput}],expression:"['Linkman',{initialValue:visible.assetsdetail.Linkman,rules:AFormImportRules.iptInput}]"}]})],1),a("a-form-item",{attrs:{label:"联系电话",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["LinkTel",{initialValue:e.visible.assetsdetail.LinkTel,rules:e.AFormImportRules.Mobile}],expression:"['LinkTel',{initialValue:visible.assetsdetail.LinkTel,rules:AFormImportRules.Mobile}]"}]})],1),a("a-form-item",{attrs:{label:"备注",labelCol:{span:6},wrapperCol:{span:16}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks",{initialValue:e.visible.assetsdetail.Remarks,rules:e.AFormImportRules.Remarks}],expression:"['Remarks',{initialValue:visible.assetsdetail.Remarks,rules:AFormImportRules.Remarks}]"}],attrs:{placeholder:"备注",rows:4}})],1)],1)],1),a("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")]),null==e.visible.id?a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handleSubmit("next")}}},[e._v("提交并继续录入")]):e._e()],1),a("chooseArea",{attrs:{openDrawer:e.drawer.area.show},on:{Closearea:e.areaClose,Surearea:e.areaSure}})],1)},i=[],o=(a("7f7f"),a("b775")),r=a("61f7"),n=a("1269"),l={components:{chooseArea:n["a"]},props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,assetsdetail:{AssetsCode:""}},dim:{Brand:[]},DepList:[],form:this.$form.createForm(this),AFormImportRules:{iptDate:[{required:!0,message:"请选择"}],iptInput:[{required:!0,message:"请输入"}],iptSelect:[{required:!0,message:"请选择"}],Remarks:[{required:!0,message:"备注"}],Mobile:[{required:!0,message:"请输入手机号"}]},drawer:{area:{show:!1}},city:{}}},watch:{show:function(e,t){var a=this;null==a.visible.assetsdetail&&(a.visible.assetsdetail={AssetsCode:""}),null!=e.assetsdetail.PurchaseDate&&(e.assetsdetail.PurchaseDate=moment(e.assetsdetail.PurchaseDate)),a.visible=e,e.show&&a.init()}},methods:{onClose:function(){this.visible.show=!1,this.city={},this.refresh&&this.refresh(),this.form.resetFields()},init:function(){var e=this;o["a"].post("/api/Dim/Enum/GetEnum",{Names:["ComProductLine"]}).then(function(t){0===t.code&&(e.dim.ComProductLine=t.data.ComProductLine)}).catch(function(e){console.log(e)}),o["a"].get("/api/Org/Department/DepsByCurUser").then(function(t){0===t.code&&(e.DepList=t.data)}).catch(function(e){console.log(e)})},handleSubmit:function(e){var t=this;this.form.validateFields(function(a,s){if(!a){var i=s;i.LeadsGuid=t.visible.id,i.CityCode=t.city.value,t.$loading.open(),o["a"].post("/api/Leads/Com/Save",i).then(function(a){t.$loading.close();var s=a;s.code>0?t.$message.error(s.msg):("next"===e?(t.form.resetFields(),t.refresh&&t.refresh()):t.onClose(),t.$message.success(s.msg))}).catch(function(e){t.$loading.close(),console.log(e)})}})},ConfirmMobile:function(e,t,a){!t||Object(r["d"])(t)?a():a("手机号码不符合规则！")},chooseArea:function(){this.drawer.area={show:!0}},areaClose:function(e){this.drawer.area={show:!1}},areaSure:function(e){this.city=e,this.drawer.area={show:!1},this.form.setFieldsValue({cityname:e.name})}}},c=l,d=a("2877"),u=Object(d["a"])(c,s,i,!1,null,null,null);t["default"]=u.exports},"2b47":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"更名申请",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:450}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"公司id",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ComGuid",{initialValue:e.visible.assetsdetail.ComGuid,rules:e.AFormImportRules.iptInput}],expression:"['ComGuid',{initialValue:visible.assetsdetail.ComGuid,rules:AFormImportRules.iptInput}]"}],attrs:{disabled:!0}})],1),a("a-form-item",{attrs:{label:"客户新名称",labelCol:{span:6},wrapperCol:{span:15}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ComNameNew",{initialValue:e.visible.assetsdetail.ComName,rules:e.AFormImportRules.iptInputReq}],expression:"['ComNameNew',{initialValue:visible.assetsdetail.ComName,rules:AFormImportRules.iptInputReq}]"}]})],1),a("a-form-item",{attrs:{label:"情况说明",labelCol:{span:6},wrapperCol:{span:15}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarks"],expression:"['Remarks']"}],attrs:{placeholder:"情况说明",rows:4}})],1),a("a-form-item",{attrs:{label:"证明附件",labelCol:{span:6},wrapperCol:{span:15}}},[a("a-button",{attrs:{disabled:1==e.notInDingTalk&&"disabled"},on:{click:e.uploadFile}},[a("a-icon",{attrs:{type:"upload"}}),e._v(" 上传附件")],1),1==e.notInDingTalk?a("div",[a("a-tag",{attrs:{color:"red"}},[e._v("此浏览器不支持上传，请到钉钉应用界面上传附件！")])],1):e._e(),0==e.notInDingTalk?e._l(e.uploadArry,function(t){return a("div",{key:t.fileId},[a("a-icon",{attrs:{type:"file-text"}}),e._v(" "+e._s(t.fileName)+" "),a("a-icon",{staticStyle:{cursor:"pointer",color:"#1890ff"},attrs:{type:"delete"},on:{click:function(a){return e.deleteFile(t.fileId)}}}),e._v("  "),a("a-icon",{staticStyle:{cursor:"pointer",color:"#1890ff"},attrs:{type:"file-search"},on:{click:function(a){return e.preview(t)}}})],1)}):e._e()],2)],1),a("a-row",{staticStyle:{padding:"10px 0"},attrs:{gutter:24}}),a("div",{style:{position:"absolute",bottom:"0",right:"0",width:"100%",padding:"10px 16px",borderTop:"1px solid #e8e8e8",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},i=[],o=(a("ac6a"),a("6b54"),a("b775")),r={components:{},props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,assetsdetail:{}},form:this.$form.createForm(this),AFormImportRules:{iptInputReq:[{required:!0,message:"请输入"}]},notInDingTalk:!1,uploadArry:[],SpaceId:"",SpaceIdNormal:"",SpaceIdApply:""}},watch:{show:function(e,t){var a=this;a.visible=e,null==a.visible.assetsdetail&&(a.visible.assetsdetail={ComGuid:""}),e.show&&a.init()}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.uploadArry=[],this.form.resetFields()},init:function(){var e=this;o["a"].post("/api/DingTalk/GrantCustomSpaceAdd",{domain:"ComRename"}).then(function(e){}).catch(function(e){console.log(e)}),o["a"].post("/api/DingTalk/GetCustomSpace",{Domain:"ComRename"}).then(function(t){var a=t,s=a.data.Spaceid;0===a.code&&(e.SpaceIdNormal=s)}).catch(function(e){console.log(e)}),o["a"].get("/api/DingTalk/CspaceInfo").then(function(t){var a=t,s=a.data.SpaceId;0===a.code&&(e.SpaceIdApply=s)}).catch(function(e){console.log(e)}),o["a"].post("/api/DingTalk/GetSign",{}).then(function(t){e.fescoMessage=t.data,dd.config({agentId:t.data.AgentId,corpId:t.data.corpId,timeStamp:t.data.timeStamp,nonceStr:t.data.nonceStr,signature:t.data.signature,type:0,jsApiList:["biz.cspace.saveFile","biz.util.uploadAttachment","biz.cspace.preview","biz.cspace.chooseSpaceDir"]})}).catch(function(e){console.log(e)}),"notInDingTalk"==dd.env.platform&&(e.notInDingTalk=!0)},handleSubmit:function(e){var t=this;this.form.validateFields(function(e,a){if(!e){if(0==t.uploadArry.length)return void t.$message.error("证明附件不能为空！");var s={ComGuid:a.ComGuid,ComNameNew:a.ComNameNew,FormalAttachment:t.uploadArry,Remarks:a.Remarks};t.$loading.open(),o["a"].post("/api/Crm/Com/Rename",s).then(function(e){t.$loading.close();var a=e;a.code>0?t.$message.error(a.msg):(t.onClose(),t.$message.success(a.msg))}).catch(function(e){t.$loading.close(),console.log(e)})}})},uploadFile:function(){var e=this,t="";dd.ready(function(){var a=moment("2020-12-09").format("YYYY-MM-DD"),s=new Date;s=moment(s).format("YYYY-MM-DD");var i=moment(s).diff(a,"day");console.log(i),t=i<0?e.SpaceIdApply:e.SpaceIdNormal,console.log(t),dd.biz.util.uploadAttachment({image:{multiple:!0,compress:!1,max:9,spaceId:t.toString()},space:{corpId:e.fescoMessage.corpId,spaceId:t.toString(),max:9},file:{spaceId:t.toString(),max:9},types:["file"],onSuccess:function(t){e.uploadArry=e.uploadArry.concat(t.data),o["a"].post("/api/DingTalk/GrantCustomSpaceDownload",{Domain:"ComRename",Files:e.uploadArry}).then(function(e){}).catch(function(e){console.log(e)})},onFail:function(e){}})})},preview:function(e){console.log(e);var t=this,a="";dd.ready(function(){var s=moment("2020-12-09").format("YYYY-MM-DD"),i=new Date;i=moment(i).format("YYYY-MM-DD");var o=moment(i).diff(s,"day");console.log(o),a=o<0?t.SpaceIdApply:t.SpaceIdNormal,console.log(a),dd.biz.cspace.preview({corpId:t.fescoMessage.corpId,spaceId:a.toString(),fileId:e.fileId,fileName:e.fileName,fileSize:e.fileSize,fileType:e.fileType,onSuccess:function(){},onFail:function(e){}})})},deleteFile:function(e){var t=this;this.uploadArry.forEach(function(a,s){a.fileId===e&&t.uploadArry.splice(s,1)})}}},n=r,l=a("2877"),c=Object(l["a"])(n,s,i,!1,null,null,null);t["default"]=c.exports},"56cb":function(e,t,a){},"56d2":function(e,t,a){},a670:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-layout",[a("a-layout-content",[a("a-card",{attrs:{bordered:!1}},[a("div",[a("a-form",{attrs:{form:e.form,layout:"horizontal"}},[a("div",{class:e.advanced?null:"fold"},[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:6}},[a("a-form-item",{attrs:{label:"公司名称",labelCol:{span:6},wrapperCol:{span:17,offset:1}}},[a("a-input",{attrs:{placeholder:"请输入"},model:{value:e.formSearch.Keyword,callback:function(t){e.$set(e.formSearch,"Keyword",t)},expression:"formSearch.Keyword"}})],1)],1),e.roles87?a("a-col",{attrs:{md:2}},[a("a-form-item",{attrs:{label:"",labelCol:{span:0},wrapperCol:{span:24}}},[a("a-select",{on:{change:e.rolesChange},model:{value:e.rolesType,callback:function(t){e.rolesType=t},expression:"rolesType"}},e._l(e.roleList,function(t){return a("a-select-option",{key:t.code},[e._v(e._s(t.name))])}),1)],1)],1):e._e(),"1"==e.rolesType?a("a-col",{attrs:{md:3}},[a("a-form-item",{attrs:{label:"状态",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-select",{on:{change:e.jobStatusChange},model:{value:e.Leaved,callback:function(t){e.Leaved=t},expression:"Leaved"}},[a("a-select-option",{key:"0"},[e._v("在职")]),a("a-select-option",{key:"1"},[e._v("离职")])],1)],1)],1):e._e(),"1"==e.rolesType?a("a-col",{attrs:{md:4}},[a("a-form-item",{attrs:{label:"部门",labelCol:{span:6},wrapperCol:{span:18}}},[a("a-cascader",{directives:[{name:"decorator",rawName:"v-decorator",value:["DepId",{rules:e.AFormImportRules.iptSelectReq}],expression:"['DepId',{rules:AFormImportRules.iptSelectReq}]"}],attrs:{options:e.options,loadData:e.loadData,changeOnSelect:"",placeholder:"请选择分配部门"},on:{change:e.onChange}})],1)],1):e._e(),"1"==e.rolesType?a("a-col",{attrs:{md:3}},[a("a-form-item",{attrs:{label:"人员",labelCol:{span:8},wrapperCol:{span:16}}},[a("a-select",{model:{value:e.SaleUserid,callback:function(t){e.SaleUserid=t},expression:"SaleUserid"}},e._l(e.UserList,function(t){return a("a-select-option",{key:t.code},[e._v(e._s(t.name))])}),1)],1)],1):e._e(),a("a-col",{attrs:{md:6}},[a("a-form-item",{attrs:{label:"城市",labelCol:{span:6},wrapperCol:{span:17,offset:1}}},[a("a-input",{attrs:{readOnly:"",placeholder:"请点击选择"},on:{click:e.chooseArea},model:{value:e.formSearch.cityname,callback:function(t){e.$set(e.formSearch,"cityname",t)},expression:"formSearch.cityname"}})],1)],1),a("a-col",{attrs:{md:8}},[a("a-form-item",{attrs:{label:"行业",labelCol:{span:4},wrapperCol:{span:19,offset:1}}},[a("a-select",{attrs:{placeholder:"请选择",allowClear:!0},model:{value:e.formSearch.Industry,callback:function(t){e.$set(e.formSearch,"Industry",t)},expression:"formSearch.Industry"}},e._l(e.Industry,function(t){return a("a-select-option",{key:t.key},[e._v(e._s(t.text))])}),1)],1)],1),a("a-col",{attrs:{span:4}},[a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:e.initPage}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.edit({key:null})}}},[e._v("添加")])],1)],1)],1)],1)])],1),a("a-table",{attrs:{columns:e.columns,dataSource:e.dataSource,pagination:!1,rowKey:"ComGuid",expandedRowKeys:e.expandedRowKeys},on:{expand:e.childLineList},scopedSlots:e._u([{key:"CreatDate",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[""!=s.PullTime?[e._v(e._s(s.PullTime))]:e._e(),""==s.PullTime?[e._v(e._s(s.CreatDate))]:e._e()],2)}},{key:"isOperate",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[a("a-tag",{attrs:{color:1==s.Opened?"red":0==s.Cooperated?"blue":1==s.Cooperated?"green":""}},[1==s.Opened?[e._v("公海")]:e._e(),0==s.Opened?[e._v(e._s(s.CooperatedText))]:e._e()],2)],1)}},{key:"CityCode",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n          "+e._s(e.cityList[s.CityCode])+"\n        ")])}},{key:"action",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[a("a",{on:{click:function(t){return e.detail(s)}}},[e._v("详情")]),e.userid===s.Userid?a("a-divider",{attrs:{type:"vertical"}}):e._e(),e.userid===s.Userid?a("a",{on:{click:function(t){return e.throwCom(s)}}},[e._v("放弃")]):e._e(),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.lineAdd(s)}}},[e._v("添加产品线")]),e.roles87?a("a-divider",{attrs:{type:"vertical"}}):e._e(),e.roles87?a("a",{on:{click:function(t){return e.mixCom(s)}}},[e._v("调配")]):e._e()],1)}}])},[a("a-table",{attrs:{slot:"expandedRowRender",rowKey:"ComProductLineGuid",columns:e.columnsLines,"data-source":e.dataLeads,pagination:!1},slot:"expandedRowRender",scopedSlots:e._u([{key:"operate",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[a("a-tag",{attrs:{color:1==s.Opened?"red":0==s.Cooperated?"blue":1==s.Cooperated?"green":""}},[1==s.Opened?[e._v("没人跟进")]:e._e(),0==s.Opened?[e._v(e._s(s.CooperatedText))]:e._e()],2)],1)}},{key:"action",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[0!=s.Opened||e.userid!=s.Userid&&e.userid!=s.XTUserid?e._e():a("a",{on:{click:function(t){return e.lineDetail(s)}}},[e._v("详情")]),0!=s.Opened||e.userid!=s.Userid&&e.userid!=s.XTUserid?e._e():a("a-divider",{attrs:{type:"vertical"}}),0!=s.Opened||e.userid!=s.Userid&&e.userid!=s.XTUserid?e._e():a("a",{on:{click:function(t){return e.linemodify(s)}}},[e._v("修改")]),0!=s.Opened||e.userid!=s.Userid&&e.userid!=s.XTUserid?e._e():a("a-divider",{attrs:{type:"vertical"}}),0!=s.Opened||e.userid!=s.Userid&&e.userid!=s.XTUserid?e._e():a("a",{on:{click:function(t){return e.throwLine(s)}}},[e._v("放弃")]),0!=s.Opened||e.userid!=s.Userid&&e.userid!=s.XTUserid||null!=s.ServiceDepId||null!=s.ServiceUserid?e._e():a("a-divider",{attrs:{type:"vertical"}}),0!=s.Opened||e.userid!=s.Userid&&e.userid!=s.XTUserid||null!=s.ServiceDepId||null!=s.ServiceUserid?e._e():a("a",{on:{click:function(t){return e.handOverForm(s)}}},[e._v("服务交接")]),1==s.Opened?a("a",{on:{click:function(t){return e.claimLine(s)}}},[e._v("协同开发")]):e._e(),0!=s.Opened||e.userid!=s.Userid&&e.userid!=s.XTUserid?e._e():a("a-divider",{attrs:{type:"vertical"}}),0!=s.Opened||e.userid!=s.Userid&&e.userid!=s.XTUserid?e._e():a("a",{on:{click:function(t){return e.claimEmployee(s)}}},[e._v("协同人员")])],1)}},{key:"CreateDate",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[1==s.Opened?[e._v(e._s(s.ThrowTime))]:e._e(),0==s.Opened?[e._v(e._s(s.PullTime))]:e._e()],2)}},{key:"ServiceUserid",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n            "+e._s(e.UserArray[s.ServiceUserid])+"\n          ")])}},{key:"XTUserid",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n            "+e._s(e.UserArray[s.XTUserid])+"\n          ")])}},{key:"Stage",fn:function(t,s){return a("span",{staticStyle:{"text-align":"right"}},[e._v("\n            "+e._s(e.SaleStage[s.Stage])+"\n          ")])}}])}),a("template",{slot:"footer"},[a("a-pagination",{staticStyle:{float:"right"},attrs:{defaultCurrent:1,pageSize:e.formSearch.pageSize,total:e.formSearch.total,current:e.formSearch.current},on:{change:e.pagechange}})],1)],2),a("a-modal",{attrs:{title:"提示信息",visible:e.visible,"confirm-loading":e.confirmLoading},on:{ok:e.comhandleOk,cancel:e.comhandleCancel}},[a("a-form",{attrs:{layout:"horizontal"}},[a("div",[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:24}},[a("a-form-item",{attrs:{label:"放弃原因",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-select",{model:{value:e.ThrowComReasonKey,callback:function(t){e.ThrowComReasonKey=t},expression:"ThrowComReasonKey"}},e._l(e.ThrowReason,function(t){return a("a-select-option",{key:t.key},[e._v("\n                      "+e._s(t.text)+"\n                    ")])}),1)],1)],1)],1)],1)])],1),a("a-modal",{attrs:{title:"提示信息",visible:e.throwlinelayer,"confirm-loading":e.confirmLoading},on:{ok:e.linehandleOk,cancel:e.linehandleCancel}},[a("a-form",{attrs:{layout:"horizontal"}},[a("div",[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:24}},[a("a-form-item",{attrs:{label:"放弃原因",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-select",{model:{value:e.ThrowLineReasonKey,callback:function(t){e.ThrowLineReasonKey=t},expression:"ThrowLineReasonKey"}},e._l(e.ThrowReason,function(t){return a("a-select-option",{key:t.key},[e._v("\n                      "+e._s(t.text)+"\n                    ")])}),1)],1)],1)],1)],1)])],1),a("a-modal",{attrs:{title:"协同开发",visible:e.showClaimLayer,"confirm-loading":e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-form",{attrs:{form:e.claimForm,layout:"horizontal"}},[a("div",[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:24}},[a("a-form-item",{attrs:{label:"所属部门",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-select",{model:{value:e.departmentKey,callback:function(t){e.departmentKey=t},expression:"departmentKey"}},e._l(e.department,function(t){return a("a-select-option",{key:t.code},[e._v("\n                      "+e._s(t.name)+"\n                    ")])}),1)],1),a("a-form-item",{attrs:{label:"预算",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Budget",{rules:e.AFormClaimRules.iptInputNumber}],expression:"['Budget',{rules:AFormClaimRules.iptInputNumber}]"}]})],1)],1)],1)],1)])],1),a("a-modal",{attrs:{title:"服务交接",visible:e.showHandoverLayer,"confirm-loading":e.confirmLoading},on:{ok:e.handOverOk,cancel:e.handleOverCancel}},[a("a-form",{attrs:{layout:"horizontal"}},[a("div",[a("a-row",{attrs:{gutter:10}},[a("a-col",{attrs:{md:24}},[a("a-form-item",{attrs:{label:"部门",labelCol:{span:6},wrapperCol:{span:18}}},[a("a-cascader",{attrs:{options:e.allOptions,loadData:e.loadDataAll,changeOnSelect:"",placeholder:"请选择交接部门"},on:{change:e.onChangeAll},model:{value:e.handover.DepId,callback:function(t){e.$set(e.handover,"DepId",t)},expression:"handover.DepId"}})],1),a("a-form-item",{attrs:{label:"人员",labelCol:{span:6},wrapperCol:{span:18}}},[a("a-select",{model:{value:e.handover.Userid,callback:function(t){e.$set(e.handover,"Userid",t)},expression:"handover.Userid"}},e._l(e.AllUserList,function(t){return a("a-select-option",{key:t.code},[e._v(e._s(t.name))])}),1)],1)],1)],1)],1)])],1)],1)],1),a("drawer-edit",{attrs:{show:e.drawer.edit,refresh:e.pagerefresh}}),a("drawer-detail",{attrs:{show:e.drawer.detail,refresh:e.pagerefresh,serviceForm:e.handOverForm,deleteCustomer:e.throwCom}}),a("drawer-add-line",{attrs:{show:e.drawer.addline,assetsdetail:{},refresh:e.pagerefresh,refreshChild:e.childLineListRefresh}}),a("drawer-line-modify",{attrs:{show:e.drawer.linemodify,assetsdetail:{},refresh:e.childLineListRefresh}}),a("drawer-line-detail",{attrs:{show:e.drawer.linedetail,deleteLine:e.throwLine,assetsdetail:{},serviceForm:e.handOverForm,refresh:e.pagerefresh}}),a("drawer-mixcom",{attrs:{show:e.drawer.mixcom,assetsdetail:{},refresh:e.pagerefresh}}),a("chooseArea",{attrs:{openDrawer:e.drawer.area.show},on:{Closearea:e.areaClose,Surearea:e.areaSure}}),a("modal-choose-employee",{attrs:{show:e.modal.employee,refresh:e.childLineListRefresh}})],1)},i=[],o=(a("8e6e"),a("456d"),a("75fc")),r=(a("7f7f"),a("bd86")),n=(a("ac6a"),a("b775")),l=a("61f7"),c=a("7e7e"),d=a("0dd8"),u=a("e830"),m=a("6e63"),p=a("bbe5"),h=a("bfa5"),f=a("1269"),v=a("3ffd");function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(a,!0).forEach(function(t){Object(r["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var w=[{title:"是否合作",scopedSlots:{customRender:"isOperate"}},{title:"公司名称",dataIndex:"ComName"},{title:"城市",scopedSlots:{customRender:"CityCode"}},{title:"归属人",dataIndex:"UseridText"},{title:"入库时间",dataIndex:"PullTime"},{title:"操作",scopedSlots:{customRender:"action"}}],b=[{title:"状态",scopedSlots:{customRender:"operate"},width:90},{title:"产品线",dataIndex:"ProductLineText",width:120},{title:"销售姓名",dataIndex:"UseridText",width:130},{title:"客服",scopedSlots:{customRender:"ServiceUserid"},width:100},{title:"协同人员",scopedSlots:{customRender:"XTUserid"},width:130},{title:"入库时间",scopedSlots:{customRender:"CreateDate"},width:200},{title:"销售阶段",scopedSlots:{customRender:"Stage"},width:200},{title:"操作",scopedSlots:{customRender:"action"}}],C={components:{DrawerEdit:c["default"],DrawerDetail:d["default"],DrawerLineModify:m["default"],DrawerLineDetail:p["default"],DrawerAddLine:u["default"],DrawerMixcom:h["default"],chooseArea:f["a"],ModalChooseEmployee:v["default"]},data:function(){return{advanced:!0,columns:w,columnsLines:b,visible:!1,confirmLoading:!1,formSearch:{pageSize:10,current:1,total:0,Keyword:"",cityname:"",Industry:""},form:this.$form.createForm(this),AFormImportRules:{iptInput:[{required:!0,message:"请输入"}]},claimForm:this.$form.createForm(this),AFormClaimRules:{iptInputNumber:[{required:!0,message:"请输入数字"},{validator:this.ConfirmNumber}]},dataSource:[],dataLeads:[],dataDetail:[],roles:[],roles87:!1,roleList:[{code:0,name:"我的"},{code:1,name:"管理"}],rolesType:0,drawer:{edit:{show:!1},detail:{show:!1},linemodify:{show:!1},linedetail:{show:!1},addline:{show:!1},mixcom:{show:!1},area:{show:!1}},modal:{exporttransfer:{show:!1},employee:{show:!1}},ThrowReason:[],ThrowComReasonKey:"",checkComId:"",throwlinelayer:!1,checkLineId:"",ThrowLineReasonKey:"",userid:"",expandedRowKeys:[],department:[],departmentKey:"",showClaimLayer:!1,claimLineId:"",childLine:{expanded:"",record:""},options:[],selectedOptionsCell:[],SaleUserid:"",UserList:[],showHandoverLayer:!1,handover:{DepId:[],Userid:"",record:{}},allOptions:[],AllUserList:[],UserArray:[],DeptArray:[],cityList:[],callback:function(){},Leaved:"0",Industry:[],city:{},SaleStage:{},ComLeadsStatus:{},ProductLine:{}}},mounted:function(){var e=this;e.init()},methods:{init:function(){var e=this;this.pagechange(1),this.getDep(),this.getAllDep(),n["a"].post("/api/Dim/Enum/DimDecode",{Names:["User","Dept","City"]}).then(function(t){0===t.code&&(e.UserArray=t.data.User,e.DeptArray=t.data.Dept,e.cityList=t.data.City)}).catch(function(e){console.log(e)}),n["a"].post("/api/Dim/Enum/GetEnum",{Names:["Industry","SaleStage","ComLeadsStatus","ComProductLine"]}).then(function(t){0===t.code&&(e.Industry=t.data.Industry,t.data.SaleStage.forEach(function(t,a){e.SaleStage[t.key]=t.text}),t.data.ComLeadsStatus.forEach(function(t,a){e.ComLeadsStatus[t.key]=t.text}),t.data.ComProductLine.forEach(function(t,a){e.ProductLine[t.key]=t.text}))}).catch(function(e){console.log(e)})},initPage:function(){this.pagechange(1)},pagerefresh:function(){this.pagechange(this.formSearch.current)},pagechange:function(e){var t=this,a={};t.formSearch.current=e,a=g({},t.formSearch),a.CityCode=t.city.value,this.form.validateFields(function(e,s){if(t.rolesType){if(t.formSearch.Scene="管理",a.Scene="管理",!s.DepId)return void t.$message.error("请选择部门");a.DepId=s.DepId[s.DepId.length-1],a.Userid=t.SaleUserid,a.Leaved="1"==t.Leaved}else t.formSearch.Scene="我的",a.Scene="我的";t.$loading.open(),n["a"].post("/api/Crm/Com/List",a).then(function(e){t.$loading.close(),0===e.code?(e.data.rows.forEach(function(e){e.CreatDate=moment(e.CreatDate).format("YYYY-MM-DD")}),t.dataSource=e.data.rows,t.roles=e.data.Operator.Roles,t.formSearch.total=e.count,t.userid=e.data.Operator.Userid,t.roles.indexOf(87)>-1&&(t.roles87=!0)):(t.$message.error(e.msg),t.dataSource=[])}).catch(function(e){t.$loading.close(),console.log(e)})})},edit:function(e){this.drawer.edit={show:!0}},detail:function(e){this.drawer.detail={show:!0,id:e.ComGuid,userid:this.userid,listText:e,UserArray:this.UserArray,DeptArray:this.DeptArray,cityList:this.cityList,SaleStage:this.SaleStage,ComLeadsStatus:this.ComLeadsStatus,ProductLine:this.ProductLine}},throwCom:function(e){var t=this;t.visible=!0,t.checkComId=e.ComGuid,n["a"].post("/api/Dim/Enum/GetEnum",{Names:["ThrowReason"]}).then(function(e){0===e.code&&(t.ThrowReason=e.data.ThrowReason)}).catch(function(e){console.log(e)})},comhandleOk:function(e){var t=this;""===t.ThrowComReasonKey?t.$message.error("请选择放弃原因！"):n["a"].post("/api/Crm/Com/Throw",{ComGuid:t.checkComId,ThrowReason:t.ThrowComReasonKey}).then(function(e){0===e.code?(t.visible=!1,t.pagerefresh(),t.ThrowComReasonKey="",t.checkComId=""):t.$message.error(e.msg)}).catch(function(e){console.log(e)})},comhandleCancel:function(e){this.visible=!1,this.checkComId=""},throwLine:function(e){var t=this;t.throwlinelayer=!0,t.checkLineId=e.ComProductLineGuid,n["a"].post("/api/Dim/Enum/GetEnum",{Names:["ThrowReason"]}).then(function(e){0===e.code?t.ThrowReason=e.data.ThrowReason:t.$message.error(e.msg)}).catch(function(e){console.log(e)})},linehandleOk:function(e){var t=this;""===t.ThrowLineReasonKey?t.$message.error("请选择放弃原因！"):n["a"].post("/api/Crm/ProductLine/Throw",{ComProductLineGuid:t.checkLineId,ThrowReason:t.ThrowLineReasonKey}).then(function(e){0===e.code?(t.throwlinelayer=!1,t.drawer.linedetail={show:!1},t.$message.success(e.msg),t.pagerefresh(),t.childLineListRefresh(),t.ThrowLineReasonKey="",t.checkLineId=""):t.$message.error(e.msg)}).catch(function(e){console.log(e)})},linehandleCancel:function(e){this.throwlinelayer=!1,this.checkLineId=""},childLineList:function(e,t){var a=this;a.childLine.expanded=e,a.childLine.record=t,e?(n["a"].post("/api/Crm/Com/Detail",{ComGuid:t.ComGuid}).then(function(e){0===e.code&&(a.dataLeads=e.data.lines,a.dataDetail=e.data)}).catch(function(e){console.log(e)}),this.expandedRowKeys=[],this.expandedRowKeys.push(t.ComGuid)):this.expandedRowKeys=[]},childLineListRefresh:function(){var e=this;e.childLine.expanded?(n["a"].post("/api/Crm/Com/Detail",{ComGuid:e.childLine.record.ComGuid}).then(function(t){0===t.code&&(e.dataLeads=t.data.lines,e.dataDetail=t.data)}).catch(function(e){console.log(e)}),this.expandedRowKeys=[],this.expandedRowKeys.push(e.childLine.record.ComGuid)):this.expandedRowKeys=[]},linemodify:function(e){this.drawer.linemodify={show:!0,assetsdetail:e}},lineDetail:function(e){this.drawer.linedetail={show:!0,assetsdetail:e,userid:this.userid,UserArray:this.UserArray,DeptArray:this.DeptArray,SaleStage:this.SaleStage}},lineAdd:function(e){this.drawer.addline={show:!0,assetsdetail:{company:e}}},claimLine:function(e){var t=this;t.showClaimLayer=!0,n["a"].get("/api/Org/Department/DepsByCurUser").then(function(e){0===e.code&&(t.department=e.data)}).catch(function(e){console.log(e)}),t.claimLineId=e.ComProductLineGuid},handleOk:function(e){var t=this;t.departmentKey?t.claimForm.validateFields(function(e,a){console.log(a),e||n["a"].post("/api/Crm/ProductLine/Pick",{ComProductLineGuid:t.claimLineId,DepId:t.departmentKey,Budget:a.Budget}).then(function(e){0===e.code&&(t.showClaimLayer=!1,t.$message.success(e.msg),t.departmentKey="",t.claimLineId="",n["a"].post("/api/Crm/Com/Detail",{ComGuid:t.dataDetail.company.ComGuid}).then(function(e){0===e.code&&(t.dataLeads=e.data.lines,t.dataDetail=e.data)}).catch(function(e){console.log(e)}),t.init()),e.code>0&&t.$message.error(e.msg)}).catch(function(e){console.log(e)})}):t.$message.error("请选择你的所属部门！")},handleCancel:function(e){this.showClaimLayer=!1,this.claimLineId=""},getDep:function(){var e=this;n["a"].get("/api/Org/Department/DepsByCurUser").then(function(t){0===t.code&&t.data.forEach(function(t,a){var s={};s.value=t.code,s.label=t.name,s.isLeaf=!1,e.options.push(s)})}).catch(function(e){console.log(e)})},loadData:function(e){var t=e[e.length-1],a=this;t.loading=!0,n["a"].post("/api/Org/Department/ChildrenDepsByDepId",{DepId:t.value}).then(function(e){t.loading=!1,0===e.code&&(e.data.length>0?(t.children=[],e.data.forEach(function(e,a){var s={};s.value=e.code,s.label=e.name,s.isLeaf=!1,t.children.push(s)}),a.options=Object(o["a"])(a.options)):(t.isLeaf=!0,t.loading=!1,a.options=Object(o["a"])(a.options)))}).catch(function(e){console.log(e),t.loading=!1})},onChange:function(e){this.UserList=[],this.SaleUserid="",this.userbydepid(e[e.length-1])},userbydepid:function(e){var t=this;n["a"].post("/api/Org/User/UsersByDepId",{DepId:e,Leaved:"1"==t.Leaved}).then(function(e){var a=e;0===a.code&&(t.UserList=a.data)}).catch(function(e){console.log(e)})},mixCom:function(e){var t=this;this.form.validateFields(function(a,s){if(t.rolesType)t.drawer.mixcom={show:!0,assetsdetail:e,userid:t.SaleUserid,DepId:[""+s.DepId[s.DepId.length-1]]};else{var i=[];t.options.forEach(function(e,t){i.push(e.value)}),t.drawer.mixcom={show:!0,assetsdetail:e,userid:t.userid,DepId:i}}})},rolesChange:function(e){e||(this.UserList=[],this.SaleUserid="")},handOverForm:function(e,t){this.handover.record=e,this.showHandoverLayer=!0,t&&(this.callback=t)},handOverOk:function(e){var t=this;t.handover.DepId===[]?t.$message.error("请选择交接部门！"):""===t.handover.Userid?t.$message.error("请选择交接人员！"):n["a"].post("/api/Crm/ProductLine/Handover",{ComProductLineGuid:t.handover.record.ComProductLineGuid,Userid:t.handover.Userid,DepId:t.handover.DepId[t.handover.DepId.length-1]}).then(function(e){0===e.code?(t.showHandoverLayer=!1,t.handover={DepId:[],Userid:"",record:{}},t.childLineListRefresh(),t.$message.success(e.msg),t.callback()):t.$message.error(e.msg)}).catch(function(e){console.log(e)})},handleOverCancel:function(e){this.showHandoverLayer=!1,this.handover={DepId:[],Userid:"",record:{}}},getAllDep:function(){var e=this;n["a"].post("/api/Org/Department/ChildrenDepsByDepId",{DepId:"1"}).then(function(t){0===t.code&&t.data.forEach(function(t,a){var s={};s.value=t.code,s.label=t.name,s.isLeaf=!1,e.allOptions.push(s)})}).catch(function(e){console.log(e)})},loadDataAll:function(e){var t=e[e.length-1],a=this;t.loading=!0,n["a"].post("/api/Org/Department/ChildrenDepsByDepId",{DepId:t.value}).then(function(e){t.loading=!1,0===e.code&&(e.data.length>0?(t.children=[],e.data.forEach(function(e,a){var s={};s.value=e.code,s.label=e.name,s.isLeaf=!1,t.children.push(s)}),a.allOptions=Object(o["a"])(a.allOptions)):(t.isLeaf=!0,t.loading=!1,a.allOptions=Object(o["a"])(a.allOptions)))}).catch(function(e){console.log(e),t.loading=!1})},onChangeAll:function(e){this.AllUserList=[],this.handover.Userid="",this.userbydepidAll(e[e.length-1])},userbydepidAll:function(e){var t=this;n["a"].post("/api/Org/User/UsersByDepId",{DepId:e}).then(function(e){var a=e;0===a.code&&(t.AllUserList=a.data)}).catch(function(e){console.log(e)})},jobStatusChange:function(e){this.UserList=[],this.SaleUserid="",this.form.setFieldsValue({DepId:[]})},chooseArea:function(){this.drawer.area={show:!0}},areaClose:function(e){this.drawer.area={show:!1}},areaSure:function(e){this.city=e,this.drawer.area={show:!1},this.formSearch.cityname=e.name},ConfirmNumber:function(e,t,a){!t||Object(l["c"])(t)?a():a("请输入数字！")},claimEmployee:function(e){this.modal.employee={show:!0,detail:e}}}},S=C,_=(a("b992"),a("2877")),k=Object(_["a"])(S,s,i,!1,null,null,null);t["default"]=k.exports},aa1e:function(e,t,a){"use strict";var s=a("56cb"),i=a.n(s);i.a},b992:function(e,t,a){"use strict";var s=a("56d2"),i=a.n(s);i.a},bfa5:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"调配客户",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:450}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"公司名称",labelCol:{span:5},wrapperCol:{span:16}}},[e._v("\r\n            "+e._s(e.visible.assetsdetail.ComName)+"\r\n          ")]),a("a-form-item",{attrs:{label:"部门",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-cascader",{directives:[{name:"decorator",rawName:"v-decorator",value:["SaleDepId",{rules:e.AFormImportRules.iptSelectReq}],expression:"['SaleDepId',{rules:AFormImportRules.iptSelectReq}]"}],attrs:{options:e.options,loadData:e.loadData,changeOnSelect:"",placeholder:"请选择分配部门"},on:{change:e.onChange}})],1),a("a-form-item",{attrs:{label:"人员",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["SaleUserid",{rules:e.AFormImportRules.iptSelectReq}],expression:"['SaleUserid',{rules:AFormImportRules.iptSelectReq}]"}],attrs:{required:"true",placeholder:"请选择分配人员","label-in-value":""},on:{change:e.userChange}},e._l(e.DepList,function(t){return a("a-select-option",{key:t.code,attrs:{title:t.name}},[e._v(e._s(t.name))])}),1)],1)],1),a("div",{style:{position:"absolute",bottom:"0",right:"0",width:"100%",padding:"10px 16px",borderTop:"1px solid #e8e8e8",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},i=[],o=a("75fc"),r=(a("7f7f"),a("ac6a"),a("b775")),n=(a("61f7"),{components:{},props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,assetsdetail:{},userid:""},DepList:[],dataSource:[],form:this.$form.createForm(this),AFormImportRules:{iptDate:[{required:!0,message:"请选择"}],iptInput:[{message:"请输入"}],iptInputReq:[{required:!0,message:"请输入"}],iptSelect:[{required:!1,message:"请选择"}],iptSelectReq:[{required:!0,message:"请选择"}],Mobile:[{required:!0,message:"请输入手机号"},{validator:this.ConfirmMobile}]},options:[],selectedOptionsCell:[],SaleUserid:{},saleUserName:""}},watch:{show:function(e,t){var a=this;a.visible=e,e.show&&a.init()}},methods:{onClose:function(){this.visible.show=!1,this.form.resetFields(),this.options=[],this.SaleUserid={},this.saleUserName="",this.DepList=[]},init:function(){var e=this;e.getDep()},getDep:function(){var e=this;r["a"].get("/api/Org/Department/DepsByCurUser").then(function(t){0===t.code&&t.data.forEach(function(t,a){var s={};s.value=t.code,s.label=t.name,s.isLeaf=!1,e.options.push(s)})}).catch(function(e){console.log(e)})},handleSubmit:function(e){var t=this;this.form.validateFields(function(e,a){console.log(a),e||t.$confirm({title:'确定将 "'+t.visible.assetsdetail.ComName+'" 调配给 "'+t.saleUserName+'" ?',content:'点击确定客户将调配给 "'+t.saleUserName+'"！',onOk:function(){var e={};e.ComGuid=t.visible.assetsdetail.ComGuid,e.FromDepIds=t.visible.DepId,e.FromUserid=t.visible.userid,e.ToDepId=a.SaleDepId[a.SaleDepId.length-1],e.ToUserid=t.SaleUserid.key,t.$loading.open(),r["a"].post("/api/crm/com/Allocate",e).then(function(e){t.$loading.close();var a=e;a.code>0?t.$message.error(a.msg):(t.refresh&&t.refresh(),t.onClose(),t.$message.success(a.msg))}).catch(function(e){t.$loading.close(),console.log(e)}),t.options=[]},onCancel:function(){}})})},loadData:function(e){var t=e[e.length-1],a=this;t.loading=!0,r["a"].post("/api/Org/Department/ChildrenDepsByDepId",{DepId:t.value}).then(function(e){t.loading=!1,0===e.code&&(e.data.length>0?(t.children=[],e.data.forEach(function(e,a){var s={};s.value=e.code,s.label=e.name,s.isLeaf=!1,t.children.push(s)}),a.options=Object(o["a"])(a.options)):(t.isLeaf=!0,t.loading=!1,a.options=Object(o["a"])(a.options)))}).catch(function(e){console.log(e),t.loading=!1})},onChange:function(e){this.DepList=[],this.SaleUserid={},this.saleUserName="",this.form.setFieldsValue({SaleUserid:""}),this.userbydepid(e[e.length-1])},userbydepid:function(e){var t=this;r["a"].post("/api/Org/User/UsersByDepId",{DepId:e}).then(function(e){var a=e;0===a.code&&(t.DepList=a.data)}).catch(function(e){console.log(e)})},userChange:function(e){this.SaleUserid=e,this.saleUserName=e.label}}}),l=n,c=a("2877"),d=Object(c["a"])(l,s,i,!1,null,null,null);t["default"]=d.exports},e830:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"新建",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:600}},[a("div",{style:{overflow:"auto",height:"100%"}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"产品线",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["ProductLine",{rules:e.AFormImportRules.iptSelectReq}],expression:"['ProductLine',{rules:AFormImportRules.iptSelectReq }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.dim.ComProductLine,function(t){return a("a-select-option",{key:t.key},[e._v(e._s(t.text))])}),1)],1),a("a-form-item",{attrs:{label:"预算",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Budget",{rules:e.AFormImportRules.iptInputNumber}],expression:"['Budget',{rules:AFormImportRules.iptInputNumber}]"}]})],1),a("a-form-item",{attrs:{label:"备注",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarkspro"],expression:"['Remarkspro']"}],attrs:{placeholder:"备注",rows:4}})],1),a("a-form-item",{attrs:{label:"联系人姓名",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Linkman",{rules:e.AFormImportRules.iptInputReq}],expression:"['Linkman',{rules:AFormImportRules.iptInputReq}]"}]})],1),a("a-form-item",{attrs:{label:"手机号码",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Mobile",{rules:e.AFormImportRules.Mobile}],expression:"['Mobile',{rules:AFormImportRules.Mobile}]"}]})],1),a("a-form-item",{attrs:{label:"固定电话",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Tel"],expression:"['Tel']"}]})],1),a("a-form-item",{attrs:{label:"邮箱",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Email",{rules:e.AFormImportRules.Email}],expression:"['Email',{rules:AFormImportRules.Email}]"}]})],1),a("a-form-item",{attrs:{label:"所在部门",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Department",{rules:e.AFormImportRules.iptInput}],expression:"['Department',{rules:AFormImportRules.iptInput}]"}]})],1),a("a-form-item",{attrs:{label:"职务",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["JobTitle",{rules:e.AFormImportRules.iptInput}],expression:"['JobTitle',{rules:AFormImportRules.iptInput}]"}]})],1),a("a-form-item",{attrs:{label:"通讯地址",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["personAddress",{rules:e.AFormImportRules.iptInput}],expression:"['personAddress',{rules:AFormImportRules.iptInput}]"}]})],1),a("div",{style:{height:"30px"}})],1),a("div",{style:{position:"absolute",bottom:"0",right:"0",width:"100%",padding:"10px 16px",borderTop:"1px solid #e8e8e8",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.addTeamWork}},[e._v("提交")])],1)],1)])},i=[],o=a("b775"),r=(a("c32d"),a("61f7")),n={props:{show:{type:Object,default:{show:!1}},assetsdetail:{type:Object,default:{company:{},line:{},leads:{}}},refresh:{type:Function,default:null},refreshChild:{type:Function,default:null}},data:function(){return{visible:{show:!1,id:{},assetsdetail:{company:{},line:{},leads:{}}},dim:{},defaultData:{Source:"10"},dataSource:[],DepList:[],Source:[],Scale:[],Nature:[],Industry:[],searchCom:{},enableeditguid:"",form:this.$form.createForm(this),AFormImportRules:{iptDate:[{required:!0,message:"请选择"}],iptInput:[{message:"请输入"}],iptInputReq:[{required:!0,message:"请输入"}],iptSelect:[{required:!1,message:"请选择"}],iptSelectReq:[{required:!0,message:"请选择"}],Mobile:[{message:"请输入手机号"},{validator:this.ConfirmMobile}],Email:[{message:"请输入邮箱"},{validator:this.ConfirmEmail}],iptInputNumber:[{required:!0,message:"请输入数字"},{validator:this.ConfirmNumber}]},drawer:{},modal:{}}},created:function(){var e=this;this.$watch("show",function(t,a){e.visible=t,e.visible.show&&e.init()})},methods:{init:function(){var e=this;o["a"].get("/api/Org/Department/DepsByCurUser").then(function(t){0===t.code&&(e.DepList=t.data)}).catch(function(e){console.log(e)}),o["a"].post("/api/Dim/Enum/GetEnum",{Names:["Source","Scale","Nature","Industry","ComProductLine"]}).then(function(t){0===t.code&&(e.Source=t.data.Source,e.Industry=t.data.Industry,e.Scale=t.data.Scale,e.Nature=t.data.Nature,e.dim.ComProductLine=t.data.ComProductLine)}).catch(function(e){console.log(e)})},ConfirmMobile:function(e,t,a){!t||Object(r["d"])(t)?a():a("手机号码不符合规则！")},ConfirmEmail:function(e,t,a){!t||Object(r["b"])(t)?a():a("邮箱不符合规则！")},ConfirmNumber:function(e,t,a){!t||Object(r["c"])(t)?a():a("请输入数字！")},addTeamWork:function(e){var t=this;this.form.validateFields(function(a,s){if(!a){var i={productLine:{ProductLine:s.ProductLine,DepId:s.DepId,ComGuid:t.visible.assetsdetail.company.ComGuid,Budget:s.Budget,Remarks:s.Remarkspro},comContact:{Linkman:s.Linkman,Mobile:s.Mobile,Tel:s.Tel,Email:s.Email,Department:s.Department,JobTitle:s.JobTitle,Address:s.personAddress},LeadsGuid:""};t.$loading.open(),o["a"].post("/api/Crm/ProductLine/Add",i).then(function(a){t.$loading.close();var o=a;o.code>0?t.$message.error(o.msg):("next"===e?(t.form.resetFields(),t.refresh&&t.refresh()):(t.onClose(),t.refreshChild(),t.searchCom={},s={},i={}),t.$message.success(o.msg))}).catch(function(e){t.$loading.close(),console.log(e)})}})},onClose:function(){this.visible.show=!1,this.dataSource=[],this.sourceListRecords=[],this.refresh&&this.refresh(),this.form.resetFields()}}},l=n,c=a("2877"),d=Object(c["a"])(l,s,i,!1,null,null,null);t["default"]=d.exports},eee6:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{title:"修改客户信息",placement:"right",closable:!1,maskClosable:!1,visible:this.visible.show,width:600}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"公司id",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ComGuid",{initialValue:e.visible.assetsdetail.company.ComGuid,rules:e.AFormImportRules.iptInput}],expression:"['ComGuid',{initialValue:visible.assetsdetail.company.ComGuid,rules:AFormImportRules.iptInput}]"}],attrs:{disabled:!0}})],1),a("a-form-item",{attrs:{label:"公司名称",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ComName",{initialValue:e.visible.assetsdetail.company.ComName,rules:e.AFormImportRules.iptInputReq}],expression:"['ComName',{initialValue:visible.assetsdetail.company.ComName,rules:AFormImportRules.iptInputReq}]"}]})],1),a("a-form-item",{attrs:{label:"组织机构代码证",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Code",{initialValue:e.visible.assetsdetail.company.Code,rules:e.AFormImportRules.iptInput}],expression:"['Code',{initialValue:visible.assetsdetail.company.Code,rules:AFormImportRules.iptInput}]"}]})],1),a("a-form-item",{attrs:{label:"网址",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Url",{initialValue:e.visible.assetsdetail.company.Url,rules:e.AFormImportRules.iptInput}],expression:"['Url',{initialValue:visible.assetsdetail.company.Url,rules:AFormImportRules.iptInput}]"}]})],1),a("a-form-item",{attrs:{label:"城市",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cityname",{initialValue:e.visible.assetsdetail.company.cityname,rules:e.AFormImportRules.iptInputReq}],expression:"['cityname',{initialValue:visible.assetsdetail.company.cityname,rules:AFormImportRules.iptInputReq}]"}],attrs:{readOnly:"",placeholder:"请输入"},on:{click:e.chooseArea}})],1),a("a-form-item",{attrs:{label:"地址",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Address",{initialValue:e.visible.assetsdetail.company.Address,rules:e.AFormImportRules.iptInputReq}],expression:"['Address',{initialValue:visible.assetsdetail.company.Address,rules:AFormImportRules.iptInputReq}]"}]})],1),a("a-form-item",{attrs:{label:"客户性质",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["Nature",{initialValue:e.visible.assetsdetail.company.Nature,rules:e.AFormImportRules.iptSelectReq}],expression:"['Nature',{initialValue:visible.assetsdetail.company.Nature,rules:AFormImportRules.iptSelectReq }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.Nature,function(t){return a("a-select-option",{key:t.key},[e._v(e._s(t.text))])}),1)],1),a("a-form-item",{attrs:{label:"客户规模",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["Scale",{initialValue:e.visible.assetsdetail.company.Scale,rules:e.AFormImportRules.iptSelectReq}],expression:"['Scale',{initialValue:visible.assetsdetail.company.Scale,rules:AFormImportRules.iptSelectReq }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.Scale,function(t){return a("a-select-option",{key:t.key},[e._v(e._s(t.text))])}),1)],1),a("a-form-item",{attrs:{label:"行业",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["Industry",{initialValue:e.visible.assetsdetail.company.Industry,rules:e.AFormImportRules.iptSelectReq}],expression:"['Industry',{initialValue:visible.assetsdetail.company.Industry,rules:AFormImportRules.iptSelectReq }]"}],attrs:{placeholder:"请选择",allowClear:!0}},e._l(e.Industry,function(t){return a("a-select-option",{key:t.key},[e._v(e._s(t.text))])}),1)],1),a("a-form-item",{attrs:{label:"备注",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Remarkspro",{initialValue:e.visible.assetsdetail.company.Remarks}],expression:"['Remarkspro',{initialValue:visible.assetsdetail.company.Remarks}]"}],attrs:{placeholder:"备注",rows:4}})],1)],1),a("a-row",{staticStyle:{padding:"10px 0"},attrs:{gutter:24}}),a("div",{style:{position:"absolute",bottom:"0",right:"0",width:"100%",padding:"10px 16px",borderTop:"1px solid #e8e8e8",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},[a("a-button",{on:{click:e.onClose}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary","html-type":"submit"},on:{click:e.handleSubmit}},[e._v("提交")])],1),a("chooseArea",{attrs:{openDrawer:e.drawer.area.show},on:{Closearea:e.areaClose,Surearea:e.areaSure}})],1)},i=[],o=(a("7f7f"),a("b775")),r=(a("61f7"),a("1269")),n={components:{chooseArea:r["a"]},props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,assetsdetail:{company:{},line:{},cityList:{}}},dim:{Brand:[]},Source:[],Scale:[],Nature:[],Industry:[],form:this.$form.createForm(this),AFormImportRules:{iptDate:[{required:!0,message:"请选择"}],iptInput:[{message:"请输入"}],iptInputReq:[{required:!0,message:"请输入"}],iptSelect:[{required:!1,message:"请选择"}],iptSelectReq:[{required:!0,message:"请选择"}],Mobile:[{required:!1,message:"请输入手机号"},{validator:this.ConfirmMobile}]},drawer:{area:{show:!1}},options:[],city:{}}},watch:{show:function(e,t){var a=this;a.visible=e,null==a.visible.assetsdetail&&(a.visible.assetsdetail={ComGuid:""}),e.show&&a.init()}},methods:{onClose:function(){this.visible.show=!1,this.refresh&&this.refresh(),this.form.resetFields()},init:function(){var e=this;e.city.value=e.visible.assetsdetail.company.CityCode,o["a"].post("/api/Dim/Enum/GetEnum",{Names:["Source","Scale","Nature","Industry"]}).then(function(t){0===t.code&&(e.Source=t.data.Source,e.Industry=t.data.Industry,e.Scale=t.data.Scale,e.Nature=t.data.Nature)}).catch(function(e){console.log(e)})},handleSubmit:function(e){var t=this,a=this;this.form.validateFields(function(e,s){if(!e){var i={company:{ComGuid:s.ComGuid,ComName:s.ComName,Code:s.Code,CityCode:t.city.value,Url:s.Url,Address:s.Address,Nature:s.Nature,Scale:s.Scale,Industry:s.Industry,Remarks:s.Remarkspro}};a.$loading.open(),o["a"].post("/api/Crm/Com/Modify",i).then(function(e){a.$loading.close();var t=e;t.code>0?a.$message.error(t.msg):(a.onClose(),a.$message.success(t.msg))}).catch(function(e){a.$loading.close(),console.log(e)})}})},chooseArea:function(){this.drawer.area={show:!0}},areaClose:function(e){this.drawer.area={show:!1}},areaSure:function(e){this.city=e,this.drawer.area={show:!1},this.form.setFieldsValue({cityname:e.name})}}},l=n,c=a("2877"),d=Object(c["a"])(l,s,i,!1,null,null,null);t["default"]=d.exports},f228:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{message:"",visible:this.visible.show,width:650,destroyOnClose:!0,closable:!1},on:{close:e.onClose}},[a("template",{slot:"title"},[e._v("\n    "+e._s(e.assetsdetail.GoodsName)+"详情\n    "),0==e.assetsdetail.Status?a("a-button",{staticStyle:{float:"right"},attrs:{size:"small",icon:"form"},on:{click:e.edit}},[e._v("修改")]):e._e()],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("公司名称:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.ComName))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("产品线:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.visible.ComProductLine[e.assetsdetail.ProductLine]))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("联系人:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.Linkman))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("联系电话:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.LinkTel))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("创建时间:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.CreatDate))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("更新时间:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.UpdateTime))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("城市:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.visible.cityList[e.assetsdetail.CityCode]))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("归属人:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.visible.userArray[e.assetsdetail.Userid]))])],1),a("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:10}},[a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("状态:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.visible.ComLeadsStatus[e.assetsdetail.Status]))]),a("a-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("备注:")]),a("a-col",{attrs:{span:6}},[e._v(e._s(e.assetsdetail.Remarks))])],1),a("a-divider",{attrs:{orientation:"left"}},[e._v("流程记录")]),a("a-table",{attrs:{columns:e.columns,dataSource:e.dataSource,bordered:!1,pagination:!1,size:"middle",rowKey:"LogGuid"}}),a("drawer-edit",{attrs:{show:e.drawer.edit,refresh:e.init}})],2)},i=[],o=a("b775"),r=a("299f"),n=(a("c32d"),[{title:"状态",dataIndex:"ActionText"},{title:"操作人员",dataIndex:"UseridText"},{title:"操作时间",dataIndex:"LogTime"}]),l={components:{DrawerEdit:r["default"]},props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,id:{},cityList:{},userArray:{},ComProductLine:{},ComLeadsStatus:{}},columns:n,formSearch:{pageSize:10,current:1,total:0},dataSource:[],assetsdetail:{},enableeditguid:"",form:this.$form.createForm(this),drawer:{edit:{show:!1}},modal:{outchange:{show:!1}}}},created:function(){var e=this;this.$watch("show",function(t,a){e.visible=t,e.visible.show&&e.init()})},methods:{init:function(){var e=this;o["a"].post("/api/Leads/Com/Detail",{LeadsGuid:e.show.id}).then(function(t){0===t.code&&(e.assetsdetail=t.data.leadsCom,e.dataSource=t.data.leadsComLogs)}).catch(function(e){console.log(e)})},onClose:function(){this.visible.show=!1,this.dataSource=[],this.assetsdetail={},this.refresh&&this.refresh()},detail:function(e){this.drawer.detail={show:!0,id:e.SBOrderItemGuid}},edit:function(){this.drawer.edit={show:!0,id:this.show.id,assetsdetail:this.assetsdetail}},outchange:function(e){this.modal.outchange={show:!0,id:e.BalanceGuid,balance:e}}}},c=l,d=a("2877"),u=Object(d["a"])(c,s,i,!1,null,null,null);t["default"]=u.exports}}]);