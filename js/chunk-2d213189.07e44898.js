(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d213189"],{aae8:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a-layout",[o("a-layout-content",[o("a-card",{attrs:{bordered:!1}},[o("div",[o("a-form",{attrs:{layout:"horizontal"}},[o("div",{class:t.advanced?null:"fold"},[o("a-row",{attrs:{gutter:10}},[o("a-col",{attrs:{md:6}},[o("a-form-item",{attrs:{label:"公司名称",labelCol:{span:6},wrapperCol:{span:17,offset:1}}},[o("a-input",{attrs:{placeholder:"请输入"},model:{value:t.formSearch.Keyword,callback:function(e){t.$set(t.formSearch,"Keyword",e)},expression:"formSearch.Keyword"}})],1)],1),o("a-col",{attrs:{span:12}},[o("a-form-item",[o("a-button",{attrs:{type:"primary"},on:{click:t.init}},[t._v("查询")])],1)],1)],1)],1)])],1),o("a-table",{attrs:{rowKey:"ContactRecordGuid",columns:t.columnsLines,"data-source":t.dataLeads,pagination:!1},scopedSlots:t._u([{key:"CityCode",fn:function(e,a){return o("span",{staticStyle:{"text-align":"right"}},[t._v("\n          "+t._s(t.cityList[a.CityCode])+"\n        ")])}},{key:"ProductLine",fn:function(e,a){return o("span",{staticStyle:{"text-align":"right"}},[t._l(a.ProductLines,function(e,o){return[o==a.ProductLines.length-1?[t._v("\n                  "+t._s(t.ProductLine[e])+"\n              ")]:[t._v("\n                "+t._s(t.ProductLine[e])+",\n              ")]]})],2)}},{key:"ContactType",fn:function(e,a){return o("span",{staticStyle:{"text-align":"right"}},[t._v("\n            "+t._s(t.ContactType[a.ContactType])+"\n          ")])}},{key:"action",fn:function(e,a){return o("span",{staticStyle:{"text-align":"right"}},[o("a",{on:{click:function(e){return t.comDetail(a)}}},[t._v("详情")])])}}])},[o("template",{slot:"footer"},[o("a-pagination",{staticStyle:{float:"right"},attrs:{defaultCurrent:1,pageSize:t.formSearch.pageSize,total:t.formSearch.total,current:t.formSearch.current},on:{change:t.pagechange}})],1)],2)],1)],1),o("a-modal",{attrs:{title:"提示信息",visible:t.visible,"confirm-loading":t.confirmLoading},on:{ok:t.comhandleOk,cancel:t.comhandleCancel}},[o("a-form",{attrs:{layout:"horizontal"}},[o("div",[o("a-row",{attrs:{gutter:10}},[o("a-col",{attrs:{md:24}},[o("a-form-item",{attrs:{label:"放弃原因",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[o("a-select",{model:{value:t.ThrowComReasonKey,callback:function(e){t.ThrowComReasonKey=e},expression:"ThrowComReasonKey"}},t._l(t.ThrowReason,function(e){return o("a-select-option",{key:e.key},[t._v("\n                      "+t._s(e.text)+"\n                    ")])}),1)],1)],1)],1)],1)])],1),o("drawer-detail",{attrs:{show:t.drawer.detail,refresh:t.pagerefresh,deleteCustomer:t.throwCom}})],1)},n=[],r=(o("ac6a"),o("b775")),c=(o("61f7"),o("0dd8")),i=[{title:"公司名称",dataIndex:"ComName"},{title:"城市",scopedSlots:{customRender:"CityCode"}},{title:"产品线",scopedSlots:{customRender:"ProductLine"},width:300},{title:"联系方式",scopedSlots:{customRender:"ContactType"}},{title:"创建时间",dataIndex:"CreateDate"},{title:"下次联系时间",dataIndex:"NextContacttime"},{title:"联系内容",dataIndex:"ContactContent",width:300},{title:"操作",scopedSlots:{customRender:"action"}}],s={components:{DrawerDetail:c["default"]},data:function(){return{advanced:!0,columnsLines:i,visible:!1,confirmLoading:!1,formSearch:{pageSize:10,current:1,total:0,Keyword:""},form:this.$form.createForm(this),AFormImportRules:{iptInput:[{required:!0,message:"请输入"}]},dataSource:[],dataLeads:[],dataDetail:[],roles:[],drawer:{detail:{show:!1}},modal:{exporttransfer:{show:!1}},ThrowReason:[],checkComId:"",checkLineId:"",userid:"",expandedRowKeys:[],department:[],departmentKey:"",showClaimLayer:!1,claimLineId:"",childLine:{expanded:"",record:""},Roles:!1,Dept:[],User:[],ProductLine:{},ContactType:{},ThrowComReasonKey:"",cityList:{}}},mounted:function(){var t=this;t.init()},methods:{init:function(){var t=this;r["a"].post("/api/Dim/Enum/DimDecode",{Names:["User","Dept","City"]}).then(function(e){t.$loading.close(),0===e.code&&(t.User=e.data.User,t.Dept=e.data.Dept,t.cityList=e.data.City)}).catch(function(e){t.$loading.close(),console.log(e)}),r["a"].post("/api/Dim/Enum/GetEnum",{Names:["ComProductLine","ContactType"]}).then(function(e){0===e.code?(e.data.ComProductLine.forEach(function(e,o){t.ProductLine[e.key]=e.text}),e.data.ContactType.forEach(function(e,o){t.ContactType[e.key]=e.text})):t.$message.error(e.msg)}).catch(function(t){console.log(t)}),this.pagechange(1)},pagerefresh:function(){this.pagechange(this.formSearch.current)},pagechange:function(t){var e=this;e.formSearch.current=t,e.$loading.open(),r["a"].post("/api/Crm/Contact/ListNextRecords",e.formSearch).then(function(t){e.$loading.close(),0===t.code&&(e.dataLeads=t.data.rows,e.formSearch.total=t.data.count)}).catch(function(t){e.$loading.close(),console.log(t)})},comDetail:function(t){this.drawer.detail={show:!0,id:t.ComGuid,listText:t}},throwCom:function(t){var e=this;e.visible=!0,e.checkComId=t.ComGuid,r["a"].post("/api/Dim/Enum/GetEnum",{Names:["ThrowReason"]}).then(function(t){0===t.code&&(e.ThrowReason=t.data.ThrowReason)}).catch(function(t){console.log(t)})},comhandleOk:function(t){var e=this;""===e.ThrowComReasonKey?e.$message.error("请选择放弃原因！"):r["a"].post("/api/Crm/Com/Throw",{ComGuid:e.checkComId,ThrowReason:e.ThrowComReasonKey}).then(function(t){0===t.code?(e.visible=!1,e.pagerefresh(),e.ThrowComReasonKey="",e.checkComId=""):e.$message.error(t.msg)}).catch(function(t){console.log(t)})},comhandleCancel:function(t){this.visible=!1,this.checkComId=""}}},l=s,d=o("2877"),u=Object(d["a"])(l,a,n,!1,null,null,null);e["default"]=u.exports}}]);