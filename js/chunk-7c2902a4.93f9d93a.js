(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c2902a4","chunk-0ee9637e","chunk-1f1b4ce5","chunk-c1b53df0","chunk-2d0aef64"],{"0bfb":function(t,a,e){"use strict";var s=e("cb7c");t.exports=function(){var t=s(this),a="";return t.global&&(a+="g"),t.ignoreCase&&(a+="i"),t.multiline&&(a+="m"),t.unicode&&(a+="u"),t.sticky&&(a+="y"),a}},"1af6":function(t,a,e){var s=e("63b6");s(s.S,"Array",{isArray:e("9003")})},"2c2d":function(t,a,e){},3115:function(t,a,e){"use strict";var s=e("2c2d"),n=e.n(s);n.a},"33a7":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-drawer",{attrs:{message:"",visible:this.visible.show,width:450,destroyOnClose:!0,closable:!1},on:{close:t.onClose}},[e("template",{slot:"title"},[t._v("\n    合同详情\n  ")]),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("公司名称:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.visible.assetsdetail.ComName?t.visible.assetsdetail.ComName:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("客商类型:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.visible.assetsdetail.ComTypeText?t.visible.assetsdetail.ComTypeText:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("客户评级:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.rankText?t.rankText:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("产品线:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.visible.assetsdetail.ProductLineText?t.visible.assetsdetail.ProductLineText:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("申请日期:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.visible.assetsdetail.CreateDate?t.visible.assetsdetail.CreateDate:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("开始日期:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.visible.assetsdetail.StartDate?t.visible.assetsdetail.StartDate:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("终止日期:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.visible.assetsdetail.EndDate?t.visible.assetsdetail.EndDate:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("是否延期:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.FormComponentValues["是否延期"]?t.FormComponentValues["是否延期"]:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("服务内容:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.FormComponentValues["服务内容"]?t.FormComponentValues["服务内容"]:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("服务部门:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.FormComponentValues["服务部门"]?t.visible.Dept[t.FormComponentValues["服务部门"]]:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("申请类型:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.visible.assetsdetail.SignTypeText?t.visible.assetsdetail.SignTypeText:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("合同内容:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.FormComponentValues["合同内容"]?t.FormComponentValues["合同内容"]:"无"))])],1),t.FormComponentValues["标准合同修改内容"]&&t.FormComponentValues["标准合同修改内容"][0]["原合同内容"]?t._l(t.FormComponentValues["标准合同修改内容"],function(a,s){return e("a-row",{key:s,staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{attrs:{span:24}},[e("a-divider",{staticStyle:{"font-size":"12px"},attrs:{dashed:"",orientation:"left"}},[t._v("标准合同修改内容("+t._s(s+1)+"):")])],1),e("a-col",{attrs:{span:24}},[e("span",{staticStyle:{"font-weight":"bold"}},[t._v("原合同内容：")]),t._v(t._s(a["原合同内容"]))]),e("a-col",{attrs:{span:24}},[e("span",{staticStyle:{"font-weight":"bold"}},[t._v("修改后合同内容：")]),t._v(t._s(a["修改后合同内容"]))])],1)}):t._e(),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("垫付:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.FormComponentValues["垫付"]?t.FormComponentValues["垫付"]:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("垫付金额:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.FormComponentValues["垫付金额"]?t.FormComponentValues["垫付金额"]:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("垫付周期:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.FormComponentValues["垫付周期"]?t.FormComponentValues["垫付周期"]:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("月服务费:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.FormComponentValues["月服务费"]?t.FormComponentValues["月服务费"]:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("垫付说明:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.FormComponentValues["垫付说明"]?t.FormComponentValues["垫付说明"]:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("信息提供者:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.FormComponentValues["信息提供者"]?t.visible.User[t.FormComponentValues["信息提供者"]]:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("签单支持部门:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.FormComponentValues["签单支持部门"]?t.visible.Dept[t.FormComponentValues["签单支持部门"]]:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("签单支持员工:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.FormComponentValues["签单支持员工"]?t.visible.User[t.FormComponentValues["签单支持员工"]]:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("状态:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.visible.assetsdetail.StatusText?t.visible.assetsdetail.StatusText:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("归档时间:")]),e("a-col",{attrs:{span:18}},[t._v(t._s(t.visible.assetsdetail.ArchiveTime?t.visible.assetsdetail.ArchiveTime:"无"))])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("审批结果:")]),e("a-col",{attrs:{span:18}},[10==t.visible.assetsdetail.Result?e("span",{staticStyle:{color:"#52c41a"}},[t._v(t._s(t.visible.assetsdetail.ResultText?t.visible.assetsdetail.ResultText:"无"))]):t._e(),20==t.visible.assetsdetail.Result?e("span",{staticStyle:{color:"#f5222d"}},[t._v(t._s(t.visible.assetsdetail.ResultText?t.visible.assetsdetail.ResultText:"无"))]):t._e()])],1),e("a-row",{staticStyle:{padding:"8px 0"},attrs:{gutter:11}},[e("a-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v("附件:")]),e("a-col",{attrs:{span:18}},[1==t.notInDingTalk?e("div",[e("a-tag",{attrs:{color:"red"}},[t._v("请到钉钉应用界面查看附件！")])],1):t._e(),0==t.notInDingTalk?[t.uploadArry.length>0?t._l(t.uploadArry,function(a){return e("div",{key:a.fileId},[e("a-icon",{attrs:{type:"file-text"}}),t._v(" "+t._s(a.fileName)+"  "),e("a-icon",{staticStyle:{cursor:"pointer",color:"#1890ff"},attrs:{type:"file-search"},on:{click:function(e){return t.preview(a)}}})],1)}):[t._v("无")]]:t._e()],2)],1),e("a-row",{staticStyle:{padding:"10px 0"},attrs:{gutter:24}})],2)},n=[],o=(e("6b54"),e("b775")),i=(e("c32d"),{components:{},props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,id:{},assetsdetail:{},Dept:{},User:{},comRankObject:{}},FormComponentValues:{},formSearch:{pageSize:5,current:1,total:0,next:!0},form:this.$form.createForm(this),drawer:{},modal:{outchange:{show:!1}},SpaceId:"",uploadArry:[],fescoMessage:{},notInDingTalk:!1,rankText:""}},created:function(){var t=this;this.$watch("show",function(a,e){t.visible=a,t.visible.show&&t.init()})},methods:{init:function(){var t=this;try{t.FormComponentValues=JSON.parse(this.visible.assetsdetail.FormComponentValues)}catch(a){t.FormComponentValues={"服务内容":this.visible.assetsdetail.FormComponentValues}}o["a"].get("/api/DingTalk/CspaceInfo").then(function(a){var e=a,s=e.data.SpaceId;0===e.code&&(t.SpaceId=s)}).catch(function(t){console.log(t)}),o["a"].post("/api/DingTalk/GetSign",{}).then(function(a){t.fescoMessage=a.data,dd.config({agentId:a.data.AgentId,corpId:a.data.corpId,timeStamp:a.data.timeStamp,nonceStr:a.data.nonceStr,signature:a.data.signature,type:0,jsApiList:["biz.cspace.saveFile","biz.util.uploadAttachment","biz.cspace.preview","biz.cspace.chooseSpaceDir"]})}).catch(function(t){console.log(t)}),"notInDingTalk"==dd.env.platform&&(t.notInDingTalk=!0),t.FormComponentValues["附件"]&&(t.uploadArry=t.FormComponentValues["附件"]),o["a"].post("/api/Crm/ComRank/Last",{ComGuid:t.visible.assetsdetail.ComGuid}).then(function(a){0===a.code&&(a.data?t.rankText=t.visible.comRankObject[a.data.Rank]:t.rankText="")}).catch(function(t){console.log(t)})},onClose:function(){this.visible.show=!1,this.sourceListRecords=[],this.formSearch.next=!0,this.assetsdetail={company:{},line:{},leads:{}},this.refresh&&this.refresh()},preview:function(t){var a=this;dd.ready(function(){dd.biz.cspace.preview({corpId:a.fescoMessage.corpId,spaceId:a.SpaceId.toString(),fileId:t.fileId,fileName:t.fileName,fileSize:t.fileSize,fileType:t.fileType,onSuccess:function(){},onFail:function(t){}})})}}}),r=i,c=e("2877"),l=Object(c["a"])(r,s,n,!1,null,null,null);a["default"]=l.exports},3454:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-drawer",{attrs:{message:"",visible:this.visible.show,width:850,destroyOnClose:!0,closable:!1},on:{close:t.onClose}},[e("template",{slot:"title"},[t._v("\n    详情\n  ")]),e("a-table",{attrs:{columns:t.columns,dataSource:t.peopleList,pagination:!1,rowKey:"ContractGuid"},scopedSlots:t._u([{key:"Status",fn:function(a,s){return e("span",{staticStyle:{"text-align":"right"}},[t._v("\n          "+t._s(t.visible.ContractStatus[s.Status])+"\n        ")])}},{key:"Userid",fn:function(a,s){return e("span",{staticStyle:{"text-align":"right"}},[t._v("\n          "+t._s(t.UserArray[s.Userid])+"\n        ")])}},{key:"ProductLine",fn:function(a,s){return e("span",{staticStyle:{"text-align":"right"}},[t._v("\n          "+t._s(t.visible.ProductLine[s.ProductLine])+"\n        ")])}},{key:"action",fn:function(a,s){return e("span",{staticStyle:{"text-align":"right"}},[e("a",{on:{click:function(a){return t.detail(s)}}},[t._v("详情")])])}}])},[e("template",{slot:"footer"},[e("a-pagination",{staticStyle:{float:"right"},attrs:{defaultCurrent:1,pageSize:t.formSearch.pageSize,total:t.formSearch.total,current:t.formSearch.current},on:{change:t.pagechange}})],1)],2),e("drawer-contract-detail",{attrs:{show:t.drawer.contractdetail,refresh:t.init}})],2)},n=[],o=(e("ac6a"),e("b775")),i=(e("c32d"),e("33a7")),r=[{title:"状态",scopedSlots:{customRender:"Status"}},{title:"公司名称",dataIndex:"ComName"},{title:"产品线",scopedSlots:{customRender:"ProductLine"}},{title:"操作",scopedSlots:{customRender:"action"}}],c={components:{DrawerContractDetail:i["default"]},props:{show:{type:Object,default:{show:!1}},refresh:{type:Function,default:null}},data:function(){return{visible:{show:!1,id:{},assetsdetail:{},ProductLine:{},ContractStatus:{},Dept:{}},columns:r,formSearch:{pageSize:10,current:1,total:0,Userid:"",Begin:"",End:""},form:this.$form.createForm(this),drawer:{contractdetail:{show:!1}},modal:{},peopleList:[],ComType:{},ComProductLine:{},SignType:{},ContractStatus:{},ContractResult:{},ComRankNormal:{}}},created:function(){var t=this;this.$watch("show",function(a,e){t.visible=a,console.log(t.visible),t.visible.show&&t.init()})},methods:{init:function(){var t=this;o["a"].post("/api/Dim/Enum/GetEnum",{Names:["ComType","ComProductLine","SignType","ContractStatus","ContractResult","ComRankNormal"]}).then(function(a){0===a.code&&(a.data.ComType.forEach(function(a,e){t.ComType[a.key]=a.text}),a.data.ComProductLine.forEach(function(a,e){t.ComProductLine[a.key]=a.text}),a.data.SignType.forEach(function(a,e){t.SignType[a.key]=a.text}),a.data.ContractStatus.forEach(function(a,e){t.ContractStatus[a.key]=a.text}),a.data.ContractResult.forEach(function(a,e){t.ContractResult[a.key]=a.text}),a.data.ComRankNormal.forEach(function(a,e){t.ComRankNormal[a.key]=a.text}))}).catch(function(t){console.log(t)}),t.pagechange(1)},pagechange:function(t){var a=this,e=a.formSearch;a.formSearch.current=t,a.formSearch.Userid=a.visible.assetsdetail.Userid,a.formSearch.Begin=a.visible.Begin,a.formSearch.End=a.visible.End,o["a"].post("/api/Crm/Data/ContractsDetailByUser",e).then(function(t){0===t.code&&(a.peopleList=t.data.rows,a.formSearch.total=t.count)}).catch(function(t){console.log(t)})},onClose:function(){this.visible.show=!1,this.refresh&&this.refresh()},detail:function(t){t.ComTypeText=this.ComType[t.ComType],t.ProductLineText=this.ComProductLine[t.ProductLine],t.SignTypeText=this.SignType[t.SignType],t.StatusText=this.ContractStatus[t.Status],t.ResultText=this.ContractResult[t.Result],this.drawer.contractdetail={show:!0,assetsdetail:t,Dept:this.visible.Dept,comRankObject:this.ComRankNormal}}}},l=c,u=e("2877"),p=Object(u["a"])(l,s,n,!1,null,null,null);a["default"]=p.exports},3846:function(t,a,e){e("9e1e")&&"g"!=/./g.flags&&e("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:e("0bfb")})},"6b54":function(t,a,e){"use strict";e("3846");var s=e("cb7c"),n=e("0bfb"),o=e("9e1e"),i="toString",r=/./[i],c=function(t){e("2aba")(RegExp.prototype,i,t,!0)};e("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?c(function(){var t=s(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?n.call(t):void 0)}):r.name!=i&&c(function(){return r.call(this)})},"75fc":function(t,a,e){"use strict";var s=e("a745"),n=e.n(s);function o(t){if(n()(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}var i=e("774e"),r=e.n(i),c=e("c8bb"),l=e.n(c);function u(t){if(l()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return r()(t)}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){return o(t)||u(t)||p()}e.d(a,"a",function(){return d})},"774e":function(t,a,e){t.exports=e("d2d5")},"8d11":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-layout",[e("a-layout-content",[e("a-card",{attrs:{bordered:!1}},[e("div",[e("a-form",{attrs:{form:t.form,layout:"horizontal"}},[e("div",{class:t.advanced?null:"fold"},[e("a-row",{attrs:{gutter:10}},[t.roles87?e("a-col",{attrs:{md:4}},[e("a-form-item",{attrs:{label:"部门",labelCol:{span:6},wrapperCol:{span:18}}},[e("a-cascader",{directives:[{name:"decorator",rawName:"v-decorator",value:["DepId"],expression:"['DepId']"}],attrs:{options:t.options,loadData:t.loadData,changeOnSelect:"",placeholder:"请选择部门"}})],1)],1):t._e(),e("a-col",{attrs:{md:7}},[e("a-form-item",{attrs:{label:"时间",labelCol:{span:4},wrapperCol:{span:20}}},[e("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["Time"],expression:"['Time']"}],attrs:{format:"YYYY-MM-DD"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",[e("a-button",{attrs:{type:"primary"},on:{click:t.initPage}},[t._v("查询")])],1)],1)],1)],1)])],1),e("a-table",{attrs:{columns:t.columns,dataSource:t.allConnectList,pagination:!1,rowKey:"Userid"},scopedSlots:t._u([{key:"Userid",fn:function(a,s){return e("span",{staticStyle:{"text-align":"right"}},[t._v("\n          "+t._s(t.UserArray[s.Userid])+"\n        ")])}},{key:"countContract",fn:function(a,s){return e("span",{staticStyle:{"text-align":"right"}},[s.countContract?[t._v("\n            "+t._s(s.countContract)+"\n          ")]:[t._v("\n            0\n          ")]],2)}},{key:"action",fn:function(a,s){return e("span",{staticStyle:{"text-align":"right"}},[e("a",{on:{click:function(a){return t.detail(s)}}},[t._v("详情")])])}}])})],1)],1),e("drawer-detail",{attrs:{show:t.drawer.detail,refresh:t.pagerefresh}})],1)},n=[],o=e("75fc"),i=(e("7f7f"),e("ac6a"),e("b775")),r=e("c32d"),c=e.n(r),l=e("3454"),u=[{title:"销售姓名",scopedSlots:{customRender:"Userid"}},{title:"合同数量",scopedSlots:{customRender:"countContract"}},{title:"操作",scopedSlots:{customRender:"action"}}],p={components:{DrawerDetail:l["default"]},data:function(){return{advanced:!0,columns:u,formSearch:{DepId:"",Begin:"",End:""},form:this.$form.createForm(this),allConnectList:[],drawer:{detail:{show:!1}},modal:{exporttransfer:{show:!1}},invalidlayer:!1,confirmLoading:!1,invalidRecord:{},status:[],ContractResult:[],PayDaySuffix:{},options:[],moment:c.a,UserArray:[],DeptArray:[],ProductLine:[],ContractStatus:{},roles87:!1}},mounted:function(){var t=this;t.init()},methods:{init:function(){var t=this;i["a"].post("/api/Dim/Enum/DimDecode",{Names:["User","Dept"]}).then(function(a){0===a.code&&(t.UserArray=a.data.User,t.DeptArray=a.data.Dept)}).catch(function(t){console.log(t)}),i["a"].get("/api/Org/User/CurrentUsersRole").then(function(a){0===a.code&&a.data.forEach(function(a,e){"87"==a&&(t.roles87=!0,t.getDep())})}).catch(function(t){console.log(t)}),i["a"].post("/api/Dim/Enum/GetEnum",{Names:["ComProductLine","ContractStatus"]}).then(function(a){0===a.code&&(a.data.ComProductLine.forEach(function(a,e){t.ProductLine[a.key]=a.text}),a.data.ContractStatus.forEach(function(a,e){t.ContractStatus[a.key]=a.text}))}).catch(function(t){console.log(t)})},initPage:function(){this.pagechange(1)},pagerefresh:function(){this.pagechange(this.formSearch.current)},pagechange:function(t){var a=this,e=a.formSearch;a.formSearch.current=t,a.form.validateFields(function(t,s){if(!t){if(a.roles87&&!s.DepId)return void a.$message.error("请选择部门！");if(!s.Time||s.Time.length<1)return void a.$message.error("请选择时间！");a.$loading.open(),a.roles87&&(a.formSearch.DepId=s.DepId[s.DepId.length-1]),a.formSearch.Begin=c()(s.Time[0]._d).format("YYYY-MM-DD"),a.formSearch.End=c()(s.Time[1]._d).format("YYYY-MM-DD"),i["a"].post("/api/Crm/Data/ContractsCountByDept",e).then(function(t){a.$loading.close(),0===t.code&&(a.formSearch.total=t.count,a.allConnectList=t.data)}).catch(function(t){a.$loading.close(),console.log(t)})}})},detail:function(t){this.drawer.detail={show:!0,assetsdetail:t,Begin:this.formSearch.Begin,End:this.formSearch.End,ProductLine:this.ProductLine,ContractStatus:this.ContractStatus,Dept:this.DeptArray}},statusChange:function(t){this.formSearch.Result=40==t?10:""},getDep:function(){var t=this;i["a"].get("/api/Org/Department/DepsByCurUser").then(function(a){0===a.code&&a.data.forEach(function(a,e){var s={};s.value=a.code,s.label=a.name,s.isLeaf=!1,t.options.push(s)})}).catch(function(t){console.log(t)})},loadData:function(t){var a=t[t.length-1],e=this;a.loading=!0,i["a"].post("/api/Org/Department/ChildrenDepsByDepId",{DepId:a.value}).then(function(t){a.loading=!1,0===t.code&&(t.data.length>0?(a.children=[],t.data.forEach(function(t,e){var s={};s.value=t.code,s.label=t.name,s.isLeaf=!1,a.children.push(s)}),e.options=Object(o["a"])(e.options)):(a.isLeaf=!0,a.loading=!1,e.options=Object(o["a"])(e.options)))}).catch(function(t){console.log(t),a.loading=!1})}}},d=p,f=(e("3115"),e("2877")),g=Object(f["a"])(d,s,n,!1,null,null,null);a["default"]=g.exports},a745:function(t,a,e){t.exports=e("f410")},c8bb:function(t,a,e){t.exports=e("54a1")},f410:function(t,a,e){e("1af6"),t.exports=e("584a").Array.isArray}}]);